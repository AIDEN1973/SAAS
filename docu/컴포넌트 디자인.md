# 컴포넌트 기본 스타일 수정 가이드

## ✅ 정책 확인

**맞습니다!** 테넌트별로 색상만 변경하고, 기본 스타일(폰트, 간격, 크기, 레이아웃 등)은 모든 테넌트에서 공유합니다.

## 📍 기본 스타일 수정 위치

### 1. **전역 CSS 변수 (모든 컴포넌트에 공통 적용)**

**위치**: `packages/ui-core/src/styles.css`

**수정 가능한 항목**:
- 폰트 패밀리, 폰트 크기, 폰트 두께
- 간격 (spacing)
- 테두리 반경 (border-radius)
- 그림자 (shadow)
- Z-Index 레이어
- 기본 색상 값 (테넌트별 색상으로 덮어씌워짐)
- 폼 필드 컴포넌트 디자인 토큰 (Input, Select, DatePicker, Textarea 등)
- 아이콘 크기 및 선 두께 (--size-icon-*, --stroke-width-icon-*)
- 투명도 (--opacity-*)
- 필터 효과 (--filter-icon-glow)
- 테이블 컴포넌트 디자인 토큰 (--color-table-row-border, --letter-spacing-table-header 등)

**예시**:
```css
:root {
  --font-family: 'Pretendard', ...;
  --spacing-md: 1rem;
  --border-radius-lg: 1rem;
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.06);
  --z-modal: 1050;
}
```

### 2. **컴포넌트별 기본 스타일**

**위치**: 각 컴포넌트 파일 (`packages/ui-core/src/components/*.tsx`)

**수정 가능한 항목**:
- 컴포넌트별 레이아웃 구조
- 기본 패딩, 마진
- 기본 테두리 스타일
- 호버 효과, 포커스 효과
- 애니메이션/트랜지션

#### 주요 컴포넌트 파일 위치:

| 컴포넌트 | 파일 경로 | 주요 스타일 정의 위치 |
|---------|----------|---------------------|
| **Button** | `packages/ui-core/src/components/Button.tsx` | `baseStyle`, `variantStyles`, `sizeStyles` |
| **DataTable** | `packages/ui-core/src/components/DataTable.tsx` | `style` prop (인라인 스타일), 페이지네이션 지원 |
| **Pagination** | `packages/ui-core/src/components/Pagination.tsx` | `style` prop (인라인 스타일) |
| **Input** | `packages/ui-core/src/components/Input.tsx` | `inputStyle`, `sizeStyles` |
| **Card** | `packages/ui-core/src/components/Card.tsx` | `cardStyle`, `variantStyles` |
| **Badge** | `packages/ui-core/src/components/Badge.tsx` | `style` prop |
| **Modal** | `packages/ui-core/src/components/Modal.tsx` | 모달 레이아웃 스타일 |
| **Select** | `packages/ui-core/src/components/Select.tsx` | 셀렉트 박스 스타일 |
| **Textarea** | `packages/ui-core/src/components/Textarea.tsx` | 텍스트 영역 스타일 |
| **PageHeader** | `packages/ui-core/src/components/PageHeader.tsx` | 페이지 타이틀과 액션 버튼 레이아웃 |
| **AppLayout** | `packages/ui-core/src/components/AppLayout.tsx` | 전체 앱 레이아웃 (Header + Sidebar + Content) |
| **Header** | `packages/ui-core/src/components/Header.tsx` | 글로벌 헤더 (사이드바 토글 포함) |
| **Sidebar** | `packages/ui-core/src/components/Sidebar.tsx` | 사이드바 네비게이션 (반응형 Drawer/Persistent) |

### 3. **테넌트별 색상 변경 (동적)**

**위치**: `packages/ui-core/src/utils/applyTheme.ts`

**수정 불가**: 이 파일은 테넌트별 색상을 CSS 변수로 적용하는 유틸리티입니다.
- 색상 값만 변경됨
- 기본 스타일은 변경하지 않음

## 🔧 기본 스타일 수정 예시

### 예시 1: 버튼 패딩 변경

**파일**: `packages/ui-core/src/components/Button.tsx`

```typescript
// 수정 전
md: {
  padding: 'var(--spacing-sm) var(--spacing-md)',
  fontSize: 'var(--font-size-base)',
},

// 수정 후 (더 큰 패딩)
md: {
  padding: 'var(--spacing-md) var(--spacing-lg)',  // 변경
  fontSize: 'var(--font-size-base)',
},
```

### 예시 2: 테이블 헤더 스타일 변경

**파일**: `packages/ui-core/src/components/DataTable.tsx`

**주의**: DataTable 컴포넌트는 `styles.css`의 CSS 변수를 사용하여 스타일을 관리합니다. 하드코딩된 값 사용 금지.

```typescript
// 수정 전
<th
  style={{
    padding: 'var(--spacing-md)',
    fontSize: 'var(--font-size-sm)',
    fontWeight: 'var(--font-weight-semibold)',
    // ...
  }}
>

// 수정 후 (더 큰 폰트, 더 굵은 테두리)
<th
  style={{
    padding: 'var(--spacing-lg)',  // 변경
    fontSize: 'var(--font-size-base)',  // 변경
    fontWeight: 'var(--font-weight-bold)',  // 변경
    borderBottom: 'var(--border-width-thin) solid var(--color-gray-200)',  // styles.css 토큰 사용
    // ...
  }}
>
```

**DataTable 컴포넌트에서 사용하는 주요 CSS 변수**:
- 아이콘 크기: `--size-icon-md` (14px, 정렬 아이콘 등)
- 아이콘 선 두께: `--stroke-width-icon-bold` (필터 아이콘 등)
- 투명도: `--opacity-full`, `--opacity-secondary`, `--opacity-inactive`
- 필터 효과: `--filter-icon-glow` (정렬 아이콘 발광 효과)
- 테이블 행 테두리: `--color-table-row-border` (#bec9d3)
- 테이블 헤더 글자 간격: `--letter-spacing-table-header` (0.05em)

### 예시 3: 전역 간격 토큰 변경

**파일**: `packages/ui-core/src/styles.css`

```css
/* 수정 전 */
--spacing-md: 1rem;      /* 16px */

/* 수정 후 (더 넓은 간격) */
--spacing-md: 1.25rem;   /* 20px */
```

**주의**: 이렇게 변경하면 모든 컴포넌트의 `var(--spacing-md)` 사용 부분이 영향을 받습니다.

### 예시 4: 버튼 테두리 반경 변경

**파일**: `packages/ui-core/src/components/Button.tsx`

```typescript
// 수정 전
const baseStyle: React.CSSProperties = {
  borderRadius: 'var(--border-radius-lg)',  // 1rem
  // ...
};

// 수정 후 (더 둥근 모서리)
const baseStyle: React.CSSProperties = {
  borderRadius: 'var(--border-radius-xl)',  // 1.25rem
  // ...
};
```

또는 전역적으로 변경하려면:

**파일**: `packages/ui-core/src/styles.css`

```css
/* 수정 전 */
--border-radius-lg: 1rem;      /* 16px */

/* 수정 후 */
--border-radius-lg: 1.5rem;    /* 24px */
```

### 예시 5: 폼 필드 컴포넌트 디자인 토큰 변경

**파일**: `packages/ui-core/src/styles.css`

폼 필드 컴포넌트(Input, Select, DatePicker, Textarea)의 스타일은 `styles.css`의 **폼 필드 컴포넌트 디자인 토큰** 섹션에서 통합 관리됩니다.

#### 5-1. 폼 필드 테두리 두께 변경

```css
/* 수정 전 */
--border-width-form-bottom: 2px;      /* 레이아웃 유지를 위해 항상 2px로 고정 */
--border-width-form-bottom-visual: 1px; /* 기본 상태 시각적 두께 */

/* 수정 후 (더 두꺼운 테두리) */
--border-width-form-bottom: 3px;      /* 레이아웃 유지를 위해 항상 3px로 고정 */
--border-width-form-bottom-visual: 2px; /* 기본 상태 시각적 두께 */
```

**주의**: `--border-width-form-bottom`은 레이아웃 유지를 위해 항상 고정값이어야 합니다. 시각적 두께는 `box-shadow`로 조정됩니다.

#### 5-2. 폼 필드 테두리 색상 변경

```css
/* 수정 전 */
--color-form-border: var(--color-text); /* 기본 테두리 색상 */
--color-form-border-error: var(--color-red-500); /* 에러 테두리 색상 */

/* 수정 후 (더 진한 색상) */
--color-form-border: var(--color-gray-700); /* 기본 테두리 색상 */
--color-form-border-error: var(--color-red-600); /* 에러 테두리 색상 */
```

**주의**: 폼 필드 테두리 색상은 `--color-form-border`와 `--color-form-border-error` 토큰을 사용하여 일관성 있게 관리됩니다. 개별 컴포넌트에서 하드코딩하지 않습니다.

#### 5-3. 폼 필드 포커스 시 테두리 두께 변경

```css
/* 수정 전 */
--shadow-form-bottom-focus: inset 0 -2px 0 0 var(--color-form-border); /* 포커스 시 시각적 2px 테두리 */

/* 수정 후 (더 두꺼운 포커스 테두리) */
--shadow-form-bottom-focus: inset 0 -3px 0 0 var(--color-form-border); /* 포커스 시 시각적 3px 테두리 */
```

**주의**: 포커스 시 테두리 두께 변경 시 `--border-width-form-bottom`도 함께 조정해야 레이아웃이 이동하지 않습니다.

#### 5-4. 폼 필드 에러 메시지 색상 변경

```css
/* 수정 전 */
--color-form-error: var(--color-red-500); /* 에러 메시지 색상 */

/* 수정 후 */
--color-form-error: var(--color-red-600); /* 더 진한 에러 메시지 색상 */
```

#### 5-5. 폼 필드 비활성화 상태 색상 변경

```css
/* 수정 전 */
--color-form-disabled-bg: var(--color-gray-100); /* 비활성화 배경색 */
--color-form-disabled-text: var(--color-text-tertiary); /* 비활성화 텍스트 색상 */

/* 수정 후 */
--color-form-disabled-bg: var(--color-gray-50); /* 더 밝은 비활성화 배경색 */
--color-form-disabled-text: var(--color-gray-400); /* 더 연한 비활성화 텍스트 색상 */
```

**중요**: 폼 필드 컴포넌트의 모든 스타일은 `styles.css`의 디자인 토큰을 통해 일관성 있게 관리됩니다. 개별 컴포넌트 파일에서 하드코딩하지 않고, 항상 CSS 변수를 사용합니다.

## 🎨 색상 변경 (테넌트별)

색상은 **테넌트별로만** 변경되며, 기본 스타일 파일에서 수정하지 않습니다.

**테넌트별 색상 변경 방법**:
1. `tenant_theme_overrides` 테이블에 색상 토큰 저장
2. `useTheme` Hook이 자동으로 CSS 변수에 적용
3. 모든 컴포넌트가 자동으로 새로운 색상 사용

**예시**:
```json
{
  "colors": {
    "primary": {
      "light": "#60a5fa",
      "DEFAULT": "#3b82f6",
      "dark": "#2563eb"
    }
  }
}
```

## 📋 수정 체크리스트

기본 스타일을 수정할 때 확인할 사항:

- [ ] **전역 변경인가?** → `styles.css`의 CSS 변수 수정
- [ ] **특정 컴포넌트만 변경인가?** → 해당 컴포넌트 파일의 인라인 스타일 수정
- [ ] **색상 변경인가?** → ❌ 기본 스타일 파일에서 수정하지 않음 (테넌트별 테마로만 변경)
- [ ] **CSS 변수를 사용하는가?** → ✅ 하드코딩된 값 대신 CSS 변수 사용
- [ ] **모든 테넌트에 적용되는가?** → ✅ 기본 스타일은 모든 테넌트에 공통 적용
- [ ] **폼 필드 컴포넌트인가?** → ✅ `styles.css`의 폼 필드 디자인 토큰 섹션에서 통합 관리
- [ ] **레이아웃 이동이 없는가?** → ✅ 폼 필드 테두리는 `border-bottom` 고정 + `box-shadow`로 시각적 효과 구현

## ⚠️ 주의사항

1. **색상은 기본 스타일에서 수정하지 않음**
   - 색상은 테넌트별 테마로만 변경
   - `styles.css`의 색상 값은 기본값이며, 테넌트별 색상으로 덮어씌워짐

2. **CSS 변수 사용 필수**
   - 하드코딩된 값(예: `16px`, `#3b82f6`) 사용 금지
   - CSS 변수(예: `var(--spacing-md)`, `var(--color-primary)`) 사용 필수

3. **컴포넌트별 스타일은 각 파일에서 수정**
   - 전역 CSS 파일에 컴포넌트별 스타일을 추가하지 않음
   - 각 컴포넌트 파일의 인라인 스타일로 관리
   - **예외**: 폼 필드 컴포넌트(Input, Select, DatePicker, Textarea)는 `styles.css`의 디자인 토큰 섹션에서 통합 관리

4. **테넌트별 커스터마이징 제한**
   - v1.0 정책: 색상만 테넌트별 변경 가능
   - 폰트, 간격, 크기 등은 모든 테넌트 공통

5. **폼 필드 컴포넌트 스타일 일관성 관리**
   - 폼 필드 컴포넌트의 모든 스타일은 `styles.css`의 **폼 필드 컴포넌트 디자인 토큰** 섹션에서 통합 관리
   - 개별 컴포넌트에서 하드코딩하지 않고, 항상 CSS 변수 사용
   - 레이아웃 이동 방지: `border-bottom`은 항상 고정 두께로 유지하고, 시각적 효과는 `box-shadow`로 구현
   - 에러 색상, 비활성화 색상 등도 디자인 토큰으로 통합 관리

## 📚 관련 파일

- **전역 스타일**: `packages/ui-core/src/styles.css`
  - 폼 필드 컴포넌트 디자인 토큰 섹션: `--border-width-form-bottom`, `--color-form-border`, `--shadow-form-bottom-*` 등
- **테마 적용**: `packages/ui-core/src/utils/applyTheme.ts`
- **테마 Hook**: `packages/ui-core/src/hooks/useTheme.ts`
- **컴포넌트**: `packages/ui-core/src/components/*.tsx`
  - 폼 필드 컴포넌트: `Input.tsx`, `Select.tsx`, `DatePicker.tsx`, `Textarea.tsx`

## 🎯 폼 필드 컴포넌트 디자인 토큰 상세 가이드

### 폼 필드 컴포넌트 디자인 토큰 목록

`packages/ui-core/src/styles.css`의 **폼 필드 컴포넌트 디자인 토큰** 섹션에 정의된 토큰들:

#### 테두리 관련 토큰
- `--border-width-form-bottom`: 폼 필드 하단 테두리 두께 (레이아웃 유지를 위해 항상 고정값)
- `--border-width-form-bottom-visual`: 폼 필드 하단 테두리 시각적 두께 (기본 상태)
- `--color-form-border`: 폼 필드 테두리 기본 색상
- `--color-form-border-error`: 폼 필드 테두리 에러 색상

#### 테두리 시각적 효과 토큰 (box-shadow)
- `--shadow-form-bottom-default`: 기본 상태 시각적 1px 테두리
- `--shadow-form-bottom-default-error`: 에러 상태 시각적 1px 테두리
- `--shadow-form-bottom-focus`: 포커스 상태 시각적 2px 테두리
- `--shadow-form-bottom-focus-error`: 에러 포커스 상태 시각적 2px 테두리

#### 상태별 색상 토큰
- `--color-form-error`: 폼 필드 에러 메시지 색상
- `--color-form-disabled-bg`: 폼 필드 비활성화 배경색
- `--color-form-disabled-text`: 폼 필드 비활성화 텍스트 색상

### 레이아웃 이동 방지 원리

폼 필드 컴포넌트는 포커스 시 테두리 두께가 변경되어도 레이아웃이 이동하지 않도록 설계되었습니다:

1. **`border-bottom`은 항상 고정 두께**: `--border-width-form-bottom` (기본값: 2px)로 항상 고정
2. **시각적 효과는 `box-shadow`로 구현**: 기본 상태는 1px, 포커스 상태는 2px로 보이도록 `inset box-shadow` 사용
3. **색상만 변경**: `border-bottom-color`는 `transparent`로 유지하고, `box-shadow`의 색상만 변경

이 방식으로 테두리 두께가 변경되어도 실제 레이아웃 크기는 변하지 않습니다.

### 폼 필드 컴포넌트 일관성 보장

모든 폼 필드 컴포넌트(Input, Select, DatePicker, Textarea)는 동일한 디자인 토큰을 사용하여 일관성을 보장합니다:

- ✅ 모든 컴포넌트가 동일한 테두리 스타일 사용
- ✅ 모든 컴포넌트가 동일한 에러 색상 사용
- ✅ 모든 컴포넌트가 동일한 포커스 효과 사용
- ✅ 스타일시트에서 한 곳만 수정하면 모든 컴포넌트에 반영

## 📄 PageHeader 컴포넌트 사용 가이드

### PageHeader 컴포넌트 개요

**위치**: `packages/ui-core/src/components/PageHeader.tsx`

**용도**: 페이지 타이틀과 액션 버튼을 한 줄로 배치하는 공통 컴포넌트

**특징**:
- 반응형 지원: 모바일에서는 타이틀과 액션이 줄바꿈됨
- Design System 토큰 사용: 모든 스타일은 CSS 변수로 관리
- 일관된 레이아웃: 모든 페이지에서 동일한 헤더 구조 제공

### Props

| Prop | 타입 | 기본값 | 설명 |
|------|------|-------|------|
| `title` | `string` | 필수 | 페이지 타이틀 |
| `actions` | `React.ReactNode` | `undefined` | 타이틀 옆에 표시할 액션 버튼들 |
| `titleSize` | `'xl' \| '2xl' \| '3xl'` | `'3xl'` | 타이틀 폰트 크기 |
| `titleWeight` | `'bold' \| 'extrabold'` | `'extrabold'` | 타이틀 폰트 두께 |
| `className` | `string` | `undefined` | 추가 클래스명 |
| `style` | `React.CSSProperties` | `undefined` | 추가 스타일 (특수 케이스용) |

### 사용 예시

#### 기본 사용 (타이틀만)

```tsx
<PageHeader title="학생 관리" />
```

#### 액션 버튼 포함 (단일 버튼)

```tsx
<PageHeader
  title="강사 관리"
  actions={
    <Button variant="solid" size="sm" onClick={handleCreate}>
      강사 등록
    </Button>
  }
/>
```

#### 액션 버튼 포함 (여러 버튼)

```tsx
<PageHeader
  title="반 관리"
  actions={
    <div style={{ display: 'flex', gap: 'var(--spacing-sm)' }}>
      <Button variant="outline" size="sm" onClick={handleFilter}>
        필터
      </Button>
      <Button variant="solid" size="sm" onClick={handleCreate}>
        반 생성
      </Button>
    </div>
  }
/>
```

#### 태블릿 모드 특수 스타일 (특수 케이스)

```tsx
<PageHeader
  title="출결 관리"
  style={{
    ...(isTablet && {
      fontSize: 'max(var(--font-size-2xl), var(--tablet-font-size-title-min))',
    }),
  }}
/>
```

**주의**: `style` prop은 특수한 요구사항이 있을 때만 사용합니다. 일반적으로는 `titleSize` prop을 사용하는 것이 권장됩니다.

### 사용 규칙

1. **모든 페이지에서 사용**: 모든 페이지는 PageHeader를 사용하여 일관된 헤더 구조를 유지합니다.

2. **Container 내부 첫 번째 요소**: PageHeader는 Container 내부의 첫 번째 요소로 배치합니다.

```tsx
<Container maxWidth="xl" padding="lg">
  <PageHeader title="페이지 제목" />
  {/* 나머지 콘텐츠 */}
</Container>
```

3. **actions prop 사용**:
   - 단일 Button: 직접 전달 (PageHeader가 자동으로 감싸는 div 제공)
   - 여러 요소: `<div>`로 감싸서 전달 (여러 버튼을 그룹화)

4. **반응형 처리**: PageHeader는 자동으로 반응형을 처리합니다.
   - 모바일 (xs, sm): 타이틀과 액션이 줄바꿈됨 (`flexWrap: 'wrap'`)
   - 데스크톱 (lg, xl): 한 줄로 배치 (`flexWrap: 'nowrap'`)

5. **Design System 토큰 사용**: 모든 스타일은 CSS 변수를 사용합니다.
   - 폰트 크기: `var(--font-size-xl)`, `var(--font-size-2xl)`, `var(--font-size-3xl)`
   - 폰트 두께: `var(--font-weight-bold)`, `var(--font-weight-extrabold)`
   - 간격: `var(--spacing-sm)`, `var(--spacing-md)`, `var(--spacing-lg)`
   - 색상: `var(--color-text)`

### 페이지별 사용 현황

현재 모든 페이지(14개)에서 PageHeader를 일관성 있게 사용하고 있습니다:

- ✅ StudentsPage: actions에 DataTableActionButtons 사용
- ✅ StudentDetailPage: actions에 여러 버튼 그룹화
- ✅ ClassesPage: actions에 여러 버튼 그룹화
- ✅ TeachersPage: actions에 단일 버튼
- ✅ AttendancePage: style prop으로 태블릿 모드 특수 처리
- ✅ AIPage, HomePage, BillingPage, NotificationsPage: actions 없음 (타이틀만)
- ✅ AnalyticsPage, BillingHomePage, StudentsHomePage, StudentTasksPage, AllCardsPage: actions에 단일 버튼

### 스타일 수정 방법

PageHeader의 스타일을 수정하려면 `packages/ui-core/src/components/PageHeader.tsx` 파일을 수정합니다.

**주의사항**:
- 하드코딩된 값 사용 금지
- CSS 변수 사용 필수
- 모든 페이지에 일관되게 적용됨

