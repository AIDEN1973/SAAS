## âœ… Agent ì•„í‚¤í…ì²˜ ì „í™˜ ì™„ë£Œ (2025-01-29)

**ìƒíƒœ**: âœ… **ì™„ë£Œ ë° ë°°í¬ë¨**
**ì„±ëŠ¥ ìµœì í™”**: âœ… **ì™„ë£Œ** - ì‘ë‹µ ì‹œê°„ 30-40% ë‹¨ì¶•, ë¹„ìš© 20-30% ì ˆê°
**ë¬¸ì„œ**:
- `docu/Agent_ì•„í‚¤í…ì²˜_ì „í™˜.md` - Agent ì „í™˜ ê°€ì´ë“œ
- `docu/ì±—ë´‡_ì„±ëŠ¥ìµœì í™”.md` - ì„±ëŠ¥ ìµœì í™” ìƒì„¸

### ì „í™˜ ê°œìš”

**Intent ê¸°ë°˜ (147ê°œ) â†’ Agent ê¸°ë°˜ (15ê°œ Tool)**

- âœ… ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™” ì§€ì›
- âœ… í™•ì¥ì„± í–¥ìƒ (ìƒˆ ìš”ì²­ ì‹œ Tool íŒŒë¼ë¯¸í„°ë§Œ í™•ì¥)
- âœ… ìœ ì§€ë³´ìˆ˜ ë¹„ìš© 80% ê°ì†Œ
- âœ… ë³µì¡í•œ ë©€í‹°í„´ ëŒ€í™” ì§€ì›

### ì£¼ìš” ë³€ê²½ì‚¬í•­

| í•­ëª© | Before | After |
|------|--------|-------|
| **ì •ì˜ í•„ìš”** | 147ê°œ Intent | 15ê°œ Tool |
| **ì½”ë“œëŸ‰** | ~10,000ì¤„ | ~500ì¤„ |
| **LLM ì—­í• ** | Intent ë¶„ë¥˜ê¸° | ëŒ€í™” ì£¼ì²´ (Agent) |
| **ëª¨ë“œ** | Intent ëª¨ë“œ | **Agent ëª¨ë“œ (ê¸°ë³¸ê°’)** |

### ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒíƒœ

- âœ… Phase 1: ë¬¸ì„œí™” ë° ì„¤ê³„ ì™„ë£Œ
- âœ… Phase 2: í•µì‹¬ êµ¬í˜„ ì™„ë£Œ
- âœ… Phase 3: ë ˆê±°ì‹œ ì œê±° ì™„ë£Œ
- âœ… Phase 4: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ ì™„ë£Œ
- âœ… Phase 5: ë°°í¬ ì™„ë£Œ
- âœ… Phase 6: ì„±ëŠ¥ ìµœì í™” ì™„ë£Œ (2025-01-29)

### ì œê±°ëœ ë ˆê±°ì‹œ íŒŒì¼ (ì´ ~10,000ì¤„)

**Intent ê´€ë ¨ íŒŒì¼:**
- âŒ `_shared/intent-registry.ts` (2,600ì¤„)
- âŒ `_shared/l0-handlers.ts` (4,900ì¤„)
- âŒ `chatops/handlers/intent-resolver.ts` (1,500ì¤„)
- âŒ `_shared/keyword-filter.ts`
- âŒ `_shared/intent-parser.ts`
- âŒ `_shared/inline-execution.ts`

**Gate ê´€ë ¨ íŒŒì¼:**
- âŒ `chatops/handlers/domain-gate.ts`
- âŒ `chatops/handlers/contract-gate.ts`
- âŒ `chatops/handlers/auth-preflight.ts`
- âŒ `chatops/handlers/gates.ts`
- âŒ `chatops/handlers/ux.ts`

**ê¸°íƒ€ Intent ì „ìš© íŒŒì¼:**
- âŒ `chatops/handlers/idempotency.ts`
- âŒ `chatops/handlers/audit.ts`
- âŒ `chatops/handlers/openai-client.ts`
- âŒ `chatops/handlers/preflight.ts`

### í˜„ì¬ ì•„í‚¤í…ì²˜

**Agent ëª¨ë“œ (ê¸°ë³¸ê°’)**
```
ì‚¬ìš©ì ë©”ì‹œì§€
    â†“
Agent Engine (runAgent)
    â†“
LLM (OpenAI Function Calling)
    â†“
Tool ì„ íƒ ë° ì‹¤í–‰ (15ê°œ Tool)
    â†“
ì‘ë‹µ ìƒì„±
```

**í•µì‹¬ íŒŒì¼:**
- âœ… `chatops/index.ts` (~250ì¤„, Agent ì „ìš©)
- âœ… `_shared/agent-engine-final.ts` (Agent ì—”ì§„)
- âœ… `_shared/agent-tools-final.ts` (15ê°œ Tool ì •ì˜)
- âœ… `_shared/memory-cache.ts` (ë©”ëª¨ë¦¬ ìºì‹±, 2025-01-29)
- âœ… `_shared/agent-engine-streaming.ts` (Streaming ì§€ì›, 2025-01-29)
- âœ… `chatops-stream/index.ts` (Streaming ì—”ë“œí¬ì¸íŠ¸, 2025-01-29)

---

## Agent ì•„í‚¤í…ì²˜ ìƒì„¸

**ìƒì„¸ ë¬¸ì„œ**:
- ğŸ“˜ **`docu/Agent_ì•„í‚¤í…ì²˜_ì „í™˜.md`** - Agent ì „í™˜ ê°€ì´ë“œ
- ğŸ“˜ **`docu/Agent_íŒŒë¼ë¯¸í„°_ì¶”ì¶œ.md`** - íŒŒë¼ë¯¸í„° ì¶”ì¶œ ë°©ë²•
- ğŸ“˜ **`docu/Agent_ê³„ì•½ê²€ì¦.md`** - ê³„ì•½ ê²€ì¦ ì²´ê³„
- ğŸ“˜ **`docu/Agent_ì‚¬ì „ì˜ˆë°©.md`** - ì‚¬ì „ì˜ˆë°© ì‹œìŠ¤í…œ
- ğŸ“˜ **`docu/ì±—ë´‡_ì„±ëŠ¥ìµœì í™”.md`** - ì„±ëŠ¥ ìµœì í™” ìƒì„¸ (2025-01-29)

### ì„±ëŠ¥ ê°œì„  ìš”ì•½

**Phase 1 ìµœì í™”** (2025-01-29):
| ìµœì í™” í•­ëª© | íš¨ê³¼ |
|------------|------|
| maxIterations ê°ì†Œ (5â†’3) | API í˜¸ì¶œ 40% ê°ì†Œ |
| ëŒ€í™” íˆìŠ¤í† ë¦¬ ê°ì†Œ (10â†’6) | ì…ë ¥ í† í° 20-30% ê°ì†Œ |
| max_tokens ê°ì†Œ (1500â†’800) | ì¶œë ¥ í† í° 47% ê°ì†Œ |
| ë©”ëª¨ë¦¬ ìºì‹± | Tool ì‹¤í–‰ 50-70% ë‹¨ì¶• |
| Streaming ì‘ë‹µ | ì²´ê° ì†ë„ 70-80% ê°œì„  |

**Phase 2 ì•ˆì •ì„± ê°œì„ ** (2025-12-31):
| ê°œì„  í•­ëª© | íš¨ê³¼ |
|----------|------|
| conversationHistory í™•ëŒ€ (4â†’10) | Draft ID ìœ ì§€ ì•ˆì •ì„± í–¥ìƒ |
| DB ì €ì¥ íƒ€ì´ë° ìµœì í™” | ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ë°ì´í„° ì •í•©ì„± ë³´ì¥ |
| íŠ¸ëœì­ì…˜ ì•ˆì „ì„± ê°•í™” | DB RPC ì „í™˜ìœ¼ë¡œ ë°ì´í„° ë¬´ê²°ì„± í–¥ìƒ |
| Tool description ê°•í™” | LLM ì´í•´ë„ í–¥ìƒ ë° ì •í™•ë„ ê°œì„  |
| í•™ìƒ ì´ë¦„/ë°˜ ì´ë¦„ êµ¬ë¶„ ê°•í™” | ìš°ì„ ìˆœìœ„ ëª…ì‹œë¡œ ëª¨í˜¸ì„± ì œê±° |

**ì¢…í•© íš¨ê³¼**: ì‘ë‹µ ì‹œê°„ 30-40% ë‹¨ì¶•, ë¹„ìš© 20-30% ì ˆê°, Draft ì›Œí¬í”Œë¡œìš° ì•ˆì •ì„± ëŒ€í­ í–¥ìƒ

### Tool ëª©ë¡ (12ê°œ)

**SSOT**: `infra/supabase/supabase/functions/_shared/agent-tools-final.ts`

#### 1. manage_student - í•™ìƒ ê´€ë¦¬

| Action | ì„¤ëª… | í•„ìˆ˜ íŒŒë¼ë¯¸í„° |
|--------|------|--------------|
| `search` | í•™ìƒ ê²€ìƒ‰ | `student_name` |
| `get_profile` | í•™ìƒ í”„ë¡œí•„ ì¡°íšŒ | `student_name` ë˜ëŠ” `student_id` |
| `register` | í•™ìƒ ë“±ë¡ | `student_name`, `phone`, `birth_date` |
| `update` | í•™ìƒ ì •ë³´ ìˆ˜ì • | `student_name` |
| `update_contact` | ë³´í˜¸ì ì—°ë½ì²˜ ìˆ˜ì • | `student_name`, `phone` |
| `pause` | íœ´ì› ì²˜ë¦¬ | `student_name`, `date` |
| `resume` | ë³µê·€ ì²˜ë¦¬ | `student_name` |
| `discharge` | í‡´ì› ì²˜ë¦¬ | `student_name`, `date` |
| `change_class` | ë°˜ ë³€ê²½ | `student_name`, `class_name` |
| `merge` | ì¤‘ë³µ í•™ìƒ ë³‘í•© | `student_name` |
| `assign_tags` | íƒœê·¸ í• ë‹¹ | `student_name`, `tags` ë˜ëŠ” `tag_names` |

**ì„ íƒ íŒŒë¼ë¯¸í„°**: `guardian_phone`, `address`, `email`, `grade`, `school_name`, `reason`

#### 2. query_attendance - ì¶œê²° ì¡°íšŒ

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `late` | ì§€ê° í•™ìƒ ì¡°íšŒ | `date` (ê¸°ë³¸: ì˜¤ëŠ˜) |
| `absent` | ê²°ì„ í•™ìƒ ì¡°íšŒ | `date` |
| `unchecked` | ë¯¸ì²´í¬ í•™ìƒ ì¡°íšŒ | `date` |
| `by_class` | ë°˜ë³„ ì¶œê²° ì¡°íšŒ | `date`, `class_name` |
| `by_student` | í•™ìƒë³„ ì¶œê²° ì¡°íšŒ | `date`, `student_name` |

#### 3. manage_attendance - ì¶œê²° ê´€ë¦¬

| Action | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|--------|------|----------|
| `notify_absent` | ê²°ì„ ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ | `date` |
| `notify_late` | ì§€ê° ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ | `date` |
| `request_reason` | ì‚¬ìœ  ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡ | `date`, `student_name` |
| `correct` | ì¶œê²° ê¸°ë¡ ìˆ˜ì • | `date`, `student_name`, `status` |
| `bulk_update` | ì¼ê´„ ì—…ë°ì´íŠ¸ | `date` |
| `mark_excused` | ì¸ì • ê²°ì„ ì²˜ë¦¬ | `date`, `student_name` |

#### 4. query_message - ë©”ì‹œì§€ ì¡°íšŒ

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `sent_log` | ë°œì†¡ëœ ë©”ì‹œì§€ ë¡œê·¸ | `date`, `student_name` |
| `failed_log` | ì‹¤íŒ¨í•œ ë©”ì‹œì§€ ë¡œê·¸ | `date` |
| `preview` | ìˆ˜ì‹ ì ë¯¸ë¦¬ë³´ê¸° | - |

#### 5. send_message - ë©”ì‹œì§€ ë°œì†¡

| Type | ì„¤ëª… | í•„ìˆ˜ íŒŒë¼ë¯¸í„° |
|------|------|--------------|
| `single` | ê°œë³„ ë°œì†¡ | `recipient`, `message` |
| `bulk` | ëŒ€ëŸ‰ ë°œì†¡ | `recipients`, `message` |
| `scheduled` | ì˜ˆì•½ ë°œì†¡ | `recipient(s)`, `message`, `schedule_time` |
| `resend_failed` | ì‹¤íŒ¨ ë©”ì‹œì§€ ì¬ë°œì†¡ | - |
| `cancel_scheduled` | ì˜ˆì•½ ì·¨ì†Œ | - |

#### 6. draft_message - ë©”ì‹œì§€ ì´ˆì•ˆ ì‘ì„±

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `general` | ì¼ë°˜ ê³µì§€ ì´ˆì•ˆ | `target`, `content` |
| `absence` | ê²°ì„ ì•ˆë‚´ ì´ˆì•ˆ | `target` |
| `overdue` | ì—°ì²´ ì•ˆë‚´ ì´ˆì•ˆ | `target` |

#### 7. query_billing - ìˆ˜ë‚© ì¡°íšŒ

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `overdue_list` | ì—°ì²´ ëª©ë¡ | `month` |
| `invoice_status` | ì²­êµ¬ì„œ ìƒíƒœ | `month` |
| `unissued` | ë¯¸ë°œí–‰ ì²­êµ¬ì„œ | `month` |
| `by_student` | í•™ìƒë³„ ìˆ˜ë‚© ë‚´ì—­ | `student_name` |

#### 8. manage_billing - ìˆ˜ë‚© ì²˜ë¦¬

| Action | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|--------|------|----------|
| `issue_invoice` | ì²­êµ¬ì„œ ë°œí–‰ | `month` |
| `send_payment_link` | ê²°ì œ ë§í¬ ë°œì†¡ | `student_name` |
| `schedule_notice` | ì—°ì²´ ì•ˆë‚´ ì˜ˆì•½ | - |
| `record_payment` | ìˆ˜ë™ ê²°ì œ ê¸°ë¡ | `student_name`, `amount` |

#### 9. query_class - ë°˜ ì¡°íšŒ

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `list` | ë°˜ ëª©ë¡ ì¡°íšŒ | - |
| `roster` | ë°˜ ëª…ë‹¨ ì¡°íšŒ | `class_name` |

#### 10. get_report - ë¦¬í¬íŠ¸ ì¡°íšŒ

| Type | ì„¤ëª… | íŒŒë¼ë¯¸í„° |
|------|------|----------|
| `dashboard` | ëŒ€ì‹œë³´ë“œ KPI | `period` (today/week/month) |
| `attendance` | ì¶œê²° ìš”ì•½ | `period` |
| `billing` | ìˆ˜ë‚© ìš”ì•½ | `period` |

#### 11. confirm_action - ì‘ì—… ì‹¤í–‰ í™•ì¸

ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…(Draft)ì„ ì‹¤í–‰í•©ë‹ˆë‹¤. íŒŒë¼ë¯¸í„° ì—†ìŒ.

#### 12. cancel_action - ì‘ì—… ì·¨ì†Œ

ëŒ€ê¸° ì¤‘ì¸ ì‘ì—…(Draft)ì„ ì·¨ì†Œí•©ë‹ˆë‹¤. íŒŒë¼ë¯¸í„° ì—†ìŒ.

---

### ì‚¬ìš© ì˜ˆì‹œ

| ì‚¬ìš©ì ìš”ì²­ | ì‚¬ìš©ë˜ëŠ” Tool | Action/Type |
|------------|--------------|-------------|
| "í™ê¸¸ë™ í•™ìƒ ë“±ë¡í•´ì¤˜" | `manage_student` | `register` |
| "ê¹€ì² ìˆ˜ í•™ìƒ ì •ë³´ ì•Œë ¤ì¤˜" | `manage_student` | `get_profile` |
| "ì˜¤ëŠ˜ ê²°ì„í•œ í•™ìƒ ì•Œë ¤ì¤˜" | `query_attendance` | `absent` |
| "Aë°˜ ëª…ë‹¨ ë³´ì—¬ì¤˜" | `query_class` | `roster` |
| "ì—°ì²´ í•™ìƒ ëª©ë¡" | `query_billing` | `overdue_list` |
| "ì´ë²ˆ ë‹¬ ì¶œê²° í˜„í™©" | `get_report` | `attendance` |
| "ê¹€ì² ìˆ˜ í‡´ì› ì²˜ë¦¬í•´ì¤˜" | `manage_student` | `discharge` |
| "ì „ì²´ í•™ìƒì—ê²Œ ê³µì§€ ë³´ë‚´ì¤˜" | `send_message` | `bulk` |
| "ë°•ì˜í¬ íœ´ì› ì²˜ë¦¬" | `manage_student` | `pause` |
| "Bë°˜ìœ¼ë¡œ ë°˜ ë³€ê²½" | `manage_student` | `change_class` |

---

## ğŸ“š ë ˆê±°ì‹œ ë¬¸ì„œ (Intent ê¸°ë°˜)

**Intent ê¸°ë°˜ ì‹œìŠ¤í…œ ë¬¸ì„œëŠ” `docu/legacy/` í´ë”ë¡œ ì´ë™ë˜ì—ˆìŠµë‹ˆë‹¤.**

- ğŸ“¦ **`docu/legacy/ChatOps_íŒŒë¼ë¯¸í„°_ì¶”ì¶œ_ì¢…í•©_ëŒ€ì±…_Intentê¸°ë°˜.md`**
- ğŸ“¦ **`docu/legacy/ê³„ì•½ë¶•ê´´ë°©ì§€_Intentê¸°ë°˜.md`**
- ğŸ“¦ **`docu/legacy/ë¶•ê´´ì‚¬ì „ì˜ˆë°©_Intentê¸°ë°˜.md`**
- ğŸ“¦ **`docu/legacy/README.md`** - ë ˆê±°ì‹œ ë¬¸ì„œ ê°€ì´ë“œ

**âš ï¸ ì£¼ì˜**: ì´ ë¬¸ì„œë“¤ì€ ì°¸ê³ ìš©ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ëŠ¥ ê°œë°œ ì‹œ Agent ê¸°ë°˜ ë¬¸ì„œë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

---

## âš ï¸ ë ˆê±°ì‹œ Intent ì¹´íƒˆë¡œê·¸ (ì•„ì¹´ì´ë¸Œë¨)

**ì•„ë˜ ë‚´ìš©ì€ ë ˆê±°ì‹œ Intent ì‹œìŠ¤í…œì˜ ì°¸ì¡°ìš© ë¬¸ì„œì…ë‹ˆë‹¤.**
**í˜„ì¬ ì‹œìŠ¤í…œì€ Agent ëª¨ë“œë¡œ ë™ì‘í•˜ë©° Intentë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

**ğŸ“¦ ë ˆê±°ì‹œ ë¬¸ì„œ**: `docu/legacy/README.md` ì°¸ì¡°

---

9. Intent ì¹´íƒˆë¡œê·¸ (ì „ì²´ 147ê°œ) - âš ï¸ ë ˆê±°ì‹œ (ì•„ì¹´ì´ë¸Œë¨)

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-28 | **ë§¤ì¹­ ì •í™•ë„**: 100% (11ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëª¨ë‘ í†µê³¼)

âš ï¸ **SSOT**: ì´ ëª©ë¡ì€ packages/chatops-intents/src/registry.tsì˜ Intent Registryë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìë™ ìƒì„±ë©ë‹ˆë‹¤.
- ì½”ë“œ Registryê°€ SSOTì´ë©°, ì´ ë¬¸ì„œëŠ” ì°¸ì¡°ìš©ì…ë‹ˆë‹¤.
- ìƒˆ Intent ì¶”ê°€ ì‹œ: Registryì— ë¨¼ì € ë“±ë¡í•˜ê³ , ì´ ë¬¸ì„œëŠ” ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.

**Intent Registry êµ¬ì¡°:**
- ê° IntentëŠ” `examples?: string[]` í•„ë“œë¥¼ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ë°œí™” ì˜ˆì‹œ)
- `examples`ëŠ” ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ ì…ë ¥í•  ë²•í•œ ìì—°ì–´ ë¬¸ì¥ë“¤ì˜ ë°°ì—´ì…ë‹ˆë‹¤
- 147ê°œ Intent ëª¨ë‘ì— `examples` ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ ì œê³µ: `scripts/generate-intent-examples.ts`
- í’ˆì§ˆ ê²Œì´íŠ¸: ë‹¤ì–‘ì„± ì ìˆ˜, PII í•„í„°ë§, ì¤‘ë³µ ì œê±°, ê¸¸ì´ ì œí•œ

**Intent Resolver êµ¬ì¡° (Catalog ì¤‘ì‹¬ í›„ë³´ ì œí•œ):**
- `extractIntentCandidates()`: Registry ê¸°ë°˜ í›„ë³´ ì¶”ì¶œ (ë‚˜ì¤‘ì— ì„ë² ë”©ìœ¼ë¡œ êµì²´ ê°€ëŠ¥í•˜ë„ë¡ êµ¬ì¡° ê³ ì •)
- **ìš°ì„ ìˆœìœ„ ë° ì ìˆ˜ ì²´ê³„**:
  1. `examples` ë§¤ì¹­ (ìµœê³  ì ìˆ˜)
     - ì •í™• ì¼ì¹˜: 30ì 
     - ë¶€ë¶„ ì¼ì¹˜: ìµœì†Œ 5ì, 70% ì´ìƒ ê²¹ì¹¨ ì‹œ 12ì  Ã— ê²¹ì¹¨ ë¹„ìœ¨
     - í‚¤ì›Œë“œ ì¼ì¹˜: ìµœì†Œ 2ê°œ í‚¤ì›Œë“œ, í‚¤ì›Œë“œë‹¹ 2ì  + ì¤‘ìš” í‚¤ì›Œë“œ ë³´ë„ˆìŠ¤ 3ì 
     - ì¤‘ìš” í‚¤ì›Œë“œ: ['ì§€ê°', 'ê²°ì„', 'ì¶œì„', 'ì¶œê²°', 'ì—°ì²´', 'ë¯¸ë‚©', 'í”„ë¡œí•„', 'ê²€ìƒ‰']
     - ì—¬ëŸ¬ examples ì¤‘ ìµœê³  ì ìˆ˜ë§Œ ì‚¬ìš© (bestExampleScore)
  2. `description` ë§¤ì¹­: examples ìˆìœ¼ë©´ 1ì , ì—†ìœ¼ë©´ 5ì 
  3. í‚¤ì›Œë“œ íŒ¨í„´ ë§¤ì¹­: ë„ë©”ì¸/íƒ€ì…/ì•¡ì…˜ ê¸°ë°˜ (examples ìœ ë¬´ì— ë”°ë¼ ì ìˆ˜ ì¡°ì •)
  4. `INTENT_KEYWORD_MAP` ë§¤ì¹­: í•˜ìœ„ í˜¸í™˜ì„± (examples ìˆìœ¼ë©´ 1ì , ì—†ìœ¼ë©´ 2ì )
- **ë§¤ì¹­ ì •í™•ë„**: 100% (11ê°œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ëª¨ë‘ í†µê³¼)
- LLMì€ í›„ë³´ ëª©ë¡ì—ì„œë§Œ Intentë¥¼ ì„ íƒ (ììœ  ìƒì„± ê¸ˆì§€)
- í”„ë¡ íŠ¸ì—”ë“œ í•„í„°ë§ì€ "í‘œì‹œ ë³´ì¡°" ì—­í• ë§Œ ìˆ˜í–‰ (SSOT ê²½ê³„ ë³´í˜¸)

**í‘œê¸° ê·œì¹™:**
- **Level**: L0 (ì¡°íšŒ/ì´ˆì•ˆ), L1 (Inline Execution), L2 (Inline Execution)
- **L2 ë¶„ë¥˜**: L2-A (ì•Œë¦¼/ë°œì†¡), L2-B (ë„ë©”ì¸ ë³€ê²½)
- **Params**: í•µì‹¬ í•„ë“œë§Œ ìš”ì•½ (ìƒì„¸ Zod ìŠ¤í‚¤ë§ˆëŠ” Registry ì°¸ì¡°)
- **Response**: L0 Intentì˜ ì‘ë‹µ êµ¬ì¡° (L1/L2ëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬)
- **Event Type**: L2-A Intentì˜ event_type ë§¤í•‘ (AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•¨)

**ğŸ“Š ì „ì²´ í†µê³„ (Registry ê¸°ì¤€):**
- ì´ Intent: **147ê°œ**
- L0 (ì¡°íšŒ/ì´ˆì•ˆ): **58ê°œ** (39.5%)
- L1 (Inline Execution): **18ê°œ** (12.2%)
- L2-A (ì•Œë¦¼/ë°œì†¡): **23ê°œ** (15.6%)
- L2-B (ë„ë©”ì¸ ë³€ê²½): **48ê°œ** (32.7%)
- L2 í•©ê³„: **71ê°œ** (48.3%)
- ë¹„ìœ¨ (L0:L1:L2): **3.2:1:3.9**

**âš ï¸ ì¤‘ìš”: ì‚¬ìš©ì ìš”ì•½ê³¼ ì‹¤ì œ Registry ì°¨ì´**
- ì‚¬ìš©ì ìš”ì•½: ì´ 146ê°œ, L0 ì•½ 62ê°œ, L1 ì•½ 38ê°œ, L2-A ì•½ 28ê°œ, L2-B ì•½ 18ê°œ
- ì‹¤ì œ Registry: ì´ 147ê°œ, L0 58ê°œ, L1 18ê°œ, L2-A 23ê°œ, L2-B 48ê°œ
- **ì£¼ìš” ì°¨ì´**: L1ì´ ì‹¤ì œë¡œëŠ” 18ê°œ(ìš”ì•½ì˜ 38ê°œì™€ 20ê°œ ì°¨ì´), L2-Bê°€ ì‹¤ì œë¡œëŠ” 48ê°œ(ìš”ì•½ì˜ 18ê°œì™€ 30ê°œ ì°¨ì´)

**âœ… í•¸ë“¤ëŸ¬ êµ¬í˜„ ìƒíƒœ (2025-01-27 ê¸°ì¤€)**
- **L0 í•¸ë“¤ëŸ¬**: 58ê°œ ëª¨ë‘ êµ¬í˜„ ì™„ë£Œ
  - ìœ„ì¹˜: `infra/supabase/functions/_shared/l0-handlers.ts`
  - Registry: `l0HandlerRegistry`ì— ë“±ë¡ ì™„ë£Œ
  - í†µí•©: `infra/supabase/functions/chatops/index.ts`ì—ì„œ `getL0Handler()` ì‚¬ìš©
- **L2-A í•¸ë“¤ëŸ¬**: 23ê°œ ëª¨ë‘ êµ¬í˜„ ì™„ë£Œ
  - ìœ„ì¹˜: `infra/supabase/functions/execute-student-task/handlers/*.ts`
  - Registry: `infra/supabase/functions/execute-student-task/handlers/registry.ts`ì— ë“±ë¡ ì™„ë£Œ
  - í†µí•©: `infra/supabase/functions/execute-student-task/index.ts`ì—ì„œ `getHandler()` ì‚¬ìš©
- **ì²´í¬ë¦¬ìŠ¤íŠ¸ ì¤€ìˆ˜**: ëª¨ë“  í•¸ë“¤ëŸ¬ê°€ P0/P1/P2 í•­ëª© ì¤€ìˆ˜ í™•ì¸ ì™„ë£Œ
  - P0: `withTenant()` ì‚¬ìš©, PII ë§ˆìŠ¤í‚¹, Fail-Closed, SSOT ì¤€ìˆ˜
  - P1: ë‚ ì§œ ì²˜ë¦¬(`toKSTDate()`), Policy ê²½ë¡œ SSOT í—¬í¼ í•¨ìˆ˜ ì‚¬ìš©
  - P2: ë ˆì´ì–´ íƒœê·¸, ì¼ê´€ì„±, ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

**âœ… ì—…ì¢… ì¤‘ë¦½ì„± (Industry Neutrality)**

ChatOps ì‹œìŠ¤í…œì€ **ì—…ì¢… ì¤‘ë¦½ì (Industry Neutral)**ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

**ì—…ì¢… ì¤‘ë¦½ì  êµ¬í˜„:**
- ChatOpsëŠ” Industry Adapterë¥¼ ì‚¬ìš©í•˜ì—¬ ì—…ì¢…ë³„ í…Œì´ë¸”ëª…ì„ ë™ì ìœ¼ë¡œ ì¡°íšŒí•©ë‹ˆë‹¤:
  - `getTenantTableName(supabase, tenantId, 'student')`: ì—…ì¢…ë³„ í•™ìƒ í…Œì´ë¸”ëª… ì¡°íšŒ (ì˜ˆ: `academy_students`, `salon_customers`)
  - `getTenantTableName(supabase, tenantId, 'class')`: ì—…ì¢…ë³„ í´ë˜ìŠ¤ í…Œì´ë¸”ëª… ì¡°íšŒ (ì˜ˆ: `academy_classes`, `salon_services`)
  - `getFKRelationName(fkKey, industryType)`: ì—…ì¢…ë³„ FK ê´€ê³„ëª… ì¡°íšŒ
- í•˜ë“œì½”ë”©ëœ í…Œì´ë¸”ëª… ì‚¬ìš© ê¸ˆì§€: `'academy_students'`, `'academy_classes'` ë“± ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ëª¨ë“  L0 í•¸ë“¤ëŸ¬ì™€ L2 í•¸ë“¤ëŸ¬ì—ì„œ Industry Adapter ì‚¬ìš© í•„ìˆ˜ (ì²´í¬ë¦¬ìŠ¤íŠ¸.md 8. Industry Adapter ì‚¬ìš© ì°¸ì¡°)

**í…Œë„ŒíŠ¸ ì¶”ê°€ ì‹œ ê³µí†µ í™œìš©:**
- ìƒˆë¡œìš´ í…Œë„ŒíŠ¸ ì¶”ê°€ ì‹œ ChatOpsëŠ” **ì½”ë“œ ìˆ˜ì • ì—†ì´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥**í•©ë‹ˆë‹¤.
- ìƒˆë¡œìš´ ì—…ì¢… ì¶”ê°€ ì‹œ:
  1. `infra/supabase/functions/_shared/industry-adapter.ts`ì˜ `TABLE_NAME_REGISTRY`ì— ìƒˆ ì—…ì¢… ë§¤í•‘ ì¶”ê°€
  2. `FK_RELATION_REGISTRY`ì— ìƒˆ ì—…ì¢…ì˜ FK ê´€ê³„ëª… ë§¤í•‘ ì¶”ê°€
  3. DBì— í•´ë‹¹ ì—…ì¢…ì˜ í…Œì´ë¸” ìƒì„± (ë§ˆì´ê·¸ë ˆì´ì…˜)
- ChatOps ì½”ë“œ ìì²´ëŠ” ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

**ê´€ë ¨ ê·œì¹™:**
- Automation & AI Industry-Neutral Rule (AI_ìë™í™”_ê¸°ëŠ¥_ì •ë¦¬.md 106-126ì¤„) ì¤€ìˆ˜
- Edge Functions Industry Adapter êµ¬í˜„ (AI_ìë™í™”_ê¸°ëŠ¥_ì •ë¦¬.md 145-195ì¤„) ì°¸ì¡°
- ì²´í¬ë¦¬ìŠ¤íŠ¸.md 8. Industry Adapter ì‚¬ìš© ê·œì¹™ ì¤€ìˆ˜


## 9-A. ì¶œê²°(Attendance) ë„ë©”ì¸ (23ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 11ê°œ

#### attendance.query.late (L0)

**ì„¤ëª…**: ì§€ê°í•œ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- class_id?: uuid
- date?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, late_time, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.by_student (L0)

**ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ ì¶œê²° ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: records, date, status, time, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.absent (L0)

**ì„¤ëª…**: ê²°ì„í•œ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- date?: string - YYYY-MM-DD í˜•ì‹
- include_excused?: boolean

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.early_leave (L0)

**ì„¤ëª…**: ì¡°í‡´í•œ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- date?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, leave_time, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.unchecked (L0)

**ì„¤ëª…**: ì¶œê²° ë¯¸ì²´í¬ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- date?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.by_class (L0)

**ì„¤ëª…**: ë°˜ë³„ ì¶œê²° ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- date?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: records, student_id, student_name, status, time, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.streak_absent (L0)

**ì„¤ëª…**: ì—°ì† ê²°ì„ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- streak_days: integer (positive)

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, streak_days, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.rate_summary (L0)

**ì„¤ëª…**: ì¶œê²°ë¥  ìš”ì•½ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- group_by?: enum[class, grade]

**ì‘ë‹µ í•„ë“œ**: summary, group_key, group_name, attendance_rate, total_students, overall_rate

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.rate_drop (L0)

**ì„¤ëª…**: ì¶œê²°ë¥  í•˜ë½ ëŒ€ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- drop_pp: number - í•˜ë½ í¼ì„¼íŠ¸í¬ì¸íŠ¸

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, previous_rate, current_rate, drop_pp, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.late_rank (L0)

**ì„¤ëª…**: ì§€ê° ë­í‚¹ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- top_n: integer (positive)

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, late_count, rank

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### attendance.query.export_csv (L0)

**ì„¤ëª…**: ì¶œê²° ë°ì´í„° CSV ë‚´ë³´ë‚´ê¸°

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: download_url, expires_at

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 4ê°œ

#### attendance.create.notify_guardians_late (L1)

**ì„¤ëª…**: ì§€ê° ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- student_ids: array<uuid>
- message_template?: string

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### attendance.task.flag_absence_followup (L1)

**ì„¤ëª…**: ê²°ì„ í›„ì† ì¡°ì¹˜ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹
- audience?: enum[class, teacher, all]

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### attendance.task.flag_late_followup (L1)

**ì„¤ëª…**: ì§€ê° í›„ì† ì¡°ì¹˜ (Inline Execution)

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### attendance.task.create_contact_list (L1)

**ì„¤ëª…**: ì—°ë½ì²˜ ëª©ë¡ ìƒì„± (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹
- status: enum[absent, late]

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 8ê°œ

#### attendance.exec.notify_guardians_late (L2-A)

**ì„¤ëª…**: ì§€ê° ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_ids: array<uuid>
- channel?: enum[sms, kakao]

**Event Type**: absence_first_day

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

**ê²½ê³  ì‚¬í•­**:
- ì‹¬ì•¼ ë°œì†¡ ì£¼ì˜
- ëŒ€ëŸ‰ ë°œì†¡ ì‹œ ë¹„ìš© í™•ì¸

---

#### attendance.exec.notify_guardians_absent (L2-A)

**ì„¤ëª…**: ê²°ì„ ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD
- student_ids?: array<uuid>
- channel?: enum[sms, kakao]
- template_id?: uuid

**Event Type**: absence_first_day

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

**ê²½ê³  ì‚¬í•­**:
- ì‹¬ì•¼ ë°œì†¡ ì£¼ì˜
- ëŒ€ëŸ‰ ë°œì†¡ ì‹œ ë¹„ìš© í™•ì¸

---

#### attendance.exec.request_reason_message (L2-A)

**ì„¤ëª…**: ê²°ì„ ì‚¬ìœ  ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD
- student_ids?: array<uuid>
- channel?: enum[sms, kakao]
- template_id?: uuid

**Event Type**: absence_first_day

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

**ê²½ê³  ì‚¬í•­**:
- ì‹¬ì•¼ ë°œì†¡ ì£¼ì˜

---

#### attendance.exec.send_staff_summary (L2-A)

**ì„¤ëª…**: ì§ì›ìš© ì¶œê²° ìš”ì•½ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD
- recipients: array<uuid>
- channel: enum[sms, kakao, email]

**Event Type**: announcement_digest

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### attendance.exec.correct_record (L2-B)

**ì„¤ëª…**: ì¶œê²° ê¸°ë¡ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- date: string - YYYY-MM-DD í˜•ì‹
- from_status: enum[present, absent, late, early_leave, excused]
- to_status: enum[present, absent, late, early_leave, excused]
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### attendance.exec.mark_excused (L2-B)

**ì„¤ëª…**: ì¶œê²° ê¸°ë¡ ì‚¬ìœ  ì²˜ë¦¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- date: string - YYYY-MM-DD í˜•ì‹
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### attendance.exec.bulk_update (L2-B)

**ì„¤ëª…**: ì¶œê²° ê¸°ë¡ ì¼ê´„ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹
- updates: array
- student_id: uuid
- to_status: enum[present, absent, late, early_leave, excused]

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### attendance.exec.schedule_recheck (L2-B)

**ì„¤ëª…**: ì¶œê²° ì¬í™•ì¸ ì˜ˆì•½ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹
- run_at: string - ISO 8601 í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-B. ìˆ˜ë‚©/ì²­êµ¬(Billing) ë„ë©”ì¸ (26ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 10ê°œ

#### billing.query.overdue_month (L0)

**ì„¤ëª…**: ì›”ë³„ ì—°ì²´ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, overdue_amount, overdue_days, total_count, total_amount

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.overdue_list (L0)

**ì„¤ëª…**: ì—°ì²´ ëª©ë¡ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- min_days?: integer (positive)

**ì‘ë‹µ í•„ë“œ**: students, id, name, overdue_amount, overdue_days, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.by_student (L0)

**ì„¤ëª…**: íŠ¹ì • í•™ìƒì˜ ì²­êµ¬ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: invoices, id, month, amount, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.invoice_status (L0)

**ì„¤ëª…**: ì²­êµ¬ì„œ ìƒíƒœ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- status: enum[issued, unissued, paid, partial]

**ì‘ë‹µ í•„ë“œ**: invoices, id, student_id, student_name, amount, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.failed_payments (L0)

**ì„¤ëª…**: ê²°ì œ ì‹¤íŒ¨ ëª©ë¡ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: payments, id, student_id, student_name, amount, failed_at, reason, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.refund_candidates (L0)

**ì„¤ëª…**: í™˜ë¶ˆ í›„ë³´ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: candidates, student_id, student_name, refund_amount, reason, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.kpi_summary (L0)

**ì„¤ëª…**: ìˆ˜ë‚© KPI ìš”ì•½ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- group_by?: enum[class, grade]

**ì‘ë‹µ í•„ë“œ**: summary, group_key, group_name, total_revenue, collection_rate, overall_revenue, overall_collection_rate

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.unissued_invoices (L0)

**ì„¤ëª…**: ë¯¸ë°œí–‰ ì²­êµ¬ì„œ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, expected_amount, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.partial_payments (L0)

**ì„¤ëª…**: ë¶€ë¶„ ê²°ì œ ëª©ë¡ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: payments, id, student_id, student_name, paid_amount, remaining_amount, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### billing.query.export_statement (L0)

**ì„¤ëª…**: ëª…ì„¸ì„œ ë‚´ë³´ë‚´ê¸°

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- format?: enum[csv, pdf, excel]

**ì‘ë‹µ í•„ë“œ**: download_url, expires_at

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 5ê°œ

#### billing.task.flag_overdue_followup (L1)

**ì„¤ëª…**: ì—°ì²´ í›„ì† ì¡°ì¹˜ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- threshold_days?: integer (positive)

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### billing.task.prepare_invoice_batch (L1)

**ì„¤ëª…**: ì²­êµ¬ì„œ ì¼ê´„ ì¤€ë¹„ (Inline Execution)

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### billing.task.prepare_refund_review (L1)

**ì„¤ëª…**: í™˜ë¶ˆ ê²€í†  (Inline Execution)

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### billing.task.prepare_payment_link_batch (L1)

**ì„¤ëª…**: ê²°ì œ ë§í¬ ì¼ê´„ ì¤€ë¹„ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- audience?: enum[all, class, grade]
- channel: enum[sms, kakao]

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### billing.task.flag_churn_risk_from_billing (L1)

**ì„¤ëª…**: ìˆ˜ë‚© ê¸°ë°˜ ì´íƒˆ ìœ„í—˜ í”Œë˜ê¹… (Inline Execution)

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 11ê°œ

#### billing.exec.send_payment_link (L2-A)

**ì„¤ëª…**: ê²°ì œ ë§í¬ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- month: string - YYYY-MM í˜•ì‹
- channel?: enum[sms, kakao]

**Event Type**: payment_due_reminder

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### billing.exec.schedule_overdue_notice (L2-A)

**ì„¤ëª…**: ì—°ì²´ ì•ˆë‚´ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- send_at: string - ISO 8601 í˜•ì‹
- channel?: enum[sms, kakao]
- template_id?: uuid

**Event Type**: overdue_outstanding_over_limit

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### billing.exec.issue_invoices (L2-B)

**ì„¤ëª…**: ì²­êµ¬ì„œ ë°œí–‰ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- student_ids?: array<uuid>
- pricing_rule_id?: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.reissue_invoice (L2-B)

**ì„¤ëª…**: ì²­êµ¬ì„œ ì¬ë°œí–‰ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- invoice_ids: array<uuid>

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.record_manual_payment (L2-B)

**ì„¤ëª…**: ìˆ˜ë™ ê²°ì œ ê¸°ë¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- amount: number
- paid_at: string - ISO 8601 í˜•ì‹
- method: enum[cash, transfer, card, other]

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.apply_discount (L2-B)

**ì„¤ëª…**: í• ì¸ ì ìš© ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- month: string - YYYY-MM í˜•ì‹
- amount: number
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.apply_refund (L2-B)

**ì„¤ëª…**: í™˜ë¶ˆ ì ìš© ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- amount: number
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.create_installment_plan (L2-B)

**ì„¤ëª…**: í• ë¶€ ê³„íš ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- total_amount: number
- installments: integer (positive)

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.fix_duplicate_invoices (L2-B)

**ì„¤ëª…**: ì¤‘ë³µ ì²­êµ¬ì„œ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.sync_gateway (L2-B)

**ì„¤ëª…**: ê²°ì œ ê²Œì´íŠ¸ì›¨ì´ ë™ê¸°í™” ì‹¤í–‰

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### billing.exec.close_month (L2-B)

**ì„¤ëª…**: ì›” ë§ˆê° ì²˜ë¦¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-M. ë©”ì‹œì§€/ê³µì§€(Messaging) ë„ë©”ì¸ (22ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 9ê°œ

#### message.query.sent_log (L0)

**ì„¤ëª…**: ë°œì†¡ ë¡œê·¸ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- channel?: enum[sms, kakao, email]

**ì‘ë‹µ í•„ë“œ**: messages, id, student_id, student_name, channel, sent_at, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.query.failed_log (L0)

**ì„¤ëª…**: ë°œì†¡ ì‹¤íŒ¨ ë¡œê·¸ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: messages, id, student_id, student_name, channel, failed_at, error, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.draft.absence_notice (L0)

**ì„¤ëª…**: ê²°ì„ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- date: string - YYYY-MM-DD í˜•ì‹
- tone?: enum[formal, friendly, casual]

**ì‘ë‹µ í•„ë“œ**: draft, title, body, variables

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.draft.overdue_notice (L0)

**ì„¤ëª…**: ì—°ì²´ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- month: string - YYYY-MM í˜•ì‹
- tone?: enum[formal, friendly, casual]

**ì‘ë‹µ í•„ë“œ**: draft, title, body, variables

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.draft.general_notice (L0)

**ì„¤ëª…**: ì¼ë°˜ ê³µì§€ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- title: string
- body_hint: string
- audience: enum[all, class, grade]

**ì‘ë‹µ í•„ë“œ**: draft, title, body, variables

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.preview.audience (L0)

**ì„¤ëª…**: ìˆ˜ì‹  ëŒ€ìƒ ë¯¸ë¦¬ë³´ê¸°

**íŒŒë¼ë¯¸í„°**:
- audience: enum[all, class, grade]
- id?: uuid

**ì‘ë‹µ í•„ë“œ**: recipients, student_id, student_name, guardian_name, contact, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.preview.template_render (L0)

**ì„¤ëª…**: í…œí”Œë¦¿ ë Œë”ë§ ë¯¸ë¦¬ë³´ê¸°

**íŒŒë¼ë¯¸í„°**:
- template_id: uuid
- sample_student_ids: array<uuid>

**ì‘ë‹µ í•„ë“œ**: samples, student_id, student_name, rendered_text

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.draft.payment_link_notice (L0)

**ì„¤ëª…**: ê²°ì œ ë§í¬ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- month: string - YYYY-MM í˜•ì‹
- tone?: enum[formal, friendly, casual]

**ì‘ë‹µ í•„ë“œ**: draft, title, body, variables

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### message.query.variables_check (L0)

**ì„¤ëª…**: í…œí”Œë¦¿ ë³€ìˆ˜ ê²€ì¦

**íŒŒë¼ë¯¸í„°**:
- template_id: uuid

**ì‘ë‹µ í•„ë“œ**: valid, errors, variables

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 2ê°œ

#### message.task.prepare_bulk_send (L1)

**ì„¤ëª…**: ì¼ê´„ ë°œì†¡ ì¤€ë¹„ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- audience: enum[all, class, grade]
- channel: enum[sms, kakao, email]
- template_id?: uuid

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### message.task.test_send_request (L1)

**ì„¤ëª…**: í…ŒìŠ¤íŠ¸ ë°œì†¡ ìš”ì²­ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- channel: enum[sms, kakao, email]
- to: string
- text: string

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 11ê°œ

#### message.exec.send_to_guardian (L2-A)

**ì„¤ëª…**: ë³´í˜¸ì ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- channel: enum[sms, kakao, email]
- template_id?: uuid
- text?: string
- message_purpose?: enum[absence, overdue, general]

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.send_bulk (L2-A)

**ì„¤ëª…**: ì¼ê´„ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- audience: enum[all, class, grade]
- channel: enum[sms, kakao, email]
- template_id?: uuid
- text?: string
- message_purpose: enum[announcement_urgent, announcement_digest, class_change_or_cancel]

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.schedule_bulk (L2-A)

**ì„¤ëª…**: ì¼ê´„ ë©”ì‹œì§€ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- send_at: string - ISO 8601 í˜•ì‹
- audience: enum[all, class, grade]
- channel: enum[sms, kakao, email]
- template_id?: uuid
- message_purpose: enum[announcement_urgent, announcement_digest, class_change_or_cancel]

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.resend_failed (L2-A)

**ì„¤ëª…**: ì‹¤íŒ¨ ë©”ì‹œì§€ ì¬ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- original_event_type: string

**Event Type**: announcement_urgent

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.optout_respect_audit (L2-A)

**ì„¤ëª…**: ìˆ˜ì‹ ê±°ë¶€ ê°ì‚¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**Event Type**: announcement_digest

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.staff_broadcast (L2-A)

**ì„¤ëª…**: ì§ì› ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- recipients: array<uuid>
- channel: enum[sms, kakao, email]
- text: string

**Event Type**: announcement_urgent

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.class_schedule_change_notice (L2-A)

**ì„¤ëª…**: ìˆ˜ì—… ì¼ì • ë³€ê²½ ì•ˆë‚´ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- session_id?: uuid
- channel: enum[sms, kakao, email]

**Event Type**: class_change_or_cancel

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.emergency_notice (L2-A)

**ì„¤ëª…**: ê¸´ê¸‰ ê³µì§€ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- audience: enum[all, class, grade]
- channel: enum[sms, kakao, email]
- text: string

**Event Type**: announcement_urgent

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### message.exec.cancel_scheduled (L2-B)

**ì„¤ëª…**: ì˜ˆì•½ ë°œì†¡ ì·¨ì†Œ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- schedule_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### message.exec.create_template (L2-B)

**ì„¤ëª…**: ë©”ì‹œì§€ í…œí”Œë¦¿ ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- channel: enum[sms, kakao, email]
- title: string
- body: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### message.exec.update_template (L2-B)

**ì„¤ëª…**: ë©”ì‹œì§€ í…œí”Œë¦¿ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- template_id: uuid
- patch: object
- title?: string
- body?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-S. í•™ìƒ ë¼ì´í”„ì‚¬ì´í´(Student) ë„ë©”ì¸ (24ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 7ê°œ

#### student.query.search (L0)

**ì„¤ëª…**: í•™ìƒ ê²€ìƒ‰

**íŒŒë¼ë¯¸í„°**:
- q: string - ê²€ìƒ‰ì–´ (ì´ë¦„, í•™ë²ˆ ë“±)
- limit?: integer (positive) - ìµœëŒ€ ê²°ê³¼ ìˆ˜

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, grade, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.profile (L0)

**ì„¤ëª…**: í•™ìƒ í”„ë¡œí•„ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid

**ì‘ë‹µ í•„ë“œ**: student, id, name, grade, class_name, status, guardian_name, guardian_contact

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.status_list (L0)

**ì„¤ëª…**: ìƒíƒœë³„ í•™ìƒ ëª©ë¡ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- status: enum[active, paused, discharged]
- class_id?: uuid

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.missing_guardian_contact (L0)

**ì„¤ëª…**: ë³´í˜¸ì ì—°ë½ì²˜ ëˆ„ë½ í•™ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- scope?: string

**ì‘ë‹µ í•„ë“œ**: students, id, name, class_name, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.duplicates_suspected (L0)

**ì„¤ëª…**: ì¤‘ë³µ ì˜ì‹¬ í•™ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from?: string - YYYY-MM-DD í˜•ì‹
- to?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: duplicates, primary_id, primary_name, duplicate_id, duplicate_name, similarity_score, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.onboarding_needed (L0)

**ì„¤ëª…**: ì˜¨ë³´ë”© í•„ìš” í•™ìƒ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, registered_at, missing_items, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### student.query.data_quality_scan (L0)

**ì„¤ëª…**: í•™ìƒ ë°ì´í„° í’ˆì§ˆ ê²€ì¦

**íŒŒë¼ë¯¸í„°**:
- fields: array<string>
- scope?: string

**ì‘ë‹µ í•„ë“œ**: issues, student_id, student_name, field, issue_type, severity, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 2ê°œ

#### student.task.register_prefill (L1)

**ì„¤ëª…**: í•™ìƒ ë“±ë¡ ì‚¬ì „ ì…ë ¥ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- name: string
- grade?: string
- phone?: string
- guardian_phone?: string
- class_id?: uuid

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### student.task.collect_documents (L1)

**ì„¤ëª…**: ë¬¸ì„œ ìˆ˜ì§‘ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- doc_type: string

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 15ê°œ

#### student.exec.send_welcome_message (L2-A)

**ì„¤ëª…**: ì‹ ê·œ ë“±ë¡ í™˜ì˜ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- channel: enum[sms, kakao, email]
- template_id?: uuid

**Event Type**: new_member_drop

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### student.exec.request_documents_message (L2-A)

**ì„¤ëª…**: ë¬¸ì„œ ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- channel: enum[sms, kakao, email]
- template_id?: uuid

**Event Type**: new_member_drop

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### student.exec.register (L2-B)

**ì„¤ëª…**: í•™ìƒ ë“±ë¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- form_values: record

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.update_profile (L2-B)

**ì„¤ëª…**: í•™ìƒ í”„ë¡œí•„ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- patch: record

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.change_class (L2-B)

**ì„¤ëª…**: ë°˜ ë³€ê²½ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- to_class_id: uuid
- effective_date?: string - YYYY-MM-DD í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.pause (L2-B)

**ì„¤ëª…**: í•™ìƒ íœ´ì› ì²˜ë¦¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to?: string - YYYY-MM-DD í˜•ì‹
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.resume (L2-B)

**ì„¤ëª…**: í•™ìƒ ì¬ê°œ ì²˜ë¦¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.discharge (L2-B)

**ì„¤ëª…**: í•™ìƒ í‡´ì› ì²˜ë¦¬ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- date: string - YYYY-MM-DD í˜•ì‹
- reason?: string
- settlement_mode?: enum[full, partial, none]

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.merge_duplicates (L2-B)

**ì„¤ëª…**: ì¤‘ë³µ í•™ìƒ ë³‘í•© ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- primary_student_id: uuid
- duplicate_student_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.update_guardian_contact (L2-B)

**ì„¤ëª…**: ë³´í˜¸ì ì—°ë½ì²˜ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- guardian_name?: string
- guardian_phone?: string
- guardian_email?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.assign_tags (L2-B)

**ì„¤ëª…**: í•™ìƒ íƒœê·¸ í• ë‹¹ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- tags: array<string>

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.bulk_register (L2-B)

**ì„¤ëª…**: í•™ìƒ ì¼ê´„ ë“±ë¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- rows: array<record>

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.bulk_update (L2-B)

**ì„¤ëª…**: í•™ìƒ ì¼ê´„ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- updates: array
- student_id: uuid
- patch: record

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.data_quality_apply_fix (L2-B)

**ì„¤ëª…**: ë°ì´í„° í’ˆì§ˆ ìë™ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- job_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### student.exec.reactivate_from_discharged (L2-B)

**ì„¤ëª…**: í‡´ì› í•™ìƒ ì¬í™œì„±í™” ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- date: string - YYYY-MM-DD í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-C. ë°˜/ìˆ˜ì—…/ì‹œê°„í‘œ(Class/Schedule) ë„ë©”ì¸ (16ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 6ê°œ

#### class.query.list (L0)

**ì„¤ëª…**: ë°˜ ëª©ë¡ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- active_only?: boolean

**ì‘ë‹µ í•„ë“œ**: classes, id, name, teacher_name, student_count, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### class.query.roster (L0)

**ì„¤ëª…**: ë°˜ ëª…ë‹¨ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- date?: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: students, id, name, status, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### schedule.query.today (L0)

**ì„¤ëª…**: ì˜¤ëŠ˜ ì‹œê°„í‘œ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: sessions, id, class_id, class_name, starts_at, ends_at, room, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### schedule.query.by_teacher (L0)

**ì„¤ëª…**: ê°•ì‚¬ë³„ ì‹œê°„í‘œ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- teacher_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: sessions, id, class_id, class_name, starts_at, ends_at, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### schedule.query.by_class (L0)

**ì„¤ëª…**: ë°˜ë³„ ì‹œê°„í‘œ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: sessions, id, starts_at, ends_at, room, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### schedule.query.export_timetable (L0)

**ì„¤ëª…**: ì‹œê°„í‘œ ë‚´ë³´ë‚´ê¸°

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: download_url, expires_at

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 1ê°œ

#### schedule.task.propose_makeup_session (L1)

**ì„¤ëª…**: ë³´ê°• ìˆ˜ì—… ì œì•ˆ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- reason: string
- candidate_slots: array<string> - ISO 8601 í˜•ì‹ ë°°ì—´

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 9ê°œ

#### class.exec.create (L2-B)

**ì„¤ëª…**: ë°˜ ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- name: string
- teacher_id?: uuid
- grade?: string
- capacity?: integer (positive)

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### class.exec.update (L2-B)

**ì„¤ëª…**: ë°˜ ì •ë³´ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- patch: record

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### class.exec.close (L2-B)

**ì„¤ëª…**: ë°˜ íì‡„ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### class.exec.bulk_reassign_teacher (L2-B)

**ì„¤ëª…**: ê°•ì‚¬ ì¼ê´„ ì¬ë°°ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_ids: array<uuid>
- teacher_id: uuid

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### schedule.exec.notify_change (L2-A)

**ì„¤ëª…**: ì‹œê°„í‘œ ë³€ê²½ ì•ˆë‚´ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- session_id?: uuid
- channel: enum[sms, kakao, email]

**Event Type**: class_change_or_cancel

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### schedule.exec.add_session (L2-B)

**ì„¤ëª…**: ìˆ˜ì—… ì„¸ì…˜ ì¶”ê°€ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- starts_at: string - ISO 8601 í˜•ì‹
- ends_at: string - ISO 8601 í˜•ì‹
- room?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### schedule.exec.move_session (L2-B)

**ì„¤ëª…**: ìˆ˜ì—… ì„¸ì…˜ ì´ë™ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- session_id: uuid
- new_starts_at: string - ISO 8601 í˜•ì‹
- new_ends_at: string - ISO 8601 í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### schedule.exec.cancel_session (L2-B)

**ì„¤ëª…**: ìˆ˜ì—… ì„¸ì…˜ ì·¨ì†Œ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- session_id: uuid
- reason?: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### schedule.exec.bulk_shift (L2-B)

**ì„¤ëª…**: ì‹œê°„í‘œ ì¼ê´„ ì´ë™ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- shift_minutes: integer

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-N. ìƒë‹´/í•™ìŠµ/ë©”ëª¨ + AI(Notes/AI) ë„ë©”ì¸ (14ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 7ê°œ

#### note.query.by_student (L0)

**ì„¤ëª…**: í•™ìƒë³„ ìƒë‹´ì¼ì§€ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: notes, id, type, content, created_at, total_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### note.draft.consult_summary (L0)

**ì„¤ëª…**: ìƒë‹´ ìš”ì•½ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- note_id: uuid
- format: enum[bullets, short, detailed]

**ì‘ë‹µ í•„ë“œ**: summary

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### ai.summarize.student_history (L0)

**ì„¤ëª…**: í•™ìƒ ì´ë ¥ ìš”ì•½

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: summary, attendance_summary, billing_summary, notes_summary

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### ai.generate.followup_message (L0)

**ì„¤ëª…**: í›„ì† ë©”ì‹œì§€ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- reason: string
- tone?: enum[formal, friendly, casual]

**ì‘ë‹µ í•„ë“œ**: message

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### ai.summarize.class_history (L0)

**ì„¤ëª…**: ë°˜ ì´ë ¥ ìš”ì•½

**íŒŒë¼ë¯¸í„°**:
- class_id: uuid
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: summary, attendance_summary, performance_summary

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### ai.generate.counseling_agenda (L0)

**ì„¤ëª…**: ìƒë‹´ ì•ˆê±´ ì´ˆì•ˆ ìƒì„±

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid

**ì‘ë‹µ í•„ë“œ**: agenda

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### ai.query.export_ai_briefing (L0)

**ì„¤ëª…**: AI ë¸Œë¦¬í•‘ ë‚´ë³´ë‚´ê¸°

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: download_url, expires_at

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 3ê°œ

#### ai.task.flag_risk_signals (L1)

**ì„¤ëª…**: ìœ„í—˜ ì‹ í˜¸ í”Œë˜ê¹… (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- signals: enum[attendance, billing, behavior]

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### ai.task.create_recommendations (L1)

**ì„¤ëª…**: ì¼ì¼ ì¶”ì²œ ìƒì„± (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

#### ai.task.bulk_generate_taskcards (L1)

**ì„¤ëª…**: TaskCard ì¼ê´„ ìƒì„± (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- job_id: uuid

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 4ê°œ

#### note.exec.create (L2-B)

**ì„¤ëª…**: ìƒë‹´ì¼ì§€ ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- type: string
- content: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### note.exec.update (L2-B)

**ì„¤ëª…**: ìƒë‹´ì¼ì§€ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- note_id: uuid
- patch: record

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### ai.exec.request_staff_review (L2-A)

**ì„¤ëª…**: ì§ì› ê²€í†  ìš”ì²­ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- topic: string

**Event Type**: consultation_summary_ready

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### ai.exec.escalate_emergency (L2-A)

**ì„¤ëª…**: ê¸´ê¸‰ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- student_id: uuid
- reason: string

**Event Type**: announcement_urgent

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---


## 9-R. ë¦¬í¬íŠ¸/ëŒ€ì‹œë³´ë“œ(Reports) ë„ë©”ì¸ (10ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 5ê°œ

#### report.query.dashboard_kpi (L0)

**ì„¤ëª…**: ëŒ€ì‹œë³´ë“œ KPI ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: kpi, total_students, attendance_rate, collection_rate, revenue

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### report.query.attendance_summary (L0)

**ì„¤ëª…**: ì¶œê²° ìš”ì•½ ë¦¬í¬íŠ¸ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- group_by?: enum[class, grade]

**ì‘ë‹µ í•„ë“œ**: summary, total_days, attendance_rate, absent_count, late_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### report.query.billing_summary (L0)

**ì„¤ëª…**: ìˆ˜ë‚© ìš”ì•½ ë¦¬í¬íŠ¸ ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- group_by?: enum[class, grade]

**ì‘ë‹µ í•„ë“œ**: summary, total_revenue, collection_rate, overdue_amount, paid_count

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### report.query.export_dataset (L0)

**ì„¤ëª…**: ë°ì´í„°ì…‹ ë‚´ë³´ë‚´ê¸°

**íŒŒë¼ë¯¸í„°**:
- dataset: string
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹
- format: enum[csv, excel, json]

**ì‘ë‹µ í•„ë“œ**: download_url, expires_at

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### report.query.health_snapshot (L0)

**ì„¤ëª…**: í—¬ìŠ¤ ìŠ¤ëƒ…ìƒ· ì¡°íšŒ

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹

**ì‘ë‹µ í•„ë“œ**: snapshot, system_health, data_quality, performance_metrics

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ì—…ë¬´í™”(L1) - 1ê°œ

#### report.task.prepare_monthly_report (L1)

**ì„¤ëª…**: ì›”ê°„ ë¦¬í¬íŠ¸ ì¤€ë¹„ (Inline Execution)

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- sections: array<string>

**ê¸°ëŠ¥**: ì´ IntentëŠ” Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤. í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•œ í›„ í™•ì¸í•˜ë©´ ì‹¤í–‰ë©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 4ê°œ

#### report.exec.send_report (L2-A)

**ì„¤ëª…**: ë¦¬í¬íŠ¸ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- report_id: uuid
- recipients: array<uuid>
- channel: enum[sms, kakao, email]

**Event Type**: monthly_business_report

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### report.exec.schedule_monthly_report (L2-A)

**ì„¤ëª…**: ì›”ê°„ ë¦¬í¬íŠ¸ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- day_of_month: integer
- recipients: array<uuid>
- channel: enum[sms, kakao, email]

**Event Type**: monthly_business_report

âš ï¸ **P0-D2**: ì´ event_typeì€ AUTOMATION_EVENT_CATALOGì— ì¡´ì¬í•´ì•¼ í•©ë‹ˆë‹¤. ë¯¸ë“±ë¡ ì‹œ Fail-Closedë¡œ ì‹¤í–‰ì´ ì°¨ë‹¨ë©ë‹ˆë‹¤. í•¸ë“¤ëŸ¬ì—ì„œ `assertAutomationEventType()`ì„ í†µí•´ ëŸ°íƒ€ì„ ê²€ì¦ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

**ê¸°ëŠ¥**: ì´ IntentëŠ” ì•Œë¦¼/ë°œì†¡ ê³„ì—´ ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Policy ê²½ë¡œëŠ” `getAutomationEventPolicyPath()` í—¬í¼ í•¨ìˆ˜ë¥¼ í†µí•´ SSOT ê¸°ë°˜ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ (`auto_notification.<event_type>.*` í˜•ì‹).

---

#### report.exec.generate_monthly_report (L2-B)

**ì„¤ëª…**: ì›”ê°„ ë¦¬í¬íŠ¸ ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- month: string - YYYY-MM í˜•ì‹
- sections: array<string>

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### report.exec.generate_daily_brief (L2-B)

**ì„¤ëª…**: ì¼ì¼ ë¸Œë¦¬í•‘ ìƒì„± ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- date: string - YYYY-MM-DD í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---


## 9-P. ì •ì±…/ê¶Œí•œ/ì‹œìŠ¤í…œ(System) ë„ë©”ì¸ (10ê°œ)

### ì¡°íšŒ/ì´ˆì•ˆ(L0) - 3ê°œ

#### policy.query.automation_rules (L0)

**ì„¤ëª…**: ìë™í™” ê·œì¹™ ì¡°íšŒ

**ì‘ë‹µ í•„ë“œ**: rules, event_type, enabled, threshold

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### rbac.query.my_permissions (L0)

**ì„¤ëª…**: ë‚´ ê¶Œí•œ ì¡°íšŒ

**ì‘ë‹µ í•„ë“œ**: permissions, role

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

#### system.query.health (L0)

**ì„¤ëª…**: ì‹œìŠ¤í…œ í—¬ìŠ¤ ì²´í¬

**íŒŒë¼ë¯¸í„°**:
- checks?: array<string>

**ì‘ë‹µ í•„ë“œ**: health, status, checks

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë°ì´í„° ì¡°íšŒë§Œ ìˆ˜í–‰í•˜ë©°, ìƒíƒœ ë³€ê²½ì´ ì—†ìŠµë‹ˆë‹¤. ì¦‰ì‹œ ê²°ê³¼ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.

---

### ìŠ¹ì¸ ì‹¤í–‰(L2) - 7ê°œ

#### policy.exec.enable_automation (L2-B)

**ì„¤ëª…**: ìë™í™” í™œì„±í™” ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- event_type: string
- enabled: boolean

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### policy.exec.update_threshold (L2-B)

**ì„¤ëª…**: ì •ì±… ì„ê³„ê°’ ìˆ˜ì • ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- event_type: string
- key: string
- value: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### rbac.exec.assign_role (L2-B)

**ì„¤ëª…**: ì—­í•  í• ë‹¹ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- user_id: uuid
- role: string

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### system.exec.run_healthcheck (L2-B)

**ì„¤ëª…**: í—¬ìŠ¤ì²´í¬ ì‹¤í–‰

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### system.exec.rebuild_search_index (L2-B)

**ì„¤ëª…**: ê²€ìƒ‰ ì¸ë±ìŠ¤ ì¬êµ¬ì¶• ì‹¤í–‰

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### system.exec.backfill_reports (L2-B)

**ì„¤ëª…**: ë¦¬í¬íŠ¸ ë°±í•„ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---

#### system.exec.retry_failed_actions (L2-B)

**ì„¤ëª…**: ì‹¤íŒ¨ ì•¡ì…˜ ì¬ì‹œë„ ì‹¤í–‰

**íŒŒë¼ë¯¸í„°**:
- from: string - YYYY-MM-DD í˜•ì‹
- to: string - YYYY-MM-DD í˜•ì‹

âš ï¸ **L2-B ë¶„ë¥˜**: ë„ë©”ì¸ ë³€ê²½ ê³„ì—´

âš ï¸ **P0**: Domain Action Catalogê°€ SSOTë¡œ í™•ì •ë˜ê¸° ì „ê¹Œì§€ëŠ” í•­ìƒ L1ë¡œ ê°•ë“±(Fail-Closed)ë©ë‹ˆë‹¤.
- Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ìë™ ì‹¤í–‰ í™œì„±í™” ì¡°ê±´: Domain Action Catalogì— action_key ë“±ë¡, RBAC ë£°/ì •ì±… ê²½ë¡œ/ê°ì‚¬ ê·œì¹™ SSOT ì •ì˜, í•¸ë“¤ëŸ¬ê°€ Catalog ì¡´ì¬ë¥¼ ëŸ°íƒ€ì„ì—ì„œ ê²€ì¦

**ê¸°ëŠ¥**: ì´ IntentëŠ” ë„ë©”ì¸ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

---



## 9-Z. Intent ì „ì²´ ëª©ë¡ (147ê°œ)

ì´ ì„¹ì…˜ì€ ëª¨ë“  Intentë¥¼ Levelë³„ë¡œ ë‚˜ì—´í•œ ê°„ë‹¨í•œ ëª©ë¡ì…ë‹ˆë‹¤.

### L0 Intent (ì¡°íšŒ/ì´ˆì•ˆ) - 58ê°œ

- `ai.generate.counseling_agenda`: ìƒë‹´ ì•ˆê±´ ì´ˆì•ˆ ìƒì„±
- `ai.generate.followup_message`: í›„ì† ë©”ì‹œì§€ ìƒì„±
- `ai.query.export_ai_briefing`: AI ë¸Œë¦¬í•‘ ë‚´ë³´ë‚´ê¸°
- `ai.summarize.class_history`: ë°˜ ì´ë ¥ ìš”ì•½
- `ai.summarize.student_history`: í•™ìƒ ì´ë ¥ ìš”ì•½
- `attendance.query.absent`: ê²°ì„í•œ ëŒ€ìƒ ì¡°íšŒ
- `attendance.query.by_class`: ë°˜ë³„ ì¶œê²° ì¡°íšŒ
- `attendance.query.by_student`: íŠ¹ì • í•™ìƒì˜ ì¶œê²° ì¡°íšŒ
- `attendance.query.early_leave`: ì¡°í‡´í•œ ëŒ€ìƒ ì¡°íšŒ
- `attendance.query.export_csv`: ì¶œê²° ë°ì´í„° CSV ë‚´ë³´ë‚´ê¸°
- `attendance.query.late`: ì§€ê°í•œ ëŒ€ìƒ ì¡°íšŒ
- `attendance.query.late_rank`: ì§€ê° ë­í‚¹ ì¡°íšŒ
- `attendance.query.rate_drop`: ì¶œê²°ë¥  í•˜ë½ ëŒ€ìƒ ì¡°íšŒ
- `attendance.query.rate_summary`: ì¶œê²°ë¥  ìš”ì•½ ì¡°íšŒ
- `attendance.query.streak_absent`: ì—°ì† ê²°ì„ ëŒ€ìƒ ì¡°íšŒ
- `attendance.query.unchecked`: ì¶œê²° ë¯¸ì²´í¬ ëŒ€ìƒ ì¡°íšŒ
- `billing.query.by_student`: íŠ¹ì • í•™ìƒì˜ ì²­êµ¬ ì¡°íšŒ
- `billing.query.export_statement`: ëª…ì„¸ì„œ ë‚´ë³´ë‚´ê¸°
- `billing.query.failed_payments`: ê²°ì œ ì‹¤íŒ¨ ëª©ë¡ ì¡°íšŒ
- `billing.query.invoice_status`: ì²­êµ¬ì„œ ìƒíƒœ ì¡°íšŒ
- `billing.query.kpi_summary`: ìˆ˜ë‚© KPI ìš”ì•½ ì¡°íšŒ
- `billing.query.overdue_list`: ì—°ì²´ ëª©ë¡ ì¡°íšŒ
- `billing.query.overdue_month`: ì›”ë³„ ì—°ì²´ ì¡°íšŒ
- `billing.query.partial_payments`: ë¶€ë¶„ ê²°ì œ ëª©ë¡ ì¡°íšŒ
- `billing.query.refund_candidates`: í™˜ë¶ˆ í›„ë³´ ì¡°íšŒ
- `billing.query.unissued_invoices`: ë¯¸ë°œí–‰ ì²­êµ¬ì„œ ì¡°íšŒ
- `class.query.list`: ë°˜ ëª©ë¡ ì¡°íšŒ
- `class.query.roster`: ë°˜ ëª…ë‹¨ ì¡°íšŒ
- `message.draft.absence_notice`: ê²°ì„ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±
- `message.draft.general_notice`: ì¼ë°˜ ê³µì§€ ì´ˆì•ˆ ìƒì„±
- `message.draft.overdue_notice`: ì—°ì²´ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±
- `message.draft.payment_link_notice`: ê²°ì œ ë§í¬ ì•ˆë‚´ ì´ˆì•ˆ ìƒì„±
- `message.preview.audience`: ìˆ˜ì‹  ëŒ€ìƒ ë¯¸ë¦¬ë³´ê¸°
- `message.preview.template_render`: í…œí”Œë¦¿ ë Œë”ë§ ë¯¸ë¦¬ë³´ê¸°
- `message.query.failed_log`: ë°œì†¡ ì‹¤íŒ¨ ë¡œê·¸ ì¡°íšŒ
- `message.query.sent_log`: ë°œì†¡ ë¡œê·¸ ì¡°íšŒ
- `message.query.variables_check`: í…œí”Œë¦¿ ë³€ìˆ˜ ê²€ì¦
- `note.draft.consult_summary`: ìƒë‹´ ìš”ì•½ ì´ˆì•ˆ ìƒì„±
- `note.query.by_student`: í•™ìƒë³„ ìƒë‹´ì¼ì§€ ì¡°íšŒ
- `policy.query.automation_rules`: ìë™í™” ê·œì¹™ ì¡°íšŒ
- `rbac.query.my_permissions`: ë‚´ ê¶Œí•œ ì¡°íšŒ
- `report.query.attendance_summary`: ì¶œê²° ìš”ì•½ ë¦¬í¬íŠ¸ ì¡°íšŒ
- `report.query.billing_summary`: ìˆ˜ë‚© ìš”ì•½ ë¦¬í¬íŠ¸ ì¡°íšŒ
- `report.query.dashboard_kpi`: ëŒ€ì‹œë³´ë“œ KPI ì¡°íšŒ
- `report.query.export_dataset`: ë°ì´í„°ì…‹ ë‚´ë³´ë‚´ê¸°
- `report.query.health_snapshot`: í—¬ìŠ¤ ìŠ¤ëƒ…ìƒ· ì¡°íšŒ
- `schedule.query.by_class`: ë°˜ë³„ ì‹œê°„í‘œ ì¡°íšŒ
- `schedule.query.by_teacher`: ê°•ì‚¬ë³„ ì‹œê°„í‘œ ì¡°íšŒ
- `schedule.query.export_timetable`: ì‹œê°„í‘œ ë‚´ë³´ë‚´ê¸°
- `schedule.query.today`: ì˜¤ëŠ˜ ì‹œê°„í‘œ ì¡°íšŒ
- `student.query.data_quality_scan`: í•™ìƒ ë°ì´í„° í’ˆì§ˆ ê²€ì¦
- `student.query.duplicates_suspected`: ì¤‘ë³µ ì˜ì‹¬ í•™ìƒ ì¡°íšŒ
- `student.query.missing_guardian_contact`: ë³´í˜¸ì ì—°ë½ì²˜ ëˆ„ë½ í•™ìƒ ì¡°íšŒ
- `student.query.onboarding_needed`: ì˜¨ë³´ë”© í•„ìš” í•™ìƒ ì¡°íšŒ
- `student.query.profile`: í•™ìƒ í”„ë¡œí•„ ì¡°íšŒ
- `student.query.search`: í•™ìƒ ê²€ìƒ‰
- `student.query.status_list`: ìƒíƒœë³„ í•™ìƒ ëª©ë¡ ì¡°íšŒ
- `system.query.health`: ì‹œìŠ¤í…œ í—¬ìŠ¤ ì²´í¬

### L1 Intent (Inline Execution) - 18ê°œ

- `ai.task.bulk_generate_taskcards`: TaskCard ì¼ê´„ ìƒì„± (Inline Execution)
- `ai.task.create_recommendations`: ì¼ì¼ ì¶”ì²œ ìƒì„± (Inline Execution)
- `ai.task.flag_risk_signals`: ìœ„í—˜ ì‹ í˜¸ í”Œë˜ê¹… (Inline Execution)
- `attendance.create.notify_guardians_late`: ì§€ê° ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ (Inline Execution)
- `attendance.task.create_contact_list`: ì—°ë½ì²˜ ëª©ë¡ ìƒì„± (Inline Execution)
- `attendance.task.flag_absence_followup`: ê²°ì„ í›„ì† ì¡°ì¹˜ (Inline Execution)
- `attendance.task.flag_late_followup`: ì§€ê° í›„ì† ì¡°ì¹˜ (Inline Execution)
- `billing.task.flag_churn_risk_from_billing`: ìˆ˜ë‚© ê¸°ë°˜ ì´íƒˆ ìœ„í—˜ í”Œë˜ê¹… (Inline Execution)
- `billing.task.flag_overdue_followup`: ì—°ì²´ í›„ì† ì¡°ì¹˜ (Inline Execution)
- `billing.task.prepare_invoice_batch`: ì²­êµ¬ì„œ ì¼ê´„ ì¤€ë¹„ (Inline Execution)
- `billing.task.prepare_payment_link_batch`: ê²°ì œ ë§í¬ ì¼ê´„ ì¤€ë¹„ (Inline Execution)
- `billing.task.prepare_refund_review`: í™˜ë¶ˆ ê²€í†  (Inline Execution)
- `message.task.prepare_bulk_send`: ì¼ê´„ ë°œì†¡ ì¤€ë¹„ (Inline Execution)
- `message.task.test_send_request`: í…ŒìŠ¤íŠ¸ ë°œì†¡ ìš”ì²­ (Inline Execution)
- `report.task.prepare_monthly_report`: ì›”ê°„ ë¦¬í¬íŠ¸ ì¤€ë¹„ (Inline Execution)
- `schedule.task.propose_makeup_session`: ë³´ê°• ìˆ˜ì—… ì œì•ˆ (Inline Execution)
- `student.task.collect_documents`: ë¬¸ì„œ ìˆ˜ì§‘ (Inline Execution)
- `student.task.register_prefill`: í•™ìƒ ë“±ë¡ ì‚¬ì „ ì…ë ¥ (Inline Execution)

### L2-A Intent (ì•Œë¦¼/ë°œì†¡ ì‹¤í–‰) - 23ê°œ

- `ai.exec.escalate_emergency`: ê¸´ê¸‰ ì—ìŠ¤ì»¬ë ˆì´ì…˜ ì‹¤í–‰
- `ai.exec.request_staff_review`: ì§ì› ê²€í†  ìš”ì²­ ì‹¤í–‰
- `attendance.exec.notify_guardians_absent`: ê²°ì„ ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ ì‹¤í–‰
- `attendance.exec.notify_guardians_late`: ì§€ê° ëŒ€ìƒ ë³´í˜¸ì ì•Œë¦¼ ë°œì†¡ ì‹¤í–‰
- `attendance.exec.request_reason_message`: ê²°ì„ ì‚¬ìœ  ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰
- `attendance.exec.send_staff_summary`: ì§ì›ìš© ì¶œê²° ìš”ì•½ ë°œì†¡ ì‹¤í–‰
- `billing.exec.schedule_overdue_notice`: ì—°ì²´ ì•ˆë‚´ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰
- `billing.exec.send_overdue_notice_1st`: 1ì°¨ ì—°ì²´ ì•ˆë‚´ ë°œì†¡ ì‹¤í–‰
- `billing.exec.send_overdue_notice_2nd`: 2ì°¨ ì—°ì²´ ì•ˆë‚´ ë°œì†¡ ì‹¤í–‰
- `billing.exec.send_payment_link`: ê²°ì œ ë§í¬ ë°œì†¡ ì‹¤í–‰
- `message.exec.class_schedule_change_notice`: ìˆ˜ì—… ì¼ì • ë³€ê²½ ì•ˆë‚´ ì‹¤í–‰
- `message.exec.emergency_notice`: ê¸´ê¸‰ ê³µì§€ ì‹¤í–‰
- `message.exec.optout_respect_audit`: ìˆ˜ì‹ ê±°ë¶€ ê°ì‚¬ ì‹¤í–‰
- `message.exec.resend_failed`: ì‹¤íŒ¨ ë©”ì‹œì§€ ì¬ë°œì†¡ ì‹¤í–‰
- `message.exec.schedule_bulk`: ì¼ê´„ ë©”ì‹œì§€ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰
- `message.exec.send_bulk`: ì¼ê´„ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰
- `message.exec.send_to_guardian`: ë³´í˜¸ì ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰
- `message.exec.staff_broadcast`: ì§ì› ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì‹¤í–‰
- `report.exec.schedule_monthly_report`: ì›”ê°„ ë¦¬í¬íŠ¸ ì˜ˆì•½ ë°œì†¡ ì‹¤í–‰
- `report.exec.send_report`: ë¦¬í¬íŠ¸ ë°œì†¡ ì‹¤í–‰
- `schedule.exec.notify_change`: ì‹œê°„í‘œ ë³€ê²½ ì•ˆë‚´ ì‹¤í–‰
- `student.exec.request_documents_message`: ë¬¸ì„œ ìš”ì²­ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰
- `student.exec.send_welcome_message`: ì‹ ê·œ ë“±ë¡ í™˜ì˜ ë©”ì‹œì§€ ë°œì†¡ ì‹¤í–‰

### L2-B Intent (ë„ë©”ì¸ ë³€ê²½ ì‹¤í–‰) - 48ê°œ

- `attendance.exec.bulk_update`: ì¶œê²° ê¸°ë¡ ì¼ê´„ ìˆ˜ì • ì‹¤í–‰
- `attendance.exec.correct_record`: ì¶œê²° ê¸°ë¡ ìˆ˜ì • ì‹¤í–‰
- `attendance.exec.mark_excused`: ì¶œê²° ê¸°ë¡ ì‚¬ìœ  ì²˜ë¦¬ ì‹¤í–‰
- `attendance.exec.schedule_recheck`: ì¶œê²° ì¬í™•ì¸ ì˜ˆì•½ ì‹¤í–‰
- `billing.exec.apply_discount`: í• ì¸ ì ìš© ì‹¤í–‰
- `billing.exec.apply_refund`: í™˜ë¶ˆ ì ìš© ì‹¤í–‰
- `billing.exec.close_month`: ì›” ë§ˆê° ì²˜ë¦¬ ì‹¤í–‰
- `billing.exec.create_installment_plan`: í• ë¶€ ê³„íš ìƒì„± ì‹¤í–‰
- `billing.exec.fix_duplicate_invoices`: ì¤‘ë³µ ì²­êµ¬ì„œ ìˆ˜ì • ì‹¤í–‰
- `billing.exec.issue_invoices`: ì²­êµ¬ì„œ ë°œí–‰ ì‹¤í–‰
- `billing.exec.record_manual_payment`: ìˆ˜ë™ ê²°ì œ ê¸°ë¡ ì‹¤í–‰
- `billing.exec.reissue_invoice`: ì²­êµ¬ì„œ ì¬ë°œí–‰ ì‹¤í–‰
- `billing.exec.sync_gateway`: ê²°ì œ ê²Œì´íŠ¸ì›¨ì´ ë™ê¸°í™” ì‹¤í–‰
- `class.exec.bulk_reassign_teacher`: ê°•ì‚¬ ì¼ê´„ ì¬ë°°ì • ì‹¤í–‰
- `class.exec.close`: ë°˜ íì‡„ ì‹¤í–‰
- `class.exec.create`: ë°˜ ìƒì„± ì‹¤í–‰
- `class.exec.update`: ë°˜ ì •ë³´ ìˆ˜ì • ì‹¤í–‰
- `message.exec.cancel_scheduled`: ì˜ˆì•½ ë°œì†¡ ì·¨ì†Œ ì‹¤í–‰
- `message.exec.create_template`: ë©”ì‹œì§€ í…œí”Œë¦¿ ìƒì„± ì‹¤í–‰
- `message.exec.update_template`: ë©”ì‹œì§€ í…œí”Œë¦¿ ìˆ˜ì • ì‹¤í–‰
- `note.exec.create`: ìƒë‹´ì¼ì§€ ìƒì„± ì‹¤í–‰
- `note.exec.update`: ìƒë‹´ì¼ì§€ ìˆ˜ì • ì‹¤í–‰
- `policy.exec.enable_automation`: ìë™í™” í™œì„±í™” ì‹¤í–‰
- `policy.exec.update_threshold`: ì •ì±… ì„ê³„ê°’ ìˆ˜ì • ì‹¤í–‰
- `rbac.exec.assign_role`: ì—­í•  í• ë‹¹ ì‹¤í–‰
- `report.exec.generate_daily_brief`: ì¼ì¼ ë¸Œë¦¬í•‘ ìƒì„± ì‹¤í–‰
- `report.exec.generate_monthly_report`: ì›”ê°„ ë¦¬í¬íŠ¸ ìƒì„± ì‹¤í–‰
- `schedule.exec.add_session`: ìˆ˜ì—… ì„¸ì…˜ ì¶”ê°€ ì‹¤í–‰
- `schedule.exec.bulk_shift`: ì‹œê°„í‘œ ì¼ê´„ ì´ë™ ì‹¤í–‰
- `schedule.exec.cancel_session`: ìˆ˜ì—… ì„¸ì…˜ ì·¨ì†Œ ì‹¤í–‰
- `schedule.exec.move_session`: ìˆ˜ì—… ì„¸ì…˜ ì´ë™ ì‹¤í–‰
- `student.exec.assign_tags`: í•™ìƒ íƒœê·¸ í• ë‹¹ ì‹¤í–‰
- `student.exec.bulk_register`: í•™ìƒ ì¼ê´„ ë“±ë¡ ì‹¤í–‰
- `student.exec.bulk_update`: í•™ìƒ ì¼ê´„ ìˆ˜ì • ì‹¤í–‰
- `student.exec.change_class`: ë°˜ ë³€ê²½ ì‹¤í–‰
- `student.exec.data_quality_apply_fix`: ë°ì´í„° í’ˆì§ˆ ìë™ ìˆ˜ì • ì‹¤í–‰
- `student.exec.discharge`: í•™ìƒ í‡´ì› ì²˜ë¦¬ ì‹¤í–‰
- `student.exec.merge_duplicates`: ì¤‘ë³µ í•™ìƒ ë³‘í•© ì‹¤í–‰
- `student.exec.pause`: í•™ìƒ íœ´ì› ì²˜ë¦¬ ì‹¤í–‰
- `student.exec.reactivate_from_discharged`: í‡´ì› í•™ìƒ ì¬í™œì„±í™” ì‹¤í–‰
- `student.exec.register`: í•™ìƒ ë“±ë¡ ì‹¤í–‰
- `student.exec.resume`: í•™ìƒ ì¬ê°œ ì²˜ë¦¬ ì‹¤í–‰
- `student.exec.update_guardian_contact`: ë³´í˜¸ì ì—°ë½ì²˜ ìˆ˜ì • ì‹¤í–‰
- `student.exec.update_profile`: í•™ìƒ í”„ë¡œí•„ ìˆ˜ì • ì‹¤í–‰
- `system.exec.backfill_reports`: ë¦¬í¬íŠ¸ ë°±í•„ ì‹¤í–‰
- `system.exec.rebuild_search_index`: ê²€ìƒ‰ ì¸ë±ìŠ¤ ì¬êµ¬ì¶• ì‹¤í–‰
- `system.exec.retry_failed_actions`: ì‹¤íŒ¨ ì•¡ì…˜ ì¬ì‹œë„ ì‹¤í–‰
- `system.exec.run_healthcheck`: í—¬ìŠ¤ì²´í¬ ì‹¤í–‰


## 10. ChatOps Inline Execution ê·œì¹™

âš ï¸ **SSOT**: ì´ ì„¹ì…˜ì€ `infra/supabase/functions/chatops/index.ts`ì˜ êµ¬í˜„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì½”ë“œ êµ¬í˜„ì´ SSOTì´ë©°, ì´ ë¬¸ì„œëŠ” ì°¸ì¡°ìš©ì…ë‹ˆë‹¤.
- êµ¬í˜„ ë³€ê²½ ì‹œ ì´ ë¬¸ì„œë„ í•¨ê»˜ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-28

### 10.1. Inline Execution ê°œìš”

**ì²˜ë¦¬ ëŒ€ìƒ:**
- **L1 Intent**: Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ (ì´ 18ê°œ)
- **L2 Intent**: Inline Executionìœ¼ë¡œ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ (ì´ 71ê°œ)
  - L2-A (ì•Œë¦¼/ë°œì†¡): 23ê°œ
  - L2-B (ë„ë©”ì¸ ë³€ê²½): 48ê°œ

**ì²˜ë¦¬ ë°©ì‹:**
- ëª¨ë“  L1/L2 IntentëŠ” TaskCard ìƒì„± ì—†ì´ ëŒ€í™”ë§Œìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
- ì‚¬ìš©ìì™€ì˜ ëŒ€í™”ë¥¼ í†µí•´ í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆ˜ì§‘í•˜ê³ , í™•ì¸ í›„ ì‹¤í–‰í•©ë‹ˆë‹¤.
- Draft ìƒíƒœ ë¨¸ì‹ ì„ í†µí•´ íŒŒë¼ë¯¸í„° ìˆ˜ì§‘ â†’ í™•ì¸ â†’ ì‹¤í–‰ ë‹¨ê³„ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

### 10.2. Draft ìƒíƒœ ë¨¸ì‹ 

**ìƒíƒœ ì „ì´:**
- `collecting`: íŒŒë¼ë¯¸í„° ìˆ˜ì§‘ ì¤‘
- `ready`: ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„° ìˆ˜ì§‘ ì™„ë£Œ, ì‹¤í–‰ ì¤€ë¹„
- `executed`: ì‹¤í–‰ ì™„ë£Œ
- `cancelled`: ì‚¬ìš©ì ì·¨ì†Œ

**íŒŒë¼ë¯¸í„° ìˆ˜ì§‘:**
- ì‚¬ìš©ìì™€ì˜ ëŒ€í™”ë¥¼ í†µí•´ í•„ìš”í•œ íŒŒë¼ë¯¸í„°ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜ì§‘
- í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ëœ ê²½ìš° ë‹¤ìŒ ì§ˆë¬¸ì„ ë°˜í™˜
- ëª¨ë“  í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ìˆ˜ì§‘ë˜ë©´ `ready` ìƒíƒœë¡œ ì „ì´

**ì‹¤í–‰ í™•ì¸:**
- `ready` ìƒíƒœì—ì„œ ì‚¬ìš©ìê°€ í™•ì¸í•˜ë©´ Handler ì‹¤í–‰
- ì‹¤í–‰ ì„±ê³µ ì‹œ `executed` ìƒíƒœë¡œ ì „ì´
- ì‹¤í–‰ ì‹¤íŒ¨ ì‹œ `cancelled` ìƒíƒœë¡œ ì „ì´

### 10.3. ì•¡ì…˜ íƒ€ì…

**ì§€ì› ì•¡ì…˜:**
- `message`: ì¼ë°˜ ë©”ì‹œì§€ (Intent íŒŒì‹± ë° ì²˜ë¦¬)
- `draft_apply`: Draft íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸
- `draft_confirm`: Draft ì‹¤í–‰ í™•ì¸ ë° Handler ì‹¤í–‰
- `draft_cancel`: Draft ì·¨ì†Œ

**ìë™ ì•¡ì…˜ ì „í™˜:**
- `message` ì•¡ì…˜ì—ì„œ ì‹¤í–‰ í™•ì¸ í‚¤ì›Œë“œ ê°ì§€ ì‹œ ìë™ìœ¼ë¡œ `draft_confirm`ìœ¼ë¡œ ì „í™˜
- í™•ì¸ í‚¤ì›Œë“œ: 'ì‹¤í–‰í•´', 'ì‹¤í–‰', 'ë“±ë¡', 'í™•ì¸', 'ë„¤', 'ì˜ˆ', 'ok', 'yes', 'go', 'ì§„í–‰'

### 10.4. ì‘ë‹µ ê°ì²´ êµ¬ì¡°

**ChatOpsResponse ì¸í„°í˜ì´ìŠ¤:**
```typescript
interface ChatOpsResponse {
  response: string; // ìì—°ì–´ ì‘ë‹µ
  intent?: {
    intent_key: string;
    automation_level: 'L0' | 'L1' | 'L2';
    execution_class?: 'A' | 'B'; // L2ì¼ ë•Œë§Œ ì¡´ì¬
    params?: Record<string, unknown>;
  };
  l0_result?: unknown; // L0 Intent ì‹¤í–‰ ê²°ê³¼
  // Draft ê´€ë ¨ í•„ë“œ (Inline Execution)
  draft_id?: string;
  draft_status?: 'collecting' | 'ready' | 'executed' | 'cancelled';
  missing_required?: string[];
  next_question?: string; // ë‹¤ìŒ ì§ˆë¬¸ í…œí”Œë¦¿
  summary?: string; // ready ìƒíƒœì¼ ë•Œ ì‹¤í–‰ ìš”ì•½
  confirm_required?: boolean; // í™•ì¸ í•„ìš” ì—¬ë¶€
}
```

**ì‘ë‹µ í•„ë“œ ì„¤ëª…:**
- `response`: í•­ìƒ í¬í•¨ë˜ëŠ” ìì—°ì–´ ì‘ë‹µ
- `intent`: Intent íŒŒì‹± ì„±ê³µ ì‹œ í¬í•¨
- `l0_result`: L0 Intent ì‹¤í–‰ ê²°ê³¼ (ìˆì„ ê²½ìš°)
- `draft_id`: Inline Execution ì‹œì‘ ì‹œ ìƒì„±ëœ Draft ID
- `draft_status`: í˜„ì¬ Draft ìƒíƒœ
- `missing_required`: ëˆ„ë½ëœ í•„ìˆ˜ íŒŒë¼ë¯¸í„° ëª©ë¡
- `next_question`: ë‹¤ìŒ ì§ˆë¬¸ í…œí”Œë¦¿ (íŒŒë¼ë¯¸í„° ìˆ˜ì§‘ ì¤‘ì¼ ë•Œ)
- `summary`: ì‹¤í–‰ ìš”ì•½ (ready ìƒíƒœì¼ ë•Œ)
- `confirm_required`: í™•ì¸ í•„ìš” ì—¬ë¶€

### 10.5. Fallback ë¡œì§

**Fallback ì‹¤í–‰ ì‹œì :**
- Intent íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ì‹¤í–‰
- L0/Inline Execution ì „ì— ì‹¤í–‰ë˜ì–´ ì •ìƒ ë™ì‘ ë³´ì¥

**Fallback ë°©ì‹:**
- ì‚¬ìš©ì ë©”ì‹œì§€ì—ì„œ í‚¤ì›Œë“œë¥¼ ë¶„ì„í•˜ì—¬ Intent ì¶”ë¡ 
- `INTENT_KEYWORD_MAP` ê¸°ë°˜ í‚¤ì›Œë“œ ë§¤ì¹­
- Intent í‚¤ íŒ¨í„´ ë§¤ì¹­ (ë„ë©”ì¸.íƒ€ì….ì•¡ì…˜)

**Fallback ì‹¤íŒ¨ ì‹œ:**
- `parsedIntent`ê°€ ì—†ì–´ë„ ê³„ì† ì§„í–‰
- ì‚¬ìš©ìì—ê²Œ ì¼ë°˜ì ì¸ ì‘ë‹µ ë°˜í™˜

### 10.6. êµ¬í˜„ ìœ„ì¹˜

**ì£¼ìš” íŒŒì¼:**
- `infra/supabase/functions/chatops/index.ts`: ChatOps ë©”ì¸ ë¡œì§ ë° `extractIntentCandidates()` í•¨ìˆ˜
- `infra/supabase/functions/_shared/inline-execution.ts`: Inline Execution ë¡œì§ (Draft ìƒíƒœ ë¨¸ì‹ )
- `packages/chatops-intents/src/registry.ts`: SSOT Intent Registry (examples í¬í•¨)
- `infra/supabase/functions/_shared/intent-registry.ts`: Edge Functionìš© ê°„ì†Œí™”ëœ Registry (examples í¬í•¨)
- `infra/supabase/functions/_shared/compute-missing-required.ts`: í•„ìˆ˜ íŒŒë¼ë¯¸í„° ê³„ì‚° ë¡œì§
- `scripts/generate-intent-examples.ts`: Intent examples ìë™ ìƒì„± ìŠ¤í¬ë¦½íŠ¸
- `scripts/generate-edge-intent-registry.ts`: Edge Function Registry ë™ê¸°í™” ìŠ¤í¬ë¦½íŠ¸

**ê´€ë ¨ ë¬¸ì„œ:**
- `docu/ì±—ë´‡.md`: Intent ì¹´íƒˆë¡œê·¸ (ì´ ë¬¸ì„œ)
- `docu/ìì—°ì–´ì²˜ë¦¬.md`: Intent ë§¤ì¹­ ê°œì„  ë°©ì•ˆ ë° êµ¬í˜„ ìƒì„¸
- `docu/ë””ì–´ìŒ¤ ì•„í‚¤í…ì²˜.md`: TaskCard ë°ì´í„° ëª¨ë¸ ë° UI ìŠ¤í™ (3.1.2, 3.1.3 ì„¹ì…˜)

## 11. ChatOps ì„¸ì…˜ ë° ë§¥ë½ ìœ ì§€

âš ï¸ **SSOT**: ì´ ì„¹ì…˜ì€ `infra/supabase/functions/chatops/index.ts` ë° í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
- ì½”ë“œ êµ¬í˜„ì´ SSOTì´ë©°, ì´ ë¬¸ì„œëŠ” ì°¸ì¡°ìš©ì…ë‹ˆë‹¤.
- êµ¬í˜„ ë³€ê²½ ì‹œ ì´ ë¬¸ì„œë„ í•¨ê»˜ ì—…ë°ì´íŠ¸í•´ì•¼ í•©ë‹ˆë‹¤.

**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-01-28

### 11.1. ê°œìš”

ChatOpsëŠ” ì‚¬ìš©ì ëŒ€í™”ì˜ ë§¥ë½ì„ ìœ ì§€í•˜ê³ , ìƒˆë¡œê³ ì¹¨ ì‹œì—ë„ ëŒ€í™”ë¥¼ ë³µì›í•  ìˆ˜ ìˆë„ë¡ ì„¸ì…˜ ê¸°ë°˜ ì•„í‚¤í…ì²˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

**ì£¼ìš” ê¸°ëŠ¥:**
- **ìƒˆë¡œê³ ì¹¨ ì‹œ ëŒ€í™” ìœ ì§€**: localStorage ìºì‹œë¥¼ í†µí•œ UI ë³µì›
- **ë§¥ë½ ìœ ì§€**: ê°™ì€ session ë‚´ì—ì„œ ì´ì „ ëŒ€í™” ì°¸ì¡°
- **ë¹„ìš© ìµœì í™”**: ìµœê·¼ Nê°œ ë©”ì‹œì§€ + summary ì „ëµìœ¼ë¡œ í† í° ì‚¬ìš©ëŸ‰ ì œì–´
- **SSOT ì¤€ìˆ˜**: ë§¥ë½ ì •ë³¸ì€ ì„œë²„(Edge+DB)ì— ì €ì¥, í”„ë¡ íŠ¸ localStorageëŠ” UI ìºì‹œë¡œë§Œ ì‚¬ìš©

### 11.2. session_id ë„ì…

**ìƒì„± ë°©ì‹:**
- í”„ë¡ íŠ¸ì—”ë“œì—ì„œ `crypto.randomUUID()`ë¡œ ìƒì„±
- localStorageì— ì €ì¥í•˜ì—¬ ìƒˆë¡œê³ ì¹¨ ì‹œì—ë„ ìœ ì§€
- í‚¤: `chatops:session_id`

**ì „ë‹¬ ë°©ì‹:**
- ëª¨ë“  ChatOps API ìš”ì²­ì— `session_id` í•„ìˆ˜ í¬í•¨
- Edge Functionì—ì„œ `session_id`ë¡œ ì„¸ì…˜ ì¡°íšŒ/ìƒì„±

**API ìš”ì²­ ìŠ¤í™:**
```typescript
interface ChatOpsRequest {
  session_id: string;  // í•„ìˆ˜: í”„ë¡ íŠ¸ì—ì„œ ìƒì„±í•œ UUID
  message: string;     // ì‚¬ìš©ì ë©”ì‹œì§€
}
```

**êµ¬í˜„ ìœ„ì¹˜:**
- í”„ë¡ íŠ¸: `packages/ui-core/src/utils/chatops-session.ts`
- Hook: `packages/hooks/use-chatops/src/useChatOps.ts`
- Edge: `infra/supabase/supabase/functions/chatops/index.ts`

### 11.3. í”„ë¡ íŠ¸ì—”ë“œ: ìƒˆë¡œê³ ì¹¨ ì‹œ ëŒ€í™” ìœ ì§€

**localStorage ìºì‹œ êµ¬ì¡°:**
- Session ID: `chatops:session_id` (ë‹¨ì¼ ê°’)
- Messages Cache: `chatops:messages:<sessionId>` (ì„¸ì…˜ë³„ ë©”ì‹œì§€ ë°°ì—´)

**ë™ì‘ ë°©ì‹:**
1. **ì´ˆê¸° ë¡œë“œ**: `useAILayerMenu`ì—ì„œ localStorageì—ì„œ session_id ì¡°íšŒ
2. **ìºì‹œ ë³µì›**: í•´ë‹¹ session_idì˜ ë©”ì‹œì§€ ìºì‹œ ë¡œë“œ
3. **ìë™ ì €ì¥**: ë©”ì‹œì§€ ë³€ê²½ ì‹œë§ˆë‹¤ localStorageì— ì €ì¥
4. **ì„¸ì…˜ ì´ˆê¸°í™”**: `clearChatOpsMessages()` í˜¸ì¶œ ì‹œ ìƒˆ session_id ìƒì„±

**êµ¬í˜„ ìœ„ì¹˜:**
- `packages/ui-core/src/hooks/useAILayerMenu.tsx`
- `packages/ui-core/src/utils/chatops-session.ts`

**ì£¼ì˜ì‚¬í•­:**
- âš ï¸ Zero-Trust ì›ì¹™: tenantId/userIdëŠ” í”„ë¡ íŠ¸ì—ì„œ ì§ì ‘ ì‚¬ìš©í•˜ì§€ ì•ŠìŒ
- ì¶©ëŒ ë¦¬ìŠ¤í¬: ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œ ì—¬ëŸ¬ í…Œë„ŒíŠ¸ ì‚¬ìš© ì‹œ sessionIdë§Œìœ¼ë¡œëŠ” êµ¬ë¶„ ë¶ˆê°€
- ì‹¤ì œ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ë¸Œë¼ìš°ì €ë‹¹ í•˜ë‚˜ì˜ ì„¸ì…˜ë§Œ í™œì„±í™”ë˜ë¯€ë¡œ ì¶©ëŒ ê°€ëŠ¥ì„±ì€ ë‚®ìŒ

### 11.4. ì„œë²„: ë§¥ë½ ìœ ì§€ ì •ë³¸ (DB ì €ì¥)

**DB ìŠ¤í‚¤ë§ˆ:**

**chatops_sessions í…Œì´ë¸”:**
- `id`: uuid (session_id, í”„ë¡ íŠ¸ì—ì„œ ìƒì„±í•œ UUID)
- `tenant_id`: uuid (JWTì—ì„œ ì¶”ì¶œ, Zero-Trust)
- `user_id`: uuid (JWTì—ì„œ ì¶”ì¶œ, Zero-Trust)
- `summary`: text (ëŒ€í™” ìš”ì•½, ìµœëŒ€ 2000ì)
- `created_at`: timestamptz
- `updated_at`: timestamptz

**chatops_messages í…Œì´ë¸”:**
- `id`: bigserial (PK)
- `session_id`: uuid (FK â†’ chatops_sessions)
- `tenant_id`: uuid (JWTì—ì„œ ì¶”ì¶œ)
- `user_id`: uuid (JWTì—ì„œ ì¶”ì¶œ)
- `role`: text ('user' | 'assistant' | 'system')
- `content`: text
- `created_at`: timestamptz

**RLS ì •ì±…:**
- Zero-Trust ì¤€ìˆ˜: tenant_id/user_idëŠ” JWTì—ì„œ ì¶”ì¶œí•œ ê°’ê³¼ ì¼ì¹˜í•´ì•¼ í•¨
- Edge Functionì€ service_roleë¡œ RLS ìš°íšŒí•˜ì—¬ ì§ì ‘ INSERT

**ë§ˆì´ê·¸ë ˆì´ì…˜:**
- `infra/supabase/migrations/134_create_chatops_sessions_tables.sql`

### 11.5. ë§¥ë½ ìœ ì§€ ì „ëµ (ë¹„ìš© ìµœì í™”)

**ì „ëµ: "ìµœê·¼ Nê°œ + Summary"**

**History Window:**
- ê¸°ë³¸ê°’: **6ê°œ ë©”ì‹œì§€** (ìµœê·¼ 3í„´) - 2025-01-29 ìµœì í™”
- ì„¤ì •: DB ì¡°íšŒ `limit(6)`, Agent Engine `slice(-6)`
- ì´ì „ ê°’: 16ê°œ ë©”ì‹œì§€ (ìµœê·¼ 8í„´) â†’ ì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ê°ì†Œ

**Summary ì—…ë°ì´íŠ¸ ì •ì±…:**
- **ì„ê³„ì¹˜**: 30í„´(60ê°œ ë©”ì‹œì§€) ì´ìƒì¼ ë•Œë§Œ ì‹¤í–‰
- **ìƒì„± ë°©ì‹**: í˜„ì¬ëŠ” ê°„ë‹¨í•œ ë¬¸ìì—´ ìë¥´ê¸° (ìµœëŒ€ 2000ì)
- **í–¥í›„ ê°œì„ **: LLMì„ ì‚¬ìš©í•œ ìš”ì•½ ìƒì„± ê°€ëŠ¥

**OpenAI Messages ë°°ì—´ êµ¬ì„±:**
```typescript
const openaiMessages = [
  { role: 'system', content: systemPrompt }, // ë§¥ë½ ìœ ì§€ ê·œì¹™ í¬í•¨
  // summaryê°€ ìˆìœ¼ë©´ ì¶”ê°€
  ...(session?.summary ? [{
    role: 'system',
    content: `ì´ì „ ëŒ€í™” ìš”ì•½:\n${session.summary}\n\nìœ„ ìš”ì•½ì„ ì°¸ê³ í•˜ì—¬ ì‚¬ìš©ìì˜ í˜„ì¬ ì§ˆë¬¸ì— ë‹µë³€í•˜ì„¸ìš”.`
  }] : []),
  // ì´ì „ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì¶”ê°€ ì „ì— ë§¥ë½ ì°¸ì¡° ì§€ì‹œ ì¶”ê°€
  ...(recentMessages.length > 0 ? [{
    role: 'system',
    content: `ì•„ë˜ëŠ” ì´ì „ ëŒ€í™” íˆìŠ¤í† ë¦¬ì…ë‹ˆë‹¤. ì‚¬ìš©ìì˜ í˜„ì¬ ìš”ì²­ì´ "ë„", "ë˜í•œ", "ê·¸ë¦¬ê³ " ë“±ì˜ ë‹¨ì–´ë¥¼ í¬í•¨í•˜ê±°ë‚˜ ëª…ì‹œì ì¸ ëŒ€ìƒì´ ì—†ìœ¼ë©´, ë°˜ë“œì‹œ ì´ì „ ëŒ€í™”ì—ì„œ ì–¸ê¸‰ëœ í•™ìƒ ì´ë¦„, ë°˜, ë‚ ì§œ ë“±ì„ ì°¸ì¡°í•˜ì—¬ paramsì— í¬í•¨í•˜ì„¸ìš”.`
  }] : []),
  // ìµœê·¼ íˆìŠ¤í† ë¦¬ (ìµœëŒ€ 6ê°œ - 2025-01-29 ìµœì í™”)
  ...recentMessages.map(msg => ({
    role: msg.role === 'assistant' ? 'assistant' : 'user',
    content: msg.content
  })),
  // í˜„ì¬ ì‚¬ìš©ì ë©”ì‹œì§€
  { role: 'user', content: message }
];
```

**ë§¥ë½ ì°¸ì¡° ì§€ì‹œ:**
- systemPromptì— "ë§¥ë½ ìœ ì§€ ê·œì¹™" ì„¹ì…˜ ì¶”ê°€
- ì´ì „ ëŒ€í™” íˆìŠ¤í† ë¦¬ ì•ì— ëª…ì‹œì ì¸ ë§¥ë½ ì°¸ì¡° ì§€ì‹œ ì¶”ê°€
- params í•„ë“œ ê·œì¹™ì— "ì´ì „ ëŒ€í™” ì°¸ì¡° ê·œì¹™" ì¶”ê°€
- ì˜ˆ: "ë„", "ë˜í•œ", "ê·¸ë¦¬ê³ " ë“±ì˜ ë‹¨ì–´ê°€ ìˆìœ¼ë©´ ì´ì „ ëŒ€í™” ì°¸ì¡°

**ë¹„ìš© ìµœì í™” íš¨ê³¼:**
- ì „ì²´ íˆìŠ¤í† ë¦¬ë¥¼ ë§¤ë²ˆ ë³´ë‚´ì§€ ì•ŠìŒ
- ìµœê·¼ 6ê°œë§Œ í¬í•¨í•˜ì—¬ í† í° ì‚¬ìš©ëŸ‰ ì œì–´ (2025-01-29 ìµœì í™”: 40% ê°ì†Œ)
- Summaryë¡œ ì˜¤ë˜ëœ ë§¥ë½ ìœ ì§€
- ì…ë ¥ í† í° 20-30% ê°ì†Œ, API ì‘ë‹µ ì‹œê°„ 10-15% ë‹¨ì¶•

### 11.6. ë©”ì‹œì§€ ì €ì¥ íë¦„

**ìš”ì²­ ì²˜ë¦¬ ìˆœì„œ:**
1. session_idë¡œ ì„¸ì…˜ ì¡°íšŒ/ìƒì„±
2. ìµœê·¼ ë©”ì‹œì§€ Nê°œ ì¡°íšŒ (N=6, 2025-01-29 ìµœì í™”)
3. summary ì¡°íšŒ (ìˆìœ¼ë©´)
4. OpenAI messages êµ¬ì„± (system + summary + recentHistory + current)
5. OpenAI API í˜¸ì¶œ
6. ì‘ë‹µ ìˆ˜ì‹  í›„ DBì— ì €ì¥:
   - ì‚¬ìš©ì ë©”ì‹œì§€ ì €ì¥ (role='user')
   - Assistant ì‘ë‹µ ì €ì¥ (role='assistant')
7. ë©”ì‹œì§€ ìˆ˜ í™•ì¸ (30í„´ ì´ìƒì´ë©´ summary ì—…ë°ì´íŠ¸)

**ì›ìì„±:**
- ë©”ì‹œì§€ ì €ì¥ì€ try-catchë¡œ ê°ì‹¸ì„œ ì‹¤íŒ¨í•´ë„ ì‘ë‹µì€ ë°˜í™˜
- Summary ì—…ë°ì´íŠ¸ ì‹¤íŒ¨ë„ ì¹˜ëª…ì  ì˜¤ë¥˜ê°€ ì•„ë‹˜

### 11.7. êµ¬í˜„ ìœ„ì¹˜

**í”„ë¡ íŠ¸ì—”ë“œ:**
- `packages/ui-core/src/utils/chatops-session.ts`: session_id ìƒì„±/ì €ì¥ ìœ í‹¸
- `packages/ui-core/src/hooks/useAILayerMenu.tsx`: localStorage ìºì‹œ ê´€ë¦¬
- `packages/hooks/use-chatops/src/useChatOps.ts`: API ìš”ì²­ ìŠ¤í™ (session_id í¬í•¨)
- `apps/academy-admin/src/App.tsx`: session_id ì „ë‹¬

**ë°±ì—”ë“œ:**
- `infra/supabase/supabase/functions/chatops/index.ts`: ì„¸ì…˜ ì¡°íšŒ/ìƒì„±, ë©”ì‹œì§€ ì €ì¥, ë§¥ë½ ìœ ì§€
- `infra/supabase/migrations/134_create_chatops_sessions_tables.sql`: DB ìŠ¤í‚¤ë§ˆ

**ê´€ë ¨ ë¬¸ì„œ:**
- ì´ ë¬¸ì„œ: ChatOps ì„¸ì…˜ ë° ë§¥ë½ ìœ ì§€
- `docu/ì±—ë´‡.md`: Intent ì¹´íƒˆë¡œê·¸ ë° Inline Execution ê·œì¹™
- `docu/ì±—ë´‡_ì„±ëŠ¥ìµœì í™”.md`: ChatOps ì„±ëŠ¥ ìµœì í™” ìƒì„¸ (2025-01-29)
- `docu/ì•¡í‹°ë¹„í‹°.md`: Execution Audit ì‹œìŠ¤í…œ (ì‹¤í–‰ ê²°ê³¼ ê¸°ë¡)
- `docu/AI_ìë™í™”_ê¸°ëŠ¥_ì •ë¦¬.md`: Automation & AI Industry-Neutral Rule
