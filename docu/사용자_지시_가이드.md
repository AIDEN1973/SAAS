# 👤 비기술자를 위한 코드 생성 지시 가이드

## 🎯 이 가이드를 사용하는 이유

프로그래밍을 모르셔도 괜찮습니다! 이 가이드를 따라하시면 AI가 자동으로 모든 규칙을 확인하고 올바른 코드를 생성합니다.

---

## ✅ 올바른 지시 방법 (3가지 템플릿)

### 템플릿 1: 기능 요청 (가장 간단, 자동 검증 포함)

```
[기능 이름] 기능 만들어줘
```

**예시:**
- "학생 목록 조회 기능 만들어줘"
- "출석 체크 기능 만들어줘"
- "학부모 연락처 관리 기능 만들어줘"

**AI가 자동으로:**
- ✅ 모든 규칙 확인
- ✅ 올바른 아키텍처 적용
- ✅ 체크리스트 검증 (자동)
- ✅ 오류 발견 시 자동 수정
- ✅ 타입 체크 실행

**💡 팁**: 별도로 "검증해줘"라고 말할 필요 없습니다. 코드 생성과 동시에 자동 검증이 수행됩니다.

---

### 템플릿 2: 문서 기준 요청 (가장 추천, 완전 자동 검증)

```
[기능 이름] 기능 만들어줘
문서(docu 폴더, rules.md) 기준으로 만들어줘
```

**예시:**
- "학생 등록 기능 만들어줘. 문서 기준으로 만들어줘"
- "출석 로그 조회 기능 만들어줘. rules.md와 docu 폴더 기준으로 만들어줘"

**AI가 자동으로:**
- ✅ docu 폴더의 모든 문서 확인
- ✅ rules.md의 모든 규칙 적용
- ✅ 체크리스트 전체 검증 (자동)
- ✅ 정합성 검증
- ✅ 정책 위반 사항 자동 수정
- ✅ 타입 체크 및 빌드 테스트

**💡 가장 효율적**: 이 방법을 사용하면 별도 검증 요청 없이 모든 검증이 자동으로 수행됩니다.

---

### 템플릿 3: 별도 검증 요청 (선택사항)

> **참고**: 템플릿 1, 2를 사용하면 자동 검증이 포함되므로 이 템플릿은 선택사항입니다.

```
방금 만든 코드가 문서 규칙에 맞는지 확인해줘
```

**또는**

```
정합성 검증해줘
```

**사용 시기:**
- 코드 생성 후 추가로 검증이 필요한 경우
- 다른 사람이 만든 코드를 검증해야 하는 경우
- 특정 부분만 집중 검증이 필요한 경우

**AI가 자동으로:**
- ✅ 체크리스트 전체 검증
- ✅ 오류 발견 시 자동 수정
- ✅ 정책 위반 사항 수정
- ✅ 타입 체크 및 빌드 테스트

---

## 🚫 피해야 할 지시 (하지만 괜찮습니다!)

다음과 같이 지시하셔도 AI가 자동으로 규칙을 확인하고 검증합니다:

```
학생 관리 기능 만들어줘
```

→ AI가 자동으로 체크리스트를 확인하고 규칙을 적용하며, 검증까지 수행합니다.

**💡 비용 효율 팁**:
- 코드 생성 시 자동 검증이 포함되므로 별도 검증 요청은 불필요합니다.
- "문서 기준으로 만들어줘"를 추가하면 더 철저한 검증이 수행됩니다.

---

## 💡 추가 팁

### 1. 자동 검증 활용 (추천)

```
학생 목록 기능 만들어줘
문서 기준으로 만들어줘
```

→ 코드 생성과 동시에 자동 검증이 수행되므로 별도 검증 요청 불필요

**비용 효율적**: 한 번의 요청으로 생성 + 검증이 모두 완료됩니다.

### 2. 문제 발견 시

```
이 기능이 제대로 작동하지 않아요
```

→ AI가 자동으로 문제를 진단하고 수정합니다.

### 3. 문서 기준 강조

```
문서대로 만들어줘
```

→ AI가 모든 문서를 확인하고 규칙을 적용합니다.

---

## 🔄 AI의 자동 검증 프로세스

코드를 생성할 때 AI는 자동으로 다음을 확인합니다:

### 핵심 아키텍처 (Critical)
1. ✅ **아키텍처 레이어**: 클라이언트/서버 분리, 의존성 방향 (apps → hooks → services → DB)
2. ✅ **Zero-Trust 원칙**: tenantId 자동 처리, UI에서 하드코딩 금지
3. ✅ **Service Layer 규칙**: INSERT는 row object에 tenant_id 포함, SELECT/UPDATE/DELETE는 withTenant() 사용
4. ✅ **API SDK 규칙**: post() 메서드가 자동으로 tenant_id, industry_type 삽입
5. ✅ **Hook 규칙**: getApiContext()로 tenantId 가져오기, @api-sdk/core만 사용

### 보안 & 데이터 보호 (Critical)
6. ✅ **환경변수 규칙**: env-registry 사용, process.env 직접 접근 금지
7. ✅ **클라이언트-서버 분리**: 서버 코드 번들 제외, index.ts에서 서버 코드 export 금지
8. ✅ **RLS 정책**: JWT claim 기반 사용, 정책 이름은 tenant_isolation_<table> 형식
9. ✅ **PII 마스킹**: 로그/모니터링에서 maskPII() 사용 필수
10. ✅ **Service Role Key**: 클라이언트 코드에 절대 포함 금지

### 코드 품질
11. ✅ **타입 안전성**: any 타입 제거 (필터링 등 필수 경우 제외)
12. ✅ **의존성 경로**: file:../../packages/... 형식, 순환 의존성 방지
13. ✅ **패키지 구조**: exports 필드 올바른 설정, 서버 전용은 /server, /service 경로
14. ✅ **에러 처리**: AppError 표준 사용, PostgREST 에러 매핑

### UI/UX & 스타일
15. ✅ **UI/UX 규칙**: Atlaskit 컴포넌트 사용, Tailwind 직접 사용 금지, Schema Engine을 통해서만 UI 렌더링
16. ✅ **전역 스타일**: 앱별 index.css는 비어있거나 앱 전용만, Atlaskit Theme은 자동 적용

### 데이터 처리
17. ✅ **날짜/시간**: KST 기준 처리, CURRENT_DATE 직접 사용 금지
18. ✅ **SQL 인덱스**: 파티셔닝 테이블에 (tenant_id, occurred_at DESC) 인덱스 필수

### 운영 규칙
19. ✅ **더미 데이터**: 운영 코드에 더미 데이터 생성 금지
20. ✅ **이모지**: 코드/UI 텍스트에 이모지 사용 금지

---

## 📝 실제 사용 예시

### 시나리오 1: 새 기능 추가

**사용자:**
```
출석 체크 기능 만들어줘
문서 기준으로 만들어줘
```

**AI가 자동으로:**
- ✅ 출석 로그 테이블 구조 확인
- ✅ Service Layer 생성 (withTenant() 사용)
- ✅ Hook 생성 (@api-sdk/core 사용)
- ✅ UI 컴포넌트 생성 (Schema Engine을 통한 Atlaskit 컴포넌트 사용)
- ✅ 체크리스트 검증
- ✅ 오류 수정

---

### 시나리오 2: 기존 코드 검증

**사용자:**
```
현재 프로젝트 전체 검증해줘
```

**AI가 자동으로:**
- ✅ 모든 파일 체크리스트 검증
- ✅ 오류 발견 시 수정
- ✅ 정책 위반 사항 수정
- ✅ 타입 체크 실행

---

### 시나리오 3: 문제 해결

**사용자:**
```
학생 목록이 안 나와요
```

**AI가 자동으로:**
- ✅ 코드 분석
- ✅ 규칙 위반 확인
- ✅ 문제 수정
- ✅ 검증

---

## 🎯 핵심 메시지

**프로그래밍을 모르셔도 괜찮습니다!**

### 가장 효율적인 방법 (추천)

**한 번의 요청으로 생성 + 검증 완료:**

```
[기능 이름] 기능 만들어줘
문서 기준으로 만들어줘
```

→ AI가 자동으로:
1. ✅ 모든 규칙 확인 및 적용
2. ✅ 코드 생성
3. ✅ 체크리스트 검증 (자동)
4. ✅ 오류 발견 시 자동 수정
5. ✅ 타입 체크 실행

**별도 검증 요청 불필요!** 코드 생성과 동시에 검증이 완료됩니다.

### 간단한 방법

```
[기능 이름] 기능 만들어줘
```

→ AI가 자동으로 규칙 확인, 코드 생성, 기본 검증 수행

**AI가 모든 기술적 세부사항을 처리합니다.**

