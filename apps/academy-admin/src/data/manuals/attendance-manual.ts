/**
 * 출결관리 페이지 매뉴얼
 *
 * [불변 규칙] 매뉴얼 컨텐츠는 명확하고 이해하기 쉽게 작성합니다.
 */

import type { ManualPage } from '../../types/manual';

export const attendanceManual: ManualPage = {
  id: 'attendance',
  title: '출결관리',
  description: '학생 출결을 기록하고 관리하는 페이지입니다.',
  icon: 'UserCheck',
  lastUpdated: '2026-01-11',
  sections: [
    {
      id: 'intro',
      title: '이 화면, 언제 사용하나요?',
      type: 'intro',
      intro:
        '학생의 **출결을 관리**하는 핵심적인 화면입니다. 매일 학원에 오는 학생들의 등원과 하원을 체크하고, 출석/지각/결석 상태를 기록합니다. **오늘 수업이 있는 반의 학생만** 자동으로 표시되어 효율적으로 출결 처리를 할 수 있습니다.',
    },
    {
      id: 'features',
      title: '주요 기능',
      type: 'features',
      features: [
        '오늘 출결하기 : 오늘 수업이 있는 학생들의 출결을 빠르게 처리',
        '학생 검색 : 이름이나 전화번호로 특정 학생을 빠르게 찾기',
        '반별 필터링 : 특정 반의 학생만 골라서 보기',
        '날짜 선택 : 오늘이 아닌 다른 날짜의 출결 확인 및 수정',
        '일괄 등원/하원 : 버튼 한 번으로 전체 학생 출결 처리',
        '상태 선택 : 출석, 지각, 결석, 사유결석 중 선택',
        '출결 통계 : 총원, 출석, 지각, 결석 학생 수 실시간 확인',
        '학생 상세보기 : 학생 카드 클릭 시 상세 정보 페이지로 이동',
      ],
    },
    {
      id: 'steps',
      title: '단계별 사용법',
      type: 'steps',
      stepGuides: [
        {
          title: '기본 출결 처리 방법',
          steps: [
            { step: 1, content: '화면 상단의 "반 선택" 드롭다운에서 원하는 반을 선택합니다. 오늘 수업이 있는 반만 표시됩니다.' },
            { step: 2, content: '날짜를 확인합니다. 기본값은 오늘 날짜이며, 필요시 다른 날짜를 선택할 수 있습니다.' },
            { step: 3, content: '학생 목록에서 출결을 처리할 학생을 찾습니다. 검색창에 이름이나 전화번호를 입력하면 빠르게 찾을 수 있습니다.' },
            { step: 4, content: '학생 카드에서 "등원" 체크박스를 클릭하여 등원을 체크합니다.' },
            { step: 5, content: '필요한 경우 상태 드롭다운에서 출석/지각/결석/사유 중 하나를 선택합니다.' },
            { step: 6, content: '화면 하단의 "저장" 버튼을 클릭하여 출결 정보를 저장합니다.' },
          ],
          alert: {
            type: 'success',
            content: '저장이 완료되면 "저장되었습니다" 메시지가 표시됩니다.',
          },
        },
        {
          title: '일괄 등원 처리 (전체 학생 한 번에 처리)',
          steps: [
            { step: 1, content: '원하는 반을 선택합니다.' },
            { step: 2, content: '화면 하단의 "일괄 등원" 버튼을 클릭합니다.' },
            { step: 3, content: '모든 학생의 등원 체크박스가 자동으로 체크됩니다.' },
            { step: 4, content: '결석이나 지각 학생이 있다면 해당 학생의 상태를 개별적으로 수정합니다.' },
            { step: 5, content: '"저장" 버튼을 클릭하여 출결 정보를 저장합니다.' },
          ],
          alert: {
            type: 'info',
            content: '일괄 등원 후에도 개별 학생의 상태는 언제든 수정할 수 있습니다.',
          },
        },
        {
          title: '하원 처리',
          steps: [
            { step: 1, content: '하원할 학생을 찾습니다.' },
            { step: 2, content: '학생 카드에서 "하원" 체크박스를 클릭하거나 "하원" 버튼을 클릭합니다.' },
            { step: 3, content: '전체 학생 하원 시 "일괄 하원" 버튼을 사용할 수 있습니다.' },
            { step: 4, content: '"저장" 버튼을 클릭하여 저장합니다.' },
          ],
        },
        {
          title: '특정 학생 빠르게 찾기',
          steps: [
            { step: 1, content: '화면 상단의 검색창을 클릭합니다.' },
            { step: 2, content: '학생 이름 또는 전화번호를 입력합니다.' },
            { step: 3, content: '입력과 동시에 자동으로 학생 목록이 필터링됩니다.' },
            { step: 4, content: '검색을 지우면 다시 전체 학생이 표시됩니다.' },
          ],
        },
      ],
    },
    {
      id: 'screen',
      title: '화면 뜯어보기',
      type: 'screen',
      screenGroups: [
        {
          title: '상단 필터 영역',
          items: [
            { title: '반 선택 드롭다운', description: '클릭하면 오늘 수업이 있는 반 목록이 표시됩니다. 원하는 반을 선택하세요.' },
            { title: '날짜 선택', description: '기본값은 오늘 날짜입니다. 과거 날짜를 선택하여 이전 출결 기록을 확인하거나 수정할 수 있습니다.' },
            { title: '검색창', description: '학생 이름이나 전화번호를 입력하면 즉시 해당 학생만 화면에 표시됩니다.' },
          ],
        },
        {
          title: '학생 카드 (각 학생별로 표시)',
          items: [
            { title: '학생 이름', description: '학생의 이름이 표시됩니다. 프로필 사진이 있는 경우 함께 표시됩니다.' },
            { title: '학년/반 정보', description: '학생이 속한 학년과 반 정보가 이름 아래에 표시됩니다.' },
            { title: '등원 체크박스', description: '클릭하면 등원 상태가 체크됩니다. 다시 클릭하면 해제됩니다.' },
            { title: '하원 체크박스', description: '클릭하면 하원 상태가 체크됩니다. 다시 클릭하면 해제됩니다.' },
            { title: '상태 드롭다운', description: '출석(정상), 지각, 결석, 사유결석 중 하나를 선택할 수 있습니다.' },
            { title: '등원/하원 버튼', description: '체크박스 대신 버튼을 눌러서도 등원/하원 처리가 가능합니다.' },
            { title: '상세 버튼', description: '클릭하면 해당 학생의 상세 정보 페이지로 이동합니다.' },
          ],
        },
        {
          title: '출결 통계 (화면 하단)',
          items: [
            { title: '총원', description: '현재 화면에 표시된 전체 학생 수입니다.' },
            { title: '출석', description: '등원 체크가 되어있고 "출석" 상태인 학생 수입니다.' },
            { title: '지각', description: '등원 체크가 되어있고 "지각" 상태인 학생 수입니다.' },
            { title: '결석', description: '"결석" 상태로 표시된 학생 수입니다.' },
          ],
        },
        {
          title: '하단 액션 버튼 영역',
          items: [
            { title: '일괄 등원', description: '현재 화면의 모든 학생을 한 번에 등원 처리합니다.' },
            { title: '일괄 하원', description: '현재 화면의 모든 학생을 한 번에 하원 처리합니다.' },
            { title: '저장', description: '변경된 출결 정보를 저장합니다. 반드시 저장 버튼을 눌러야 출결 기록이 반영됩니다.' },
          ],
        },
      ],
    },
    {
      id: 'tips',
      title: '알아두면 좋은 팁 & 주의사항',
      type: 'screen',
      screenGroups: [
        {
          title: '꼭 알아야 할 주의사항',
          items: [
            { title: '저장 버튼 필수', description: '출결을 체크한 후 반드시 "저장" 버튼을 눌러야 합니다. 저장하지 않으면 변경 내용이 사라집니다.' },
            { title: '자동 알림 발송', description: '지각이나 결석으로 저장하면 자동으로 보호자에게 알림이 발송됩니다. 환경설정에서 알림 설정을 확인하세요.' },
            { title: '권한에 따른 제한', description: 'Assistant 역할인 경우, 출결 기록 후에는 수정이나 삭제가 불가능합니다. 수정이 필요하면 Teacher 또는 Admin에게 요청하세요.' },
            { title: '오늘 수업 반만 표시', description: '반 선택 목록에는 오늘 요일에 수업이 있는 반만 표시됩니다. 다른 반이 보이지 않는다면 정상입니다.' },
          ],
        },
        {
          title: '효율적으로 사용하는 팁',
          items: [
            { title: '일괄 처리 활용', description: '대부분의 학생이 출석인 경우, "일괄 등원"을 먼저 클릭한 후 지각/결석 학생만 개별 수정하면 빠릅니다.' },
            { title: '반 선택 먼저', description: '반을 먼저 선택하면 해당 반 학생만 표시되어 한눈에 파악하기 쉽습니다.' },
            { title: '통계 확인', description: '화면 하단의 출결 통계를 확인하면 아직 처리하지 않은 학생이 있는지 빠르게 알 수 있습니다.' },
            { title: '검색 기능 활용', description: '특정 학생을 찾을 때는 검색창에 이름만 입력해도 바로 찾을 수 있습니다.' },
            { title: '마지막 반 기억', description: '마지막으로 선택한 반이 자동으로 기억되어 다음에 접속해도 같은 반이 선택되어 있습니다.' },
          ],
        },
        {
          title: '문제 해결',
          items: [
            { title: '학생이 보이지 않아요', description: '반을 선택했는데 학생이 없다면, 해당 반에 학생이 등록되어 있는지 확인하세요.' },
            { title: '반이 보이지 않아요', description: '오늘 수업이 있는 반만 표시됩니다. 반 설정에서 요일을 확인하세요.' },
            { title: '저장이 안 돼요', description: '인터넷 연결을 확인하고, 새로고침 후 다시 시도해보세요. 문제가 지속되면 관리자에게 문의하세요.' },
          ],
        },
      ],
    },
    {
      id: 'status',
      title: '출결 상태의 의미',
      type: 'screen',
      screenGroups: [
        {
          title: '4가지 출결 상태',
          items: [
            { title: '출석', description: '정상적으로 출석한 경우입니다. 수업 시작 시간 전에 등원하면 자동으로 "출석"으로 설정됩니다.' },
            { title: '지각', description: '수업 시작 시간 이후에 등원한 경우입니다. 보호자에게 자동으로 알림이 발송됩니다.' },
            { title: '결석', description: '수업에 오지 않은 경우입니다. 보호자에게 자동으로 알림이 발송됩니다.' },
            { title: '사유결석', description: '미리 연락을 받은 결석입니다. 병결, 가족 행사 등 사유가 있는 경우 선택합니다. 알림이 발송되지 않습니다.' },
          ],
        },
        {
          title: '지각/결석 자동 판정 (환경설정에서 변경 가능)',
          items: [
            { title: '출석 기준', description: '수업 시작 시간 이전에 등원하면 "출석"으로 자동 설정됩니다.' },
            { title: '지각 기준', description: '수업 시작 후 일정 시간 이내에 등원하면 "지각"으로 설정됩니다. (기본: 10분)' },
            { title: '결석 기준', description: '수업 시작 후 일정 시간이 지나면 "결석"으로 설정됩니다. (기본: 30분)' },
            { title: '수동 변경', description: '자동 판정된 상태도 드롭다운에서 직접 변경할 수 있습니다.' },
          ],
        },
      ],
    },
    {
      id: 'mobile',
      title: '모바일/태블릿에서 사용하기',
      type: 'screen',
      screenGroups: [
        {
          title: '모바일에서의 차이점',
          items: [
            { title: '하단 고정 버튼', description: '스마트폰에서는 일괄 등원, 일괄 하원, 저장 버튼이 화면 하단에 고정되어 있습니다.' },
            { title: '스크롤', description: '학생 목록을 위아래로 스크롤하여 확인할 수 있습니다.' },
            { title: '터치 조작', description: '체크박스와 버튼을 손가락으로 터치하여 조작합니다.' },
          ],
        },
        {
          title: '태블릿에서의 차이점',
          items: [
            { title: '2열 표시', description: '태블릿에서는 학생 카드가 2열로 표시되어 한 화면에 더 많은 학생을 볼 수 있습니다.' },
            { title: '큰 버튼', description: '터치하기 편하도록 버튼 크기가 더 크게 표시됩니다.' },
          ],
        },
      ],
    },
    {
      id: 'technical',
      title: '기술적 특징',
      type: 'technical',
      technicalFeatures: [
        'React Query 기반 데이터 캐싱 및 자동 리페칭',
        'Policy Registry 기반 지각/결석 자동 판정',
        '서버 사이드 알림 발송 (core-notification)',
        'useResponsiveMode 훅 기반 반응형 레이아웃',
        'localStorage 상태 유지 (탭, 마지막 선택 반)',
        'useUserRole 훅 기반 권한 제어',
        'KST 기준 날짜 처리 (dayjs)',
        'CSS 변수 기반 디자인 시스템',
      ],
    },
  ],
};
