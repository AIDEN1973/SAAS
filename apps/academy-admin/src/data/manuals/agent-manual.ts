/**
 * 에이전트 모드 매뉴얼
 *
 * [불변 규칙] 매뉴얼 컨텐츠는 명확하고 이해하기 쉽게 작성합니다.
 */

import type { ManualPage } from '../../types/manual';

export const agentManual: ManualPage = {
  id: 'agent',
  title: '에이전트 모드',
  description: 'AI와 대화하며 학원 운영 업무를 처리하는 에이전트 모드입니다.',
  icon: 'Bot',
  lastUpdated: '2026-01-11',
  sections: [
    {
      id: 'intro',
      title: '이 화면, 언제 사용하나요?',
      type: 'intro',
      intro:
        'AI와 **자연어로 대화하며 학원 운영 업무를 처리**하는 특별한 모드입니다. 화면 상단 오른쪽의 **말풍선 아이콘**을 클릭하거나 **"/agent" 주소**로 접근할 수 있습니다. "오늘 결석한 학생 알려줘", "이번 달 미납 현황 보여줘" 처럼 **일상적인 말로 질문**하면 AI가 정보를 찾아 답변해줍니다. 화면은 **3열 레이아웃**으로 좌측에 대화 히스토리, 중앙에 채팅, 우측에 타임라인이 표시됩니다.',
    },
    {
      id: 'features',
      title: '주요 기능',
      type: 'features',
      features: [
        '자연어 질문 : 일상적인 말로 질문하면 AI가 이해하고 답변',
        '학생 정보 조회 : 특정 학생의 출결, 상담, 청구 정보 등을 질문으로 조회',
        '통계 조회 : 출석률, 수납률, 매출 등 통계 정보를 대화로 확인',
        '대화 히스토리 : 좌측 사이드바에서 이전 대화 세션을 관리하고 전환 가능',
        '새 대화 시작 : 좌측 사이드바의 "새 대화" 버튼으로 새로운 대화 세션 생성',
        '타임라인 통합 : 우측 사이드바에서 최근 시스템 활동을 실시간으로 확인',
        '사이드바 접기 : 좌우 사이드바를 접어서 채팅 영역을 넓게 사용 가능',
      ],
    },
    {
      id: 'steps',
      title: '단계별 사용법',
      type: 'steps',
      stepGuides: [
        {
          title: '에이전트 모드 시작하기',
          steps: [
            { step: 1, content: '화면 상단 오른쪽의 말풍선 아이콘을 클릭합니다.' },
            { step: 2, content: '에이전트 모드 페이지로 이동합니다. 화면이 3열 레이아웃으로 표시됩니다.' },
            { step: 3, content: '중앙 하단의 입력창에 질문을 입력합니다.' },
            { step: 4, content: 'Enter 키를 누르거나 전송 버튼을 클릭하여 질문을 전송합니다.' },
          ],
          alert: {
            type: 'info',
            content: '브라우저 주소창에 "/agent"를 직접 입력해도 에이전트 모드로 진입할 수 있습니다.',
          },
        },
        {
          title: 'AI에게 질문하기',
          steps: [
            { step: 1, content: '입력창에 궁금한 내용을 자연스럽게 입력합니다.' },
            { step: 2, content: '예시: "오늘 결석한 학생 알려줘", "이번 달 매출이 얼마야?", "김철수 학생 출결 현황"' },
            { step: 3, content: 'AI가 질문을 분석하고 관련 정보를 찾아 답변합니다.' },
            { step: 4, content: '필요한 경우 추가 질문을 하여 더 자세한 정보를 얻을 수 있습니다.' },
          ],
        },
        {
          title: '대화 히스토리 관리하기',
          steps: [
            { step: 1, content: '좌측 사이드바에서 이전 대화 목록을 확인합니다.' },
            { step: 2, content: '대화는 "오늘", "어제", "이번 주", "이번 달", "이전"으로 그룹화되어 표시됩니다.' },
            { step: 3, content: '원하는 대화를 클릭하면 해당 대화로 전환됩니다.' },
            { step: 4, content: '대화 항목에 마우스를 올리면 삭제 버튼이 표시됩니다.' },
          ],
          alert: {
            type: 'info',
            content: '좌측 상단의 "새 대화" 버튼을 클릭하면 새로운 대화 세션을 시작할 수 있습니다.',
          },
        },
        {
          title: '타임라인 확인하기',
          steps: [
            { step: 1, content: '우측 사이드바에서 최근 시스템 활동을 확인합니다.' },
            { step: 2, content: '각 활동의 시간, 요약, 상태(성공/실패)가 표시됩니다.' },
            { step: 3, content: '성공은 초록색, 부분 성공은 노란색, 실패는 빨간색 아이콘으로 표시됩니다.' },
          ],
        },
        {
          title: '사이드바 접기/펼치기',
          steps: [
            { step: 1, content: '좌측 사이드바 상단의 화살표(<) 버튼을 클릭하면 히스토리 사이드바가 접힙니다.' },
            { step: 2, content: '우측 사이드바 상단의 화살표(>) 버튼을 클릭하면 타임라인 사이드바가 접힙니다.' },
            { step: 3, content: '접힌 사이드바를 다시 펼치려면 화살표 버튼을 클릭합니다.' },
          ],
          alert: {
            type: 'success',
            content: '사이드바를 접으면 채팅 영역이 넓어져 대화에 집중할 수 있습니다.',
          },
        },
        {
          title: '에이전트 모드 종료하기',
          steps: [
            { step: 1, content: '다른 메뉴를 클릭하면 에이전트 모드가 종료됩니다.' },
            { step: 2, content: '에이전트 모드가 종료되어도 대화 내용은 저장됩니다.' },
            { step: 3, content: '다시 에이전트 모드로 진입하면 이전 대화를 이어갈 수 있습니다.' },
          ],
        },
      ],
    },
    {
      id: 'screen',
      title: '화면 뜯어보기',
      type: 'screen',
      screenGroups: [
        {
          title: '3열 레이아웃 전체 구조',
          items: [
            { title: '좌측 영역', description: '대화 히스토리 사이드바입니다. 이전 대화 세션 목록이 표시됩니다.' },
            { title: '중앙 영역', description: '채팅 패널입니다. AI와 대화하는 메인 영역입니다.' },
            { title: '우측 영역', description: '타임라인 사이드바입니다. 최근 시스템 활동이 표시됩니다.' },
          ],
        },
        {
          title: '좌측 히스토리 사이드바',
          items: [
            { title: '새 대화 버튼', description: '상단에 위치한 버튼입니다. 클릭하면 새로운 대화 세션이 시작됩니다.' },
            { title: '대화 목록', description: '이전 대화 세션들이 날짜별로 그룹화되어 표시됩니다.' },
            { title: '날짜 그룹', description: '"오늘", "어제", "이번 주", "이번 달", "이전"으로 구분됩니다.' },
            { title: '대화 항목', description: '각 대화의 제목이 표시됩니다. 클릭하면 해당 대화로 전환됩니다.' },
            { title: '삭제 버튼', description: '대화 항목에 마우스를 올리면 삭제 버튼이 표시됩니다.' },
            { title: '접기 버튼', description: '상단의 화살표(<) 버튼입니다. 클릭하면 사이드바가 접힙니다.' },
          ],
        },
        {
          title: '중앙 채팅 영역',
          items: [
            { title: '헤더 영역', description: '현재 대화의 제목 또는 "에이전트 모드" 텍스트가 표시됩니다.' },
            { title: '대화 영역', description: '사용자의 질문과 AI의 답변이 대화 형식으로 표시됩니다.' },
            { title: '사용자 메시지', description: '내가 입력한 질문은 오른쪽에 표시됩니다.' },
            { title: 'AI 답변', description: 'AI의 답변은 왼쪽에 표시됩니다.' },
            { title: '로딩 표시', description: 'AI가 답변을 생성하는 동안 로딩 애니메이션이 표시됩니다.' },
            { title: '입력창', description: '하단에 위치한 텍스트 입력 영역입니다. Enter로 전송합니다.' },
            { title: '전송 버튼', description: '입력창 오른쪽의 버튼입니다. 클릭하면 질문이 전송됩니다.' },
          ],
        },
        {
          title: '우측 타임라인 사이드바',
          items: [
            { title: '타임라인 헤더', description: '"타임라인" 제목이 표시됩니다.' },
            { title: '활동 목록', description: '최근 시스템 활동이 시간순으로 표시됩니다.' },
            { title: '활동 항목', description: '각 활동의 시간, 요약, 상태가 표시됩니다.' },
            { title: '상태 아이콘', description: '성공(초록 체크), 부분 성공(노란 경고), 실패(빨간 X)로 표시됩니다.' },
            { title: '접기 버튼', description: '상단의 화살표(>) 버튼입니다. 클릭하면 사이드바가 접힙니다.' },
          ],
        },
        {
          title: '추천 카드',
          items: [
            { title: '카드 제목', description: '추천 작업의 이름입니다. 예: "미납 청구서 확인", "결석 학생 연락"' },
            { title: '카드 설명', description: '왜 이 작업이 필요한지 AI가 분석한 이유가 표시됩니다.' },
            { title: '바로가기 버튼', description: '클릭하면 해당 작업을 수행할 수 있는 페이지로 이동합니다.' },
          ],
        },
      ],
    },
    {
      id: 'tasks',
      title: '처리 가능한 업무',
      type: 'screen',
      screenGroups: [
        {
          title: '학생관리',
          items: [
            { title: '학생 정보 조회', description: '"김철수 학생 정보 알려줘", "3학년 학생 명단", "이번 달 신규 등록 학생"' },
            { title: '학생 검색', description: '"010-1234로 시작하는 학부모 연락처 가진 학생", "홍길동이라는 이름의 학생 찾아줘"' },
            { title: '학생 상태 확인', description: '"현재 재원 중인 학생 수", "이번 달 퇴원한 학생", "휴원 중인 학생 목록"' },
            { title: '학생 히스토리', description: '"김영희 학생 상담 기록", "박민수 학생 메모 내역", "최근 등록된 학생 5명"' },
            { title: '위험 학생 파악', description: '"이탈 위험이 높은 학생", "관리가 필요한 학생", "장기 결석 학생 목록"' },
          ],
        },
        {
          title: '출결관리',
          items: [
            { title: '오늘 출결 현황', description: '"오늘 결석한 학생", "오늘 지각한 학생 명단", "오늘 출석률"' },
            { title: '기간별 출결 조회', description: '"이번 주 결석 현황", "이번 달 지각 많은 학생", "지난 달 출석률 비교"' },
            { title: '학생별 출결 패턴', description: '"김철수 학생 출결 현황", "박영희 학생 이번 달 결석 횟수", "최민수 학생 지각 패턴"' },
            { title: '반별 출결 현황', description: '"수학A반 오늘 출석 현황", "영어B반 이번 주 결석자", "과학반 출석률"' },
            { title: '출결 이상 감지', description: '"연속 결석 학생", "출석률이 낮은 학생", "갑자기 결석이 늘어난 학생"' },
            { title: '출결 통계', description: '"요일별 출석률", "시간대별 지각 현황", "월별 출석률 추이"' },
          ],
        },
        {
          title: '수납관리',
          items: [
            { title: '미납 현황 조회', description: '"이번 달 미납 학생", "미납 금액 총액", "미납 기간이 긴 학생 순서"' },
            { title: '수납률 확인', description: '"이번 달 수납률", "지난 달 대비 수납률", "반별 수납률 비교"' },
            { title: '청구서 현황', description: '"이번 달 청구서 발송 현황", "결제 대기 중인 청구서", "결제 실패한 청구서"' },
            { title: '학생별 수납 정보', description: '"김철수 학생 미납 내역", "박영희 학생 결제 히스토리", "최민수 학생 청구서 상태"' },
            { title: '매출 정보', description: '"이번 달 매출", "지난 달 매출", "월별 매출 추이"' },
            { title: '자동 청구 현황', description: '"자동 청구 설정된 학생 수", "이번 달 자동 청구 예정", "자동 청구 실패 건"' },
          ],
        },
        {
          title: '문자/알림 관리',
          items: [
            { title: '발송 현황 조회', description: '"오늘 발송한 문자", "이번 주 알림톡 발송 건수", "최근 발송 내역"' },
            { title: '발송 실패 확인', description: '"발송 실패한 문자", "전송 오류 내역", "재발송 필요한 건"' },
            { title: '대상자 확인', description: '"결석 알림 발송 대상", "미납 알림 발송할 학부모", "공지 발송 대상 수"' },
            { title: '발송 통계', description: '"월별 문자 발송량", "알림 유형별 발송 현황", "발송 성공률"' },
          ],
        },
        {
          title: '반/수업 관리',
          items: [
            { title: '반 정보 조회', description: '"현재 운영 중인 반 목록", "수학A반 학생 명단", "영어B반 수업 시간"' },
            { title: '반별 현황', description: '"반별 학생 수", "정원 대비 현황", "수업 시간표"' },
            { title: '강사 정보', description: '"김선생님 담당 반", "영어과목 강사 목록", "이번 주 수업 스케줄"' },
            { title: '수업 통계', description: '"과목별 학생 분포", "시간대별 수업 현황", "인기 있는 반"' },
          ],
        },
        {
          title: '통계/분석',
          items: [
            { title: '종합 대시보드', description: '"오늘 학원 현황 요약", "이번 주 주요 지표", "이번 달 종합 리포트"' },
            { title: '학생 통계', description: '"재원생 수 변화 추이", "신규 등록 vs 퇴원 비교", "학년별 학생 분포"' },
            { title: '출결 통계', description: '"월별 평균 출석률", "요일별 출석 패턴", "계절별 출석률 변화"' },
            { title: '수납 통계', description: '"월별 매출 그래프", "수납률 추이", "미납률 변화"' },
            { title: '비교 분석', description: '"전월 대비 실적", "전년 동기 대비", "목표 달성률"' },
            { title: '예측/추천', description: '"이탈 위험 학생 예측", "매출 예측", "관리 필요 학생 추천"' },
          ],
        },
        {
          title: 'AI 분석/인사이트',
          items: [
            { title: '위험도 분석', description: '"위험도 높은 학생 TOP 10", "이탈 가능성 분석", "관심 필요 학생"' },
            { title: '패턴 분석', description: '"학생별 출결 패턴 분석", "수납 지연 패턴", "계절별 등록 패턴"' },
            { title: '추천 업무', description: '"오늘 해야 할 업무 추천", "긴급 처리 필요 건", "놓치기 쉬운 업무"' },
            { title: '이상 감지', description: '"평소와 다른 출결 패턴", "급격한 변화 감지", "주의 필요 상황"' },
          ],
        },
        {
          title: '자동화/설정',
          items: [
            { title: '자동화 현황', description: '"현재 활성화된 자동화 규칙", "자동화 실행 이력", "자동화 설정 상태"' },
            { title: '실행 결과 확인', description: '"오늘 자동 실행된 작업", "자동화 성공/실패 현황", "최근 자동화 로그"' },
            { title: '알림톡 설정', description: '"알림톡 템플릿 현황", "자동 발송 설정 상태", "알림톡 잔여 건수"' },
          ],
        },
      ],
    },
    {
      id: 'tips',
      title: '알아두면 좋은 팁 & 주의사항',
      type: 'screen',
      screenGroups: [
        {
          title: '효과적인 질문 방법',
          items: [
            { title: '구체적으로 질문', description: '"학생 정보"보다 "김철수 학생의 이번 달 출결 현황"처럼 구체적으로 질문하세요.' },
            { title: '한 번에 하나씩', description: '여러 질문을 한 번에 하기보다 하나씩 질문하면 더 정확한 답변을 받을 수 있습니다.' },
            { title: '추가 질문 활용', description: 'AI 답변이 충분하지 않으면 "더 자세히 알려줘"처럼 추가 질문을 하세요.' },
            { title: '기간 명시하기', description: '"이번 달", "지난 주", "오늘"처럼 기간을 명시하면 더 정확한 답변을 받을 수 있습니다.' },
            { title: '조건 추가하기', description: '"결석 3회 이상인 학생", "미납 금액 10만원 이상" 등 조건을 추가하면 원하는 결과를 얻을 수 있습니다.' },
          ],
        },
        {
          title: '자주 사용하는 질문 예시',
          items: [
            { title: '일일 업무', description: '"오늘 출결 현황 알려줘", "오늘 해야 할 일이 뭐야?", "긴급하게 처리할 게 있어?"' },
            { title: '주간 업무', description: '"이번 주 결석 현황 정리해줘", "이번 주 신규 등록 학생", "주간 리포트 보여줘"' },
            { title: '월간 업무', description: '"이번 달 수납률 어때?", "이번 달 매출 현황", "월간 출석률 추이"' },
            { title: '학생 관리', description: '"관리가 필요한 학생 알려줘", "상담 필요한 학생", "연락드려야 할 학부모"' },
          ],
        },
        {
          title: '주의사항',
          items: [
            { title: 'AI 한계', description: 'AI는 시스템에 저장된 데이터를 기반으로 답변합니다. 저장되지 않은 정보는 알 수 없습니다.' },
            { title: '정확성 확인', description: 'AI 답변은 참고용입니다. 중요한 결정은 실제 데이터를 직접 확인하세요.' },
            { title: '개인정보 보호', description: '대화 내용에 민감한 개인정보를 과도하게 입력하지 마세요.' },
            { title: '실시간 데이터', description: '출결, 수납 등의 데이터는 실시간으로 반영되지만, 약간의 지연이 있을 수 있습니다.' },
          ],
        },
      ],
    },
    {
      id: 'mobile',
      title: '모바일/태블릿에서 사용하기',
      type: 'screen',
      screenGroups: [
        {
          title: '모바일에서의 차이점',
          items: [
            { title: '단일 화면', description: '모바일에서는 채팅 영역만 표시되고 사이드바는 숨겨집니다.' },
            { title: '사이드바 접근', description: '상단 메뉴 버튼으로 히스토리/타임라인 사이드바에 접근합니다.' },
            { title: '키보드', description: '입력창을 터치하면 모바일 키보드가 나타납니다.' },
            { title: '스크롤', description: '대화 내용이 많으면 위아래로 스크롤하여 확인합니다.' },
          ],
        },
        {
          title: '태블릿에서의 차이점',
          items: [
            { title: '2열 레이아웃', description: '태블릿에서는 채팅과 히스토리 또는 타임라인이 함께 표시될 수 있습니다.' },
            { title: '가로 모드', description: '가로 모드에서는 PC와 유사한 3열 레이아웃으로 표시됩니다.' },
            { title: '터치 조작', description: '사이드바 접기/펼치기를 터치로 조작할 수 있습니다.' },
          ],
        },
      ],
    },
    {
      id: 'technical',
      title: '기술적 특징',
      type: 'technical',
      technicalFeatures: [
        'AgentModeContainer 컴포넌트 기반 3열 레이아웃',
        'AgentHistorySidebar 컴포넌트로 좌측 대화 히스토리 관리',
        'ChatOpsPanel 컴포넌트로 중앙 채팅 영역 구현',
        'AgentTimelineSidebar 컴포넌트로 우측 타임라인 표시',
        'ChatOpsSession 데이터 구조 기반 대화 세션 관리',
        'useAILayerMenu 훅을 통한 상태 관리',
        '/agent 라우트 기반 URL 영속성 (새로고침해도 유지)',
        'ExecutionAuditRun 기반 타임라인 통합',
        'maskPII 함수를 통한 개인정보 마스킹',
        'CSS 변수 기반 디자인 시스템',
        'React Suspense를 통한 Lazy Loading',
      ],
    },
  ],
};
