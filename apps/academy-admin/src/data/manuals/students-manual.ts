/**
 * 학생관리 페이지 매뉴얼
 *
 * [불변 규칙] 매뉴얼 컨텐츠는 명확하고 이해하기 쉽게 작성합니다.
 */

import type { ManualPage } from '../../types/manual';

export const studentsManual: ManualPage = {
  id: 'students',
  title: '학생관리',
  description: '학생 정보를 등록, 조회, 수정, 삭제하고 학생별 상세 정보를 관리하는 페이지입니다.',
  icon: 'Users',
  lastUpdated: '2026-01-11',
  sections: [
    {
      id: 'intro',
      title: '이 화면, 언제 사용하나요?',
      type: 'intro',
      intro:
        '학원에 다니는 **모든 학생의 정보를 관리**하는 핵심적인 화면입니다. 신규 학생을 등록하고, 기존 학생의 정보를 수정하거나 확인할 수 있습니다. 학생별로 **기본정보, 보호자정보, 상담기록, 태그, 반 배정, 출결기록** 등 다양한 정보를 한 곳에서 통합 관리할 수 있어 효율적인 학원 운영이 가능합니다.',
    },
    {
      id: 'features',
      title: '주요 기능',
      type: 'features',
      features: [
        '학생 목록 조회 : 등록된 전체 학생 목록을 테이블 형태로 확인',
        '학생 검색 : 이름, 전화번호 등으로 특정 학생을 빠르게 찾기',
        '학생 등록 : 신규 학생 정보 입력 및 등록',
        '학생 수정 : 기존 학생의 기본정보, 연락처 등 수정',
        '학생 삭제 : 퇴원 처리를 통한 학생 정보 비활성화',
        '상태별 필터링 : 재원, 휴원, 퇴원, 졸업 상태로 필터링',
        '학년별 필터링 : 특정 학년의 학생만 골라서 보기',
        '반별 필터링 : 특정 반에 배정된 학생만 골라서 보기',
        '태그 필터링 : 특정 태그가 붙은 학생만 골라서 보기',
        '엑셀 내보내기 : 학생 목록을 엑셀 파일로 다운로드',
        '엑셀 일괄 등록 : 양식에 맞춰 작성된 엑셀 파일로 여러 학생 한 번에 등록',
        '학생 상세보기 : 학생 행 클릭 시 상세 정보 패널 열기',
      ],
    },
    {
      id: 'steps',
      title: '단계별 사용법',
      type: 'steps',
      stepGuides: [
        {
          title: '학생 등록하기',
          steps: [
            { step: 1, content: '화면 우측 상단의 "+" 버튼(학생등록)을 클릭합니다.' },
            { step: 2, content: '학생 등록 폼이 나타나면 필수 정보인 "이름"을 입력합니다.' },
            { step: 3, content: '생년월일, 성별, 전화번호, 이메일, 학교, 학년, 주소 등 추가 정보를 입력합니다.' },
            { step: 4, content: '상태는 기본값으로 "재원"이 선택되어 있습니다. 필요시 변경할 수 있습니다.' },
            { step: 5, content: '메모란에 학생에 대한 특이사항을 기록할 수 있습니다.' },
            { step: 6, content: '"저장" 버튼을 클릭하여 학생 정보를 등록합니다.' },
          ],
          alert: {
            type: 'success',
            content: '학생 등록이 완료되면 목록에 새 학생이 추가됩니다.',
          },
        },
        {
          title: '학생 검색하기',
          steps: [
            { step: 1, content: '테이블 상단의 검색창을 클릭합니다.' },
            { step: 2, content: '찾고자 하는 학생의 이름이나 전화번호를 입력합니다.' },
            { step: 3, content: '입력과 동시에 자동으로 학생 목록이 필터링됩니다.' },
            { step: 4, content: '검색어를 지우면 다시 전체 학생 목록이 표시됩니다.' },
          ],
        },
        {
          title: '학생 상세정보 보기',
          steps: [
            { step: 1, content: '학생 목록에서 상세 정보를 확인하고 싶은 학생의 행을 클릭합니다.' },
            { step: 2, content: '화면 우측에 학생 상세 정보 패널이 열립니다.' },
            { step: 3, content: '상단의 탭 버튼을 클릭하여 "학생 기본정보", "보호자 정보", "상담일지", "태그 관리", "반 배정", "출결 기록", "위험도분석", "메시지 발송" 등 원하는 정보로 이동합니다.' },
            { step: 4, content: '패널 외부를 클릭하거나 X 버튼을 클릭하면 패널이 닫힙니다.' },
          ],
        },
        {
          title: '학생 정보 수정하기',
          steps: [
            { step: 1, content: '학생 목록에서 수정하려는 학생의 행을 클릭하여 상세 패널을 엽니다.' },
            { step: 2, content: '기본정보 탭에서 우측 하단의 연필(수정) 아이콘 버튼을 클릭합니다.' },
            { step: 3, content: '수정 폼이 나타나면 변경하고자 하는 정보를 수정합니다.' },
            { step: 4, content: '"저장" 버튼을 클릭하여 변경 내용을 저장합니다.' },
            { step: 5, content: '수정을 취소하려면 "취소" 버튼을 클릭합니다.' },
          ],
        },
        {
          title: '학생 삭제(퇴원 처리)하기',
          steps: [
            { step: 1, content: '학생 목록에서 삭제하려는 학생의 행을 클릭하여 상세 패널을 엽니다.' },
            { step: 2, content: '기본정보 탭에서 우측 하단의 휴지통(삭제) 아이콘 버튼을 클릭합니다.' },
            { step: 3, content: '삭제 확인 팝업이 나타나면 "확인" 버튼을 클릭합니다.' },
            { step: 4, content: '학생이 삭제(퇴원 처리)되고 상세 패널이 닫힙니다.' },
          ],
          alert: {
            type: 'warning',
            content: '학생 삭제는 실제 데이터 삭제가 아닌 "퇴원" 상태로 변경됩니다. 필터에서 "퇴원" 상태를 선택하면 삭제된 학생을 확인할 수 있습니다.',
          },
        },
        {
          title: '필터링 사용하기',
          steps: [
            { step: 1, content: '테이블 상단의 필터 영역을 확인합니다.' },
            { step: 2, content: '"상태" 드롭다운에서 재원, 휴원, 퇴원, 졸업 중 원하는 상태를 선택합니다.' },
            { step: 3, content: '"학년" 드롭다운에서 원하는 학년을 선택합니다.' },
            { step: 4, content: '"반" 드롭다운에서 원하는 반을 선택합니다.' },
            { step: 5, content: '태그 버튼 영역에서 원하는 태그를 클릭하면 해당 태그가 있는 학생만 표시됩니다.' },
            { step: 6, content: '여러 필터를 동시에 적용하면 모든 조건을 만족하는 학생만 표시됩니다.' },
          ],
        },
        {
          title: '엑셀 다운로드하기',
          steps: [
            { step: 1, content: '화면 우측 상단의 다운로드 아이콘 버튼을 클릭합니다.' },
            { step: 2, content: '현재 화면에 표시된 학생 목록이 엑셀 파일로 다운로드됩니다.' },
            { step: 3, content: '다운로드된 파일명은 "학생목록_날짜.xlsx" 형식입니다.' },
          ],
        },
        {
          title: '엑셀로 학생 일괄 등록하기',
          steps: [
            { step: 1, content: '화면 우측 상단의 "양식 다운로드" 아이콘을 클릭하여 등록 양식 엑셀 파일을 받습니다.' },
            { step: 2, content: '다운로드된 양식 파일에 학생 정보를 입력합니다. 각 열의 제목(이름, 생년월일, 성별 등)에 맞게 정보를 입력하세요.' },
            { step: 3, content: '파일을 저장한 후 "업로드" 아이콘을 클릭합니다.' },
            { step: 4, content: '작성한 엑셀 파일을 선택합니다.' },
            { step: 5, content: '파일 업로드가 완료되면 등록 결과 메시지가 표시됩니다.' },
          ],
          alert: {
            type: 'info',
            content: '일괄 등록 시 이름은 필수입니다. 이름이 비어있는 행은 무시됩니다.',
          },
        },
      ],
    },
    {
      id: 'screen',
      title: '화면 뜯어보기',
      type: 'screen',
      screenGroups: [
        {
          title: '상단 영역',
          items: [
            { title: '페이지 제목', description: '"학생관리"라는 페이지 제목이 좌측 상단에 표시됩니다.' },
            { title: '학생등록 버튼', description: '"+" 아이콘 버튼으로, 클릭하면 새 학생 등록 폼이 나타납니다.' },
            { title: '업로드 버튼', description: '엑셀 파일을 업로드하여 여러 학생을 한 번에 등록할 수 있습니다.' },
            { title: '다운로드 버튼', description: '현재 표시된 학생 목록을 엑셀 파일로 다운로드합니다.' },
            { title: '양식 다운로드 버튼', description: '일괄 등록용 엑셀 양식 파일을 다운로드합니다.' },
          ],
        },
        {
          title: '태그 필터 영역',
          items: [
            { title: '태그 라벨', description: '"태그"라는 검은색 라벨이 표시되어 태그 필터 영역임을 알려줍니다.' },
            { title: '태그 버튼', description: '등록된 태그들이 버튼 형태로 나열됩니다. 클릭하면 해당 태그가 선택되고 관련 학생만 필터링됩니다.' },
            { title: '펼치기/접기 버튼', description: '태그가 많아 한 줄을 넘을 경우, 화살표 버튼으로 태그 목록을 펼치거나 접을 수 있습니다.' },
          ],
        },
        {
          title: '필터 및 검색 영역',
          items: [
            { title: '검색창', description: '학생 이름이나 전화번호를 입력하면 즉시 해당 학생만 화면에 표시됩니다.' },
            { title: '상태 필터', description: '"상태" 드롭다운에서 재원/휴원/퇴원/졸업 상태로 필터링할 수 있습니다.' },
            { title: '학년 필터', description: '"학년" 드롭다운에서 특정 학년의 학생만 볼 수 있습니다.' },
            { title: '반 필터', description: '"반" 드롭다운에서 특정 반에 배정된 학생만 볼 수 있습니다.' },
          ],
        },
        {
          title: '학생 목록 테이블',
          items: [
            { title: '테이블 헤더', description: '이름, 전화번호, 학교, 학년, 상태 등 열 제목이 표시됩니다.' },
            { title: '학생 행', description: '각 학생의 정보가 한 줄씩 표시됩니다. 행을 클릭하면 상세 정보 패널이 열립니다.' },
            { title: '페이지네이션', description: '테이블 하단에 페이지 번호가 표시됩니다. 한 페이지에 10명씩 표시되며, 페이지 번호를 클릭하여 이동할 수 있습니다.' },
          ],
        },
        {
          title: '학생 상세 정보 패널 (우측 레이어)',
          items: [
            { title: '패널 헤더', description: '선택된 학생의 이름과 "학생 상세정보" 텍스트가 표시됩니다.' },
            { title: '탭 버튼 영역', description: '기본정보, 보호자정보, 상담일지, 태그관리, 반 배정, 출결기록, 위험도분석, 메시지발송 탭 버튼이 나열됩니다.' },
            { title: '탭 콘텐츠 영역', description: '선택된 탭에 따라 해당 정보가 표시됩니다.' },
            { title: '닫기 버튼', description: '패널 우측 상단의 X 버튼을 클릭하면 패널이 닫힙니다.' },
          ],
        },
      ],
    },
    {
      id: 'detail-tabs',
      title: '학생 상세정보 탭별 안내',
      type: 'screen',
      screenGroups: [
        {
          title: '기본정보 탭',
          items: [
            { title: '학생 기본정보', description: '이름, 생년월일, 성별, 전화번호, 이메일, 학교, 학년, 상태, 주소, 메모 정보가 표시됩니다.' },
            { title: '수정 버튼', description: '연필 아이콘을 클릭하면 정보를 수정할 수 있는 폼으로 전환됩니다.' },
            { title: '삭제 버튼', description: '휴지통 아이콘을 클릭하면 학생을 삭제(퇴원 처리)합니다.' },
          ],
        },
        {
          title: '보호자정보 탭',
          items: [
            { title: '보호자 목록', description: '등록된 보호자들이 카드 형태로 표시됩니다. 이름, 관계(부모/보호자/기타), 전화번호, 이메일, 주 보호자 여부, 메모가 표시됩니다.' },
            { title: '보호자 추가 버튼', description: '"+" 아이콘을 클릭하여 새 보호자를 등록할 수 있습니다.' },
            { title: '수정/삭제 버튼', description: '각 보호자 카드 하단에서 수정(연필 아이콘) 또는 삭제(휴지통 아이콘)할 수 있습니다.' },
            { title: '주 보호자 설정', description: '보호자 등록/수정 시 "주 보호자" 체크박스를 선택하면 해당 보호자가 주 보호자로 설정됩니다. 주 보호자는 1명만 가능하며, 새 주 보호자 지정 시 기존 주 보호자는 자동으로 해제됩니다.' },
          ],
        },
        {
          title: '상담일지 탭',
          items: [
            { title: '상담일지 목록', description: '등록된 상담일지가 카드 형태로 표시됩니다. 상담일, 유형(상담일지/학습일지/행동일지/기타), 내용이 표시됩니다.' },
            { title: '상담일지 추가 버튼', description: '"+" 아이콘을 클릭하여 새 상담일지를 등록할 수 있습니다.' },
            { title: 'AI 요약 기능', description: '새로고침 아이콘을 클릭하면 AI가 상담 내용을 자동으로 요약해줍니다. 이미 요약이 있는 경우 재생성됩니다.' },
            { title: '수정/삭제 버튼', description: '각 상담일지 카드 하단에서 수정(연필 아이콘) 또는 삭제(휴지통 아이콘)할 수 있습니다.' },
          ],
        },
        {
          title: '태그관리 탭',
          items: [
            { title: '할당된 태그', description: '현재 학생에게 할당된 태그들이 배지 형태로 표시됩니다. 각 태그는 고유한 색상을 가집니다.' },
            { title: '태그 추가 버튼', description: '"+" 아이콘을 클릭하여 새 태그를 생성하고 즉시 학생에게 할당할 수 있습니다. 쉼표로 구분하여 여러 태그를 한 번에 생성할 수 있습니다.' },
            { title: '태그 수정 버튼', description: '연필 아이콘을 클릭하면 전체 태그 목록에서 원하는 태그를 선택/해제할 수 있습니다.' },
            { title: '태그 즉시 적용', description: '일반 모드에서 태그를 클릭하면 즉시 할당/해제됩니다. 별도로 저장 버튼을 누를 필요가 없습니다.' },
          ],
        },
        {
          title: '반 배정 탭',
          items: [
            { title: '배정된 반 목록', description: '학생이 현재 배정된 반들이 표시됩니다. 반명, 과목, 대상, 요일, 시간, 강의실, 배정일 정보가 표시됩니다.' },
            { title: '반 배정 버튼', description: '"+" 아이콘을 클릭하여 학생을 새 반에 배정할 수 있습니다. 이미 배정된 반은 목록에서 제외됩니다.' },
            { title: '반 제외 버튼', description: '휴지통 아이콘을 클릭하면 해당 반에서 학생을 제외합니다.' },
            { title: '배정일 수정', description: '연필 아이콘을 클릭하면 배정일을 수정하거나 다른 반으로 이동할 수 있습니다.' },
          ],
        },
        {
          title: '출결기록 탭',
          items: [
            { title: '출결 통계', description: '최근 30일간의 출결 통계가 표시됩니다. 출석률(%), 총 출결 횟수, 출석/지각/결석 횟수가 표시됩니다.' },
            { title: '최근 출결내역', description: '최근 10건의 출결 기록이 시간순으로 표시됩니다. 각 기록에는 상태(출석/지각/결석), 유형(등원/하원), 시간이 표시됩니다.' },
            { title: '출결 기록 추가', description: '"+" 아이콘을 클릭하여 수동으로 출결 기록을 추가할 수 있습니다. 반, 시간, 유형, 상태, 메모를 입력할 수 있습니다.' },
            { title: '출결 기록 수정', description: '연필 아이콘을 클릭하면 기존 출결 기록을 선택하여 수정할 수 있습니다.' },
          ],
        },
        {
          title: '위험도분석 탭',
          items: [
            { title: '위험도 분석', description: '학생의 출결 패턴, 상담 기록 등을 분석하여 이탈 위험도를 표시합니다.' },
            { title: '위험 요소', description: '감지된 위험 요소들이 목록으로 표시됩니다.' },
          ],
        },
        {
          title: '메시지발송 탭',
          items: [
            { title: '메시지 발송', description: '학생 또는 보호자에게 문자/알림톡을 발송할 수 있습니다.' },
            { title: '발송 대상 선택', description: '학생 본인 또는 등록된 보호자 중 발송 대상을 선택합니다.' },
            { title: '메시지 내용', description: '발송할 메시지 내용을 입력합니다.' },
          ],
        },
      ],
    },
    {
      id: 'tips',
      title: '알아두면 좋은 팁 & 주의사항',
      type: 'screen',
      screenGroups: [
        {
          title: '꼭 알아야 할 주의사항',
          items: [
            { title: '삭제는 퇴원 처리', description: '학생을 삭제하면 실제로 데이터가 삭제되는 것이 아니라 "퇴원" 상태로 변경됩니다. 상태 필터에서 "퇴원"을 선택하면 삭제된 학생을 확인할 수 있습니다.' },
            { title: '필수 입력 정보', description: '학생 등록 시 "이름"은 필수입니다. 다른 정보는 선택적으로 입력할 수 있습니다.' },
            { title: '주 보호자는 1명', description: '주 보호자는 학생당 1명만 설정할 수 있습니다. 새로운 주 보호자를 지정하면 기존 주 보호자는 자동으로 해제됩니다.' },
            { title: '권한에 따른 제한', description: 'Teacher나 Assistant 역할인 경우 일부 기능(삭제, 태그관리, 반 배정 등)이 제한될 수 있습니다.' },
          ],
        },
        {
          title: '효율적으로 사용하는 팁',
          items: [
            { title: '태그 활용', description: '학생들을 분류하는 태그를 활용하면 특정 그룹의 학생을 빠르게 찾을 수 있습니다. 예: "수학특강", "신규학생", "장학생" 등' },
            { title: '엑셀 일괄 등록', description: '많은 학생을 등록할 때는 엑셀 양식을 다운받아 입력한 후 일괄 업로드하면 시간을 절약할 수 있습니다.' },
            { title: '필터 조합', description: '상태, 학년, 반, 태그 필터를 조합하면 원하는 학생 그룹을 정확하게 찾을 수 있습니다.' },
            { title: '검색 활용', description: '학생 이름이나 전화번호를 알고 있다면 검색창에 바로 입력하여 빠르게 찾을 수 있습니다.' },
            { title: 'AI 상담 요약', description: '긴 상담 내용을 기록한 후 AI 요약 기능을 사용하면 핵심 내용을 빠르게 파악할 수 있습니다.' },
            { title: '출결 기록 확인', description: '학생 상세정보의 출결기록 탭에서 최근 30일간의 출석 현황을 한눈에 파악할 수 있습니다.' },
          ],
        },
        {
          title: '문제 해결',
          items: [
            { title: '학생이 보이지 않아요', description: '상태 필터가 "재원"으로 되어 있을 수 있습니다. 필터를 해제하거나 "전체"로 변경해보세요.' },
            { title: '태그가 보이지 않아요', description: '태그 목록이 접혀 있을 수 있습니다. 화살표 버튼을 클릭하여 펼쳐보세요.' },
            { title: '수정 버튼이 없어요', description: '역할에 따라 수정 권한이 제한될 수 있습니다. 관리자에게 문의하세요.' },
            { title: '엑셀 업로드가 안 돼요', description: '양식이 올바른지 확인하세요. 반드시 다운받은 양식 파일을 사용하고, 열 제목을 변경하지 마세요.' },
            { title: '저장이 안 돼요', description: '인터넷 연결을 확인하고, 새로고침 후 다시 시도해보세요. 문제가 지속되면 관리자에게 문의하세요.' },
          ],
        },
      ],
    },
    {
      id: 'mobile',
      title: '모바일/태블릿에서 사용하기',
      type: 'screen',
      screenGroups: [
        {
          title: '모바일에서의 차이점',
          items: [
            { title: '등록 폼', description: '학생 등록 폼이 화면 하단에서 올라오는 드로어 형태로 표시됩니다.' },
            { title: '상세 정보 패널', description: '학생 상세 정보가 전체 화면을 덮는 형태로 표시됩니다.' },
            { title: '테이블 스크롤', description: '테이블이 좌우로 스크롤됩니다. 손가락으로 밀어서 숨겨진 열을 확인하세요.' },
            { title: '탭 버튼', description: '상세 정보 패널의 탭 버튼이 여러 줄로 표시될 수 있습니다.' },
          ],
        },
        {
          title: '태블릿에서의 차이점',
          items: [
            { title: '등록 폼', description: '학생 등록 폼이 우측에서 슬라이드되어 나타나는 드로어 형태로 표시됩니다.' },
            { title: '상세 정보 패널', description: '화면 우측에 넓은 패널로 표시되어 테이블과 상세 정보를 동시에 볼 수 있습니다.' },
            { title: '2열 레이아웃', description: '폼과 정보 표시가 2열 레이아웃으로 표시되어 가독성이 좋습니다.' },
          ],
        },
      ],
    },
    {
      id: 'technical',
      title: '기술적 특징',
      type: 'technical',
      technicalFeatures: [
        'React Query 기반 데이터 캐싱 및 자동 리페칭',
        'SDUI(Schema-Driven UI) 기반 동적 폼 생성',
        'SchemaTable 기반 자동 테이블 렌더링 및 페이지네이션',
        'RightLayerMenuLayout 기반 우측 상세 패널',
        'useResponsiveMode 훅 기반 반응형 레이아웃',
        'Industry Adapter 기반 용어 자동 변환',
        'XLSX 라이브러리 기반 엑셀 내보내기/가져오기',
        'React Router 기반 URL 파라미터 동기화',
        'useUserRole 훅 기반 권한 제어',
        'KST 기준 날짜 처리 (dayjs)',
        'CSS 변수 기반 디자인 시스템',
        'Zero-Trust 보안: UI에서 tenantId 직접 전달 금지',
      ],
    },
  ],
};
