/**
 * 알림톡 설정 페이지 매뉴얼
 *
 * [불변 규칙] 매뉴얼 컨텐츠는 명확하고 이해하기 쉽게 작성합니다.
 */

import type { ManualPage } from '../../types/manual';

export const alimtalkManual: ManualPage = {
  id: 'alimtalk',
  title: '알림톡 설정',
  description: '카카오 알림톡 발송을 위한 채널 인증, 템플릿 관리, 발송 내역 조회 등을 설정하는 페이지입니다.',
  icon: 'MessageSquare',
  lastUpdated: '2026-01-11',
  sections: [
    {
      id: 'intro',
      title: '이 화면, 언제 사용하나요?',
      type: 'intro',
      intro:
        '카카오 알림톡을 통해 **학부모에게 자동 알림 메시지**를 보내기 위한 설정 화면입니다. 좌측 메뉴에서 **"더보기" → "알림톡 설정"**을 클릭하여 접근합니다. 출결 알림, 수업 안내 등을 카카오톡으로 자동 발송하려면 이 화면에서 **카카오 채널 인증**과 **템플릿 등록**을 먼저 완료해야 합니다. 연동 상태 확인, 발송 내역 조회, 잔여 포인트 관리까지 알림톡 관련 모든 설정을 이 화면에서 할 수 있습니다.',
    },
    {
      id: 'features',
      title: '주요 기능',
      type: 'features',
      features: [
        '연동 상태 확인 : 알림톡 서비스 연동 상태와 테스트/운영 모드 확인',
        '채널 인증 요청 : 카카오채널 ID와 전화번호로 발신 프로필 인증 요청',
        '채널 목록 조회 : 등록된 카카오채널 목록 및 승인 상태 확인',
        '템플릿 등록 : 알림톡 발송에 사용할 메시지 템플릿 새로 등록',
        '템플릿 수정 : 기존 템플릿 내용 및 설정 수정',
        '템플릿 삭제 : 불필요한 템플릿 삭제 (공유 템플릿 제외)',
        '템플릿 검수 요청 : 카카오 승인을 위한 템플릿 검수 요청',
        '발송 내역 조회 : 알림톡/친구톡 발송 기록 조회',
        '예약 발송 취소 : 예약된 발송 건 취소',
        '잔여 포인트 확인 : 알림톡, 친구톡 발송 가능 잔여 건수 확인',
      ],
    },
    {
      id: 'steps',
      title: '단계별 사용법',
      type: 'steps',
      stepGuides: [
        {
          title: '처음 시작하기 - 알림톡 연동 설정',
          steps: [
            { step: 1, content: '화면 상단의 "연동 상태" 탭을 클릭합니다.' },
            { step: 2, content: '연동 상태가 "연동 필요"로 표시되면 환경 변수 설정이 필요합니다.' },
            { step: 3, content: '관리자에게 알리고 API Key, User ID, 카카오 발신 프로필 키 등의 환경 변수 설정을 요청하세요.' },
            { step: 4, content: '환경 변수 설정이 완료되면 "새로고침" 버튼을 클릭하여 연동 상태를 확인합니다.' },
            { step: 5, content: '"연동 완료"로 표시되면 알림톡 사용 준비가 완료된 것입니다.' },
          ],
          alert: {
            type: 'info',
            content: '연동 완료 후에도 "테스트 모드"로 표시되면 실제 발송은 되지 않습니다. 운영 모드로 전환하려면 환경 변수에서 KAKAO_ALIGO_TEST_MODE를 false로 설정해야 합니다.',
          },
        },
        {
          title: '카카오채널 인증하기',
          steps: [
            { step: 1, content: '"채널 관리" 탭을 클릭합니다.' },
            { step: 2, content: '"채널 인증 요청" 영역에서 카카오채널 ID를 입력합니다. 채널 ID는 @로 시작합니다. (예: @우리학원)' },
            { step: 3, content: '인증받을 전화번호를 입력합니다. 이 번호로 카카오톡 인증 메시지가 발송됩니다.' },
            { step: 4, content: '"인증 요청" 버튼을 클릭합니다.' },
            { step: 5, content: '확인 팝업에서 "확인"을 클릭하면 해당 전화번호로 카카오톡 인증 메시지가 발송됩니다.' },
            { step: 6, content: '카카오톡에서 받은 인증 메시지를 확인하고 인증을 완료합니다.' },
            { step: 7, content: '"등록된 채널 목록"에서 채널 상태가 "승인"으로 변경되었는지 확인합니다.' },
          ],
          alert: {
            type: 'warning',
            content: '채널 인증은 카카오 정책에 따라 시간이 소요될 수 있습니다. 상태가 "대기"인 경우 카카오 측 승인을 기다려 주세요.',
          },
        },
        {
          title: '알림톡 템플릿 등록하기',
          steps: [
            { step: 1, content: '"템플릿 관리" 탭을 클릭합니다.' },
            { step: 2, content: '우측 상단의 "템플릿 등록" 버튼을 클릭합니다.' },
            { step: 3, content: '템플릿 이름을 입력합니다. (예: 출석 알림, 수업 안내 등) 최대 150자까지 입력 가능합니다.' },
            { step: 4, content: '템플릿 내용을 입력합니다. 변수는 #{변수명} 형식으로 사용합니다. (예: #{고객명}님, 오늘 수업이 있습니다.)' },
            { step: 5, content: '메시지 유형을 선택합니다. 기본형, 부가정보형, 광고추가형, 복합형 중에서 선택합니다.' },
            { step: 6, content: '강조 표기를 설정합니다. 없음, 텍스트, 이미지, 아이템 리스트 중에서 선택합니다.' },
            { step: 7, content: '텍스트 강조를 선택한 경우 강조 제목과 부제목을 입력합니다.' },
            { step: 8, content: '"등록" 버튼을 클릭하여 템플릿을 저장합니다.' },
          ],
          alert: {
            type: 'info',
            content: '템플릿 등록 후 바로 사용할 수 없습니다. 카카오 검수를 요청하고 승인을 받아야 알림톡 발송이 가능합니다.',
          },
        },
        {
          title: '템플릿 검수 요청하기',
          steps: [
            { step: 1, content: '"템플릿 관리" 탭에서 검수 요청할 템플릿을 찾습니다.' },
            { step: 2, content: '해당 템플릿의 "작업" 열에서 발송 아이콘(종이비행기 모양)을 클릭합니다.' },
            { step: 3, content: '확인 팝업에서 "확인"을 클릭합니다.' },
            { step: 4, content: '검수 요청이 완료되면 템플릿 상태가 "검수중"으로 변경됩니다.' },
            { step: 5, content: '카카오 검수 완료 후 상태가 "승인"으로 변경되면 해당 템플릿으로 알림톡 발송이 가능합니다.' },
          ],
          alert: {
            type: 'warning',
            content: '템플릿 검수는 4~5일 정도 소요됩니다. 이미 승인된 템플릿은 검수 요청 버튼이 표시되지 않습니다.',
          },
        },
        {
          title: '템플릿 수정하기',
          steps: [
            { step: 1, content: '"템플릿 관리" 탭에서 수정할 템플릿을 찾습니다.' },
            { step: 2, content: '해당 템플릿의 "작업" 열에서 수정 아이콘(연필 모양)을 클릭합니다.' },
            { step: 3, content: '화면 상단에 템플릿 수정 폼이 나타납니다.' },
            { step: 4, content: '템플릿 이름, 내용, 메시지 유형, 강조 표기 등을 수정합니다.' },
            { step: 5, content: '"수정" 버튼을 클릭하여 변경 사항을 저장합니다.' },
            { step: 6, content: '수정 후에는 다시 검수 요청이 필요할 수 있습니다.' },
          ],
        },
        {
          title: '템플릿 삭제하기',
          steps: [
            { step: 1, content: '"템플릿 관리" 탭에서 삭제할 템플릿을 찾습니다.' },
            { step: 2, content: '해당 템플릿의 "작업" 열에서 삭제 아이콘(휴지통 모양)을 클릭합니다.' },
            { step: 3, content: '확인 팝업에서 "확인"을 클릭합니다.' },
            { step: 4, content: '삭제가 완료되면 템플릿 목록에서 해당 템플릿이 제거됩니다.' },
          ],
          alert: {
            type: 'error',
            content: '공유 템플릿(코드가 D 또는 P로 시작)은 삭제할 수 없습니다. 삭제된 템플릿은 복구할 수 없으니 신중하게 삭제하세요.',
          },
        },
        {
          title: '발송 내역 확인하기',
          steps: [
            { step: 1, content: '"발송 내역" 탭을 클릭합니다.' },
            { step: 2, content: '알림톡/친구톡 발송 기록 목록이 표시됩니다.' },
            { step: 3, content: '각 발송 건의 메시지 ID, 유형, 발송 건수, 상태, 예약일, 등록일을 확인할 수 있습니다.' },
            { step: 4, content: '페이지 하단의 이전/다음 버튼으로 이전 발송 내역을 조회할 수 있습니다.' },
            { step: 5, content: '새로고침 버튼을 클릭하면 최신 발송 내역을 불러옵니다.' },
          ],
        },
        {
          title: '예약 발송 취소하기',
          steps: [
            { step: 1, content: '"발송 내역" 탭에서 취소할 예약 발송 건을 찾습니다.' },
            { step: 2, content: '상태가 "예약"으로 표시된 발송 건만 취소가 가능합니다.' },
            { step: 3, content: '해당 발송 건의 "작업" 열에서 "취소" 버튼을 클릭합니다.' },
            { step: 4, content: '확인 팝업에서 "확인"을 클릭합니다.' },
            { step: 5, content: '취소가 완료되면 해당 발송 건이 목록에서 제거되거나 상태가 변경됩니다.' },
          ],
          alert: {
            type: 'warning',
            content: '이미 발송 완료된 건은 취소할 수 없습니다. 예약 상태인 건만 취소가 가능합니다.',
          },
        },
        {
          title: '잔여 포인트 확인하기',
          steps: [
            { step: 1, content: '"잔여 포인트" 탭을 클릭합니다.' },
            { step: 2, content: '알림톡, 친구톡(텍스트), 친구톡(이미지), 친구톡(와이드) 각각의 잔여 건수가 카드 형태로 표시됩니다.' },
            { step: 3, content: '새로고침 버튼을 클릭하면 최신 잔여 포인트 정보를 불러옵니다.' },
            { step: 4, content: '포인트 충전이 필요한 경우 안내된 알리고 웹사이트 링크를 클릭하여 충전 페이지로 이동합니다.' },
          ],
          alert: {
            type: 'info',
            content: '잔여 포인트가 부족하면 알림톡이 발송되지 않습니다. 포인트 잔액을 주기적으로 확인하세요.',
          },
        },
      ],
    },
    {
      id: 'screen',
      title: '화면 뜯어보기',
      type: 'screen',
      screenGroups: [
        {
          title: '상단 탭 메뉴',
          items: [
            { title: '연동 상태', description: '알림톡 서비스 연동 상태와 환경 변수 설정 안내를 확인하는 탭입니다.' },
            { title: '채널 관리', description: '카카오채널 인증 요청과 등록된 채널 목록을 관리하는 탭입니다.' },
            { title: '템플릿 관리', description: '알림톡 메시지 템플릿을 등록, 수정, 삭제, 검수 요청하는 탭입니다.' },
            { title: '발송 내역', description: '알림톡/친구톡 발송 기록을 조회하고 예약 발송을 취소하는 탭입니다.' },
            { title: '잔여 포인트', description: '발송 가능한 잔여 포인트(건수)를 확인하는 탭입니다.' },
          ],
        },
        {
          title: '연동 상태 탭',
          items: [
            { title: '연동 상태 표시', description: '"연동 완료" 또는 "연동 필요"로 현재 알림톡 서비스 연동 상태가 표시됩니다.' },
            { title: '모드 표시', description: '"테스트 모드" 또는 "운영 모드"가 표시됩니다. 테스트 모드에서는 실제 발송이 되지 않습니다.' },
            { title: '환경 변수 안내', description: '알림톡 연동에 필요한 환경 변수 목록과 설명이 표시됩니다.' },
            { title: '새로고침 버튼', description: '연동 상태를 다시 확인합니다.' },
          ],
        },
        {
          title: '채널 관리 탭',
          items: [
            { title: '카카오채널 ID 입력', description: '@로 시작하는 카카오채널 ID를 입력합니다. (예: @우리학원)' },
            { title: '전화번호 입력', description: '인증 메시지를 받을 전화번호를 입력합니다.' },
            { title: '인증 요청 버튼', description: '입력한 정보로 채널 인증을 요청합니다.' },
            { title: '채널 목록 테이블', description: '등록된 채널의 채널명, Sender Key, 상태, 알림톡 사용 여부, 등록일이 표시됩니다.' },
            { title: '상태 배지', description: '"승인"은 사용 가능, "대기"는 심사 중을 의미합니다.' },
          ],
        },
        {
          title: '템플릿 관리 탭',
          items: [
            { title: '템플릿 등록 버튼', description: '새 템플릿을 등록하는 폼을 엽니다.' },
            { title: '템플릿 목록 테이블', description: '등록된 템플릿의 코드, 이름, 메시지 유형, 상태, 등록일이 표시됩니다.' },
            { title: '메시지 유형', description: '기본형, 부가정보형, 광고추가형, 복합형 중 템플릿의 유형이 표시됩니다.' },
            { title: '상태 배지', description: '"승인"은 사용 가능, "대기"는 검수 전, "검수중"은 심사 중, "중단"은 사용 불가를 의미합니다.' },
            { title: '수정 버튼', description: '해당 템플릿을 수정하는 폼을 엽니다.' },
            { title: '검수 요청 버튼', description: '승인되지 않은 템플릿에 대해 카카오 검수를 요청합니다.' },
            { title: '삭제 버튼', description: '해당 템플릿을 삭제합니다. 공유 템플릿은 삭제할 수 없습니다.' },
          ],
        },
        {
          title: '템플릿 등록/수정 폼',
          items: [
            { title: '템플릿 이름', description: '템플릿을 구분하기 위한 이름을 입력합니다. 최대 150자까지 가능합니다.' },
            { title: '템플릿 내용', description: '실제 발송될 메시지 내용을 입력합니다. 최대 1000자까지 가능합니다.' },
            { title: '변수 입력 방법', description: '#{변수명} 형식으로 입력합니다. (예: #{고객명}, #{수업시간})' },
            { title: '메시지 유형 선택', description: '기본형, 부가정보형, 광고추가형, 복합형 중에서 선택합니다.' },
            { title: '강조 표기 선택', description: '없음, 텍스트, 이미지, 아이템 리스트 중에서 선택합니다.' },
            { title: '강조 제목/부제목', description: '강조 표기가 "텍스트"인 경우에만 입력 필드가 나타납니다.' },
            { title: '취소 버튼', description: '입력을 취소하고 폼을 닫습니다.' },
            { title: '등록/수정 버튼', description: '입력한 내용으로 템플릿을 저장합니다.' },
          ],
        },
        {
          title: '발송 내역 탭',
          items: [
            { title: '발송 목록 테이블', description: '메시지 ID, 유형, 발송 건수, 상태, 예약일, 등록일이 표시됩니다.' },
            { title: '유형 표시', description: '"알림톡" 또는 "친구톡"으로 발송 유형이 표시됩니다.' },
            { title: '상태 배지', description: '"완료"는 발송 완료, "예약"은 예약 대기 중, "실패"는 발송 실패를 의미합니다.' },
            { title: '취소 버튼', description: '예약 상태인 발송 건에만 표시됩니다. 클릭하면 예약을 취소합니다.' },
            { title: '페이지 이동', description: '이전/다음 버튼으로 발송 내역 페이지를 이동합니다.' },
          ],
        },
        {
          title: '잔여 포인트 탭',
          items: [
            { title: '알림톡 잔여 건수', description: '알림톡 발송 가능한 잔여 건수가 표시됩니다.' },
            { title: '친구톡(텍스트) 잔여 건수', description: '텍스트 친구톡 발송 가능한 잔여 건수가 표시됩니다.' },
            { title: '친구톡(이미지) 잔여 건수', description: '이미지 친구톡 발송 가능한 잔여 건수가 표시됩니다.' },
            { title: '친구톡(와이드) 잔여 건수', description: '와이드 친구톡 발송 가능한 잔여 건수가 표시됩니다.' },
            { title: '포인트 충전 안내', description: '알리고 웹사이트 링크가 제공되며 클릭하면 충전 페이지로 이동합니다.' },
          ],
        },
      ],
    },
    {
      id: 'tips',
      title: '알아두면 좋은 팁 & 주의사항',
      type: 'screen',
      screenGroups: [
        {
          title: '꼭 알아야 할 주의사항',
          items: [
            { title: '환경 변수 필수', description: '알림톡을 사용하려면 관리자가 환경 변수를 먼저 설정해야 합니다. KAKAO_ALIGO_API_KEY, KAKAO_ALIGO_USER_ID 등이 필요합니다.' },
            { title: '채널 인증 필수', description: '카카오채널 인증이 완료되어야 알림톡 발송이 가능합니다. 인증은 카카오톡에서 진행됩니다.' },
            { title: '템플릿 검수 필수', description: '등록한 템플릿은 카카오 검수를 통과해야 사용할 수 있습니다. 검수는 4~5일 정도 소요됩니다.' },
            { title: '공유 템플릿 삭제 불가', description: '템플릿 코드가 D 또는 P로 시작하는 공유 템플릿은 수정은 가능하지만 삭제할 수 없습니다.' },
            { title: '포인트 충전 필요', description: '잔여 포인트가 없으면 알림톡이 발송되지 않습니다. 알리고 웹사이트에서 포인트를 충전하세요.' },
            { title: '테스트 모드 주의', description: '테스트 모드에서는 실제 알림톡이 발송되지 않습니다. 운영 전 반드시 모드를 확인하세요.' },
          ],
        },
        {
          title: '효율적으로 사용하는 팁',
          items: [
            { title: '변수 활용', description: '템플릿에 #{고객명}, #{수업시간} 등의 변수를 사용하면 발송 시 자동으로 실제 값으로 치환됩니다.' },
            { title: '템플릿 미리 준비', description: '검수에 시간이 걸리므로 실제 사용 전에 미리 템플릿을 등록하고 검수 요청을 해두세요.' },
            { title: '발송 내역 확인', description: '발송 후 발송 내역 탭에서 상태를 확인하면 실패한 건을 파악할 수 있습니다.' },
            { title: '포인트 잔액 주기적 확인', description: '포인트가 부족하면 알림이 발송되지 않으므로 정기적으로 잔액을 확인하세요.' },
            { title: '메시지 유형 선택', description: '단순 안내는 "기본형", 추가 정보가 필요하면 "부가정보형", 광고 문구 포함 시 "광고추가형"을 선택하세요.' },
          ],
        },
        {
          title: '문제 해결',
          items: [
            { title: '연동 필요 표시', description: '환경 변수가 설정되지 않았습니다. 관리자에게 환경 변수 설정을 요청하세요.' },
            { title: '채널 인증 실패', description: '카카오채널 ID가 올바른지 확인하세요. @로 시작해야 합니다. 전화번호도 정확히 입력했는지 확인하세요.' },
            { title: '템플릿 검수 반려', description: '카카오 가이드라인에 맞게 템플릿 내용을 수정한 후 다시 검수 요청하세요.' },
            { title: '발송 실패', description: '잔여 포인트를 확인하고, 수신자 전화번호가 올바른지 확인하세요. 카카오톡 미사용자에게는 발송되지 않을 수 있습니다.' },
            { title: '채널 상태가 대기 중', description: '카카오 측 승인이 진행 중입니다. 승인까지 시간이 소요될 수 있으니 기다려 주세요.' },
          ],
        },
      ],
    },
    {
      id: 'mobile',
      title: '모바일/태블릿에서 사용하기',
      type: 'screen',
      screenGroups: [
        {
          title: '모바일에서의 차이점',
          items: [
            { title: '탭 메뉴 스크롤', description: '화면이 좁아 탭 메뉴가 가로 스크롤로 표시됩니다. 좌우로 스와이프하여 원하는 탭을 선택하세요.' },
            { title: '테이블 가로 스크롤', description: '템플릿 목록, 발송 내역 등의 테이블은 가로 스크롤로 전체 내용을 확인할 수 있습니다.' },
            { title: '폼 입력', description: '템플릿 등록/수정 시 화면이 세로로 길게 표시되며, 스크롤하여 모든 입력 필드를 확인할 수 있습니다.' },
            { title: '포인트 카드 배치', description: '잔여 포인트 카드가 세로로 쌓여서 표시됩니다.' },
          ],
        },
        {
          title: '태블릿에서의 차이점',
          items: [
            { title: '2열 카드 표시', description: '잔여 포인트 탭에서 카드가 2열로 표시되어 한눈에 확인하기 편합니다.' },
            { title: '넓은 입력 영역', description: '템플릿 내용 입력 시 더 넓은 영역을 사용할 수 있어 편리합니다.' },
            { title: '테이블 전체 표시', description: '화면이 넓어 테이블의 모든 열이 스크롤 없이 표시될 수 있습니다.' },
          ],
        },
      ],
    },
    {
      id: 'technical',
      title: '기술적 특징',
      type: 'technical',
      technicalFeatures: [
        'React Query 기반 데이터 캐싱 및 자동 리페칭',
        '알리고(Aligo) API 연동을 통한 알림톡/친구톡 발송',
        '카카오채널 인증 및 발신 프로필 관리',
        '템플릿 CRUD 및 검수 요청 기능',
        '발송 내역 페이지네이션 지원',
        '예약 발송 취소 기능',
        'useCallback, useMemo 기반 성능 최적화',
        'memo 컴포넌트를 통한 불필요한 리렌더링 방지',
        'ErrorBoundary를 통한 에러 처리',
        'CSS 변수 기반 디자인 시스템',
        'Zero-Trust 보안 모델 (tenantId 서버 사이드 처리)',
      ],
    },
  ],
};
