/**
 * 자동화 설정 페이지 매뉴얼
 *
 * [불변 규칙] 매뉴얼 컨텐츠는 명확하고 이해하기 쉽게 작성합니다.
 */

import type { ManualPage } from '../../types/manual';

export const automationManual: ManualPage = {
  id: 'automation',
  title: '자동화 설정',
  description: '학원 운영에 필요한 자동화 규칙을 설정하고 관리하는 페이지입니다.',
  icon: 'Zap',
  lastUpdated: '2026-01-11',
  sections: [
    {
      id: 'intro',
      title: '이 화면, 언제 사용하나요?',
      type: 'intro',
      intro:
        '학원 운영을 **자동화**할 수 있는 핵심적인 설정 화면입니다. 좌측 메뉴에서 **"더보기" → "자동화 설정"**을 클릭하여 접근합니다. 결제 알림, 출결 알림, 상담 리마인더 등 **42가지 자동화 기능**을 켜고 끄거나 세부 조건을 설정할 수 있습니다. 자동화를 활용하면 반복적인 업무를 줄이고, 학부모와 학생에게 필요한 정보를 **자동으로 발송**할 수 있습니다.',
    },
    {
      id: 'features',
      title: '주요 기능',
      type: 'features',
      features: [
        '자동화 규칙 목록 조회 : 42개의 자동화 기능을 카테고리별로 확인',
        '자동화 활성화/비활성화 : 각 자동화 기능을 개별적으로 켜거나 끄기',
        '트리거 조건 설정 : 자동화가 실행되는 조건(일수, 시간, 기준값 등) 설정',
        '액션 설정 : 알림 발송 채널, 승인 필요 여부 등 세부 동작 설정',
        '검색 및 필터링 : 이름으로 검색하거나 상태/카테고리별로 필터링',
        '일괄 활성화/비활성화 : 전체 또는 카테고리별로 한 번에 켜고 끄기',
        '실행 통계 보기 : 최근 30일간의 자동화 실행 횟수 및 성공률 확인',
        '준비중 기능 표시 : 개발 예정인 자동화 기능 미리 확인',
      ],
    },
    {
      id: 'steps',
      title: '단계별 사용법',
      type: 'steps',
      stepGuides: [
        {
          title: '자동화 규칙 활성화하기',
          steps: [
            { step: 1, content: '화면에서 활성화하고 싶은 자동화 카드를 찾습니다. 검색창에 키워드를 입력하면 빠르게 찾을 수 있습니다.' },
            { step: 2, content: '해당 자동화 카드를 클릭합니다. 카드가 설정 화면으로 바뀝니다.' },
            { step: 3, content: '"자동화 활성화" 토글 스위치를 켜짐(파란색) 상태로 변경합니다.' },
            { step: 4, content: '필요한 경우 "자동화 기준 설정" 영역에서 세부 조건을 입력합니다.' },
            { step: 5, content: '화면 하단의 "저장" 버튼을 클릭하여 설정을 저장합니다.' },
          ],
          alert: {
            type: 'success',
            content: '저장이 완료되면 "자동화 설정이 저장되었습니다" 메시지가 표시됩니다.',
          },
        },
        {
          title: '자동화 규칙 비활성화하기',
          steps: [
            { step: 1, content: '비활성화하고 싶은 자동화 카드를 클릭합니다.' },
            { step: 2, content: '"자동화 활성화" 토글 스위치를 꺼짐(회색) 상태로 변경합니다.' },
            { step: 3, content: '"저장" 버튼을 클릭하여 설정을 저장합니다.' },
          ],
          alert: {
            type: 'info',
            content: '비활성화된 자동화는 카드에 "사용중단" 배지가 표시되며, 더 이상 실행되지 않습니다.',
          },
        },
        {
          title: '트리거 조건(기준값) 설정하기',
          steps: [
            { step: 1, content: '설정할 자동화 카드를 클릭하여 설정 화면을 엽니다.' },
            { step: 2, content: '"자동화 기준 설정" 영역을 확인합니다. 각 자동화마다 설정할 수 있는 조건이 다릅니다.' },
            { step: 3, content: '숫자 입력란에는 원하는 값을 입력합니다. (예 : 결제 알림을 보낼 일수, 출석률 기준 등)' },
            { step: 4, content: '드롭다운 항목에서는 원하는 옵션을 선택합니다. (예 : 알림 채널, 요일 등)' },
            { step: 5, content: '토글 스위치 항목은 켜거나 꺼서 설정합니다. (예 : 승인 필요 여부)' },
            { step: 6, content: '"저장" 버튼을 클릭하여 변경 사항을 저장합니다.' },
          ],
          alert: {
            type: 'warning',
            content: '각 입력 항목 옆에 최소/최대 값이 표시됩니다. 범위를 벗어나는 값은 저장되지 않을 수 있습니다.',
          },
        },
        {
          title: '자동화 검색하기',
          steps: [
            { step: 1, content: '화면 상단의 "자동화 검색..." 입력란을 클릭합니다.' },
            { step: 2, content: '찾고 싶은 자동화의 이름이나 설명에 포함된 키워드를 입력합니다. (예 : "결제", "출석", "알림")' },
            { step: 3, content: '입력과 동시에 해당 키워드가 포함된 자동화만 화면에 표시됩니다.' },
            { step: 4, content: '검색어를 지우면 다시 전체 자동화가 표시됩니다.' },
          ],
        },
        {
          title: '필터 사용하기',
          steps: [
            { step: 1, content: '"전체 상태" 드롭다운에서 "사용중" 또는 "사용중단"을 선택하면 해당 상태의 자동화만 표시됩니다.' },
            { step: 2, content: '"전체 카테고리" 드롭다운에서 특정 카테고리를 선택하면 해당 카테고리의 자동화만 표시됩니다.' },
            { step: 3, content: '"승인 전체" 드롭다운에서 "승인 필요" 또는 "승인 불필요"를 선택하면 해당 조건의 자동화만 표시됩니다.' },
            { step: 4, content: '여러 필터를 조합하여 사용할 수 있습니다.' },
            { step: 5, content: '"필터 초기화" 버튼을 클릭하면 모든 필터가 해제됩니다.' },
          ],
        },
        {
          title: '일괄 활성화/비활성화하기',
          steps: [
            { step: 1, content: '전체 자동화를 일괄 처리하려면 "전체 활성화" 또는 "전체 비활성화" 버튼을 클릭합니다.' },
            { step: 2, content: '특정 카테고리만 일괄 처리하려면 카테고리 제목 옆의 "전체 활성화" 또는 "전체 비활성화" 버튼을 클릭합니다.' },
            { step: 3, content: '확인 창이 나타나면 "확인"을 클릭하여 일괄 변경을 적용합니다.' },
          ],
          alert: {
            type: 'warning',
            content: '일괄 변경은 현재 화면에 표시된 자동화에만 적용됩니다. 필터가 적용되어 있다면 필터링된 항목만 변경됩니다.',
          },
        },
        {
          title: '실행 통계 확인하기',
          steps: [
            { step: 1, content: '화면 상단 우측의 "실행 통계 표시" 토글을 켭니다.' },
            { step: 2, content: '각 자동화 카드에 최근 30일간의 실행 횟수, 성공, 실패 건수가 표시됩니다.' },
            { step: 3, content: '화면 상단에는 전체 통계 요약(총 실행 횟수, 성공, 실패, 성공률)이 표시됩니다.' },
          ],
          alert: {
            type: 'info',
            content: '통계는 최근 30일간의 데이터를 기준으로 합니다. 데이터가 없는 경우 "최근 30일 데이터 없음"으로 표시됩니다.',
          },
        },
      ],
    },
    {
      id: 'screen',
      title: '화면 뜯어보기',
      type: 'screen',
      screenGroups: [
        {
          title: '상단 컨트롤 영역',
          items: [
            { title: '검색창', description: '자동화 이름이나 설명에 포함된 키워드로 검색합니다. 입력 즉시 결과가 필터링됩니다.' },
            { title: '상태 필터', description: '"전체 상태", "사용중", "사용중단" 중 하나를 선택하여 해당 상태의 자동화만 표시합니다.' },
            { title: '카테고리 필터', description: '결제, 운영, 출결, 알림 등 특정 카테고리의 자동화만 표시합니다.' },
            { title: '승인 필터', description: '승인이 필요한 자동화 또는 승인이 불필요한 자동화만 표시합니다.' },
            { title: '필터 초기화 버튼', description: '모든 필터를 해제하고 전체 자동화를 표시합니다. 필터가 적용된 경우에만 표시됩니다.' },
          ],
        },
        {
          title: '전체 통계 영역 (통계 표시 시)',
          items: [
            { title: '총 실행 횟수', description: '최근 30일간 실행된 모든 자동화의 총 횟수입니다.' },
            { title: '성공', description: '성공적으로 완료된 자동화 실행 횟수입니다.' },
            { title: '실패', description: '오류로 인해 실패한 자동화 실행 횟수입니다.' },
            { title: '성공률', description: '전체 실행 중 성공한 비율을 백분율로 표시합니다.' },
            { title: '활성 자동화', description: '최근 30일간 한 번 이상 실행된 자동화의 개수입니다.' },
          ],
        },
        {
          title: '일괄 작업 및 토글 영역',
          items: [
            { title: '전체 활성화 버튼', description: '현재 화면에 표시된 모든 자동화를 한 번에 활성화합니다.' },
            { title: '전체 비활성화 버튼', description: '현재 화면에 표시된 모든 자동화를 한 번에 비활성화합니다.' },
            { title: '실행 통계 표시 토글', description: '켜면 각 자동화 카드에 실행 통계가 표시됩니다.' },
            { title: '준비중 포함 토글', description: '켜면 아직 개발 중인 자동화 기능도 목록에 표시됩니다.' },
          ],
        },
        {
          title: '카테고리별 섹션',
          items: [
            { title: '카테고리 제목', description: '자동화 기능의 분류입니다. (예 : 결제 관련, 운영 관련, 출결 관련 등)' },
            { title: '카테고리 설명', description: '해당 카테고리에 포함된 자동화 기능의 역할을 설명합니다.' },
            { title: '카테고리별 전체 활성화/비활성화', description: '해당 카테고리의 모든 자동화를 일괄로 켜거나 끌 수 있습니다.' },
          ],
        },
        {
          title: '자동화 카드 (일반 모드)',
          items: [
            { title: '아이콘', description: '활성화된 자동화는 번개 아이콘, 비활성화된 자동화는 설정 아이콘이 표시됩니다.' },
            { title: '제목', description: '자동화 기능의 이름입니다. (예 : "결제 예정 알림", "출석 리마인더")' },
            { title: '설명', description: '자동화가 어떤 상황에서 무엇을 하는지 설명합니다. 설정된 조건 값이 굵은 글씨로 표시됩니다.' },
            { title: '상태 배지', description: '"사용중"(초록색) 또는 "사용중단"(회색)으로 현재 상태를 표시합니다.' },
            { title: '실행 통계', description: '통계 표시가 켜져 있으면 실행 횟수, 성공, 실패 건수가 표시됩니다.' },
          ],
        },
        {
          title: '자동화 설정 카드 (편집 모드)',
          items: [
            { title: '제목', description: '편집 중인 자동화의 이름입니다.' },
            { title: '설명', description: '자동화의 기본 동작을 설명합니다.' },
            { title: '자동화 활성화 토글', description: '이 자동화 기능을 켜거나 끕니다.' },
            { title: '자동화 기준 설정', description: '자동화가 실행되는 조건을 설정합니다. 자동화마다 설정 항목이 다릅니다.' },
            { title: '취소 버튼', description: '변경 사항을 저장하지 않고 일반 모드로 돌아갑니다.' },
            { title: '저장 버튼', description: '변경된 설정을 저장하고 일반 모드로 돌아갑니다.' },
          ],
        },
      ],
    },
    {
      id: 'tips',
      title: '알아두면 좋은 팁 & 주의사항',
      type: 'screen',
      screenGroups: [
        {
          title: '꼭 알아야 할 주의사항',
          items: [
            { title: '저장 필수', description: '자동화 설정을 변경한 후 반드시 "저장" 버튼을 눌러야 합니다. 저장하지 않고 다른 카드를 클릭하면 변경 사항이 사라집니다.' },
            { title: '설정 없으면 실행 안 됨', description: '자동화는 "설정이 없으면 실행하지 않음" 원칙(Fail Closed)을 따릅니다. 활성화하지 않은 자동화는 절대 실행되지 않습니다.' },
            { title: '알림 발송 주의', description: '자동화를 활성화하면 조건이 충족될 때마다 학부모나 학생에게 알림이 발송됩니다. 테스트 후 활성화하는 것을 권장합니다.' },
            { title: '일괄 변경 확인', description: '전체 활성화/비활성화 버튼은 현재 필터링된 항목에만 적용됩니다. 원치 않는 변경을 방지하려면 필터 상태를 확인하세요.' },
          ],
        },
        {
          title: '효율적으로 사용하는 팁',
          items: [
            { title: '카테고리별 관리', description: '처음 설정할 때는 카테고리별로 하나씩 확인하면서 필요한 자동화만 활성화하세요.' },
            { title: '기본값 활용', description: '각 설정 항목에는 기본값이 있습니다. 특별한 이유가 없다면 기본값을 사용해도 좋습니다.' },
            { title: '통계 확인', description: '실행 통계를 주기적으로 확인하여 자동화가 제대로 동작하는지 점검하세요. 실패가 많다면 설정을 재검토하세요.' },
            { title: '준비중 기능 확인', description: '"준비중 포함" 토글을 켜면 앞으로 추가될 자동화 기능을 미리 확인할 수 있습니다.' },
            { title: '검색 활용', description: '42개의 자동화 중 원하는 기능을 빠르게 찾으려면 검색 기능을 활용하세요.' },
          ],
        },
        {
          title: '문제 해결',
          items: [
            { title: '자동화가 실행되지 않아요', description: '해당 자동화가 "사용중" 상태인지 확인하세요. 또한 트리거 조건이 올바르게 설정되어 있는지 확인하세요.' },
            { title: '알림이 너무 많이 가요', description: '자동화 기준 설정에서 조건을 조정하세요. (예 : 알림 일수를 늘리거나, 기준값을 높이기)' },
            { title: '저장이 안 돼요', description: '입력 값이 허용 범위 내인지 확인하세요. 인터넷 연결 상태도 확인해주세요.' },
            { title: '통계가 표시되지 않아요', description: '"실행 통계 표시" 토글이 켜져 있는지 확인하세요. 최근 30일간 실행된 적이 없으면 "데이터 없음"으로 표시됩니다.' },
          ],
        },
      ],
    },
    {
      id: 'mobile',
      title: '모바일/태블릿에서 사용하기',
      type: 'screen',
      screenGroups: [
        {
          title: '모바일에서의 차이점',
          items: [
            { title: '1열 표시', description: '스마트폰에서는 자동화 카드가 1열로 표시되어 위아래로 스크롤하며 확인합니다.' },
            { title: '필터 영역', description: '검색창과 필터 드롭다운이 세로로 배치됩니다.' },
            { title: '터치 조작', description: '카드를 터치하여 설정 화면을 열고, 토글과 버튼을 터치하여 조작합니다.' },
          ],
        },
        {
          title: '태블릿에서의 차이점',
          items: [
            { title: '2열 표시', description: '태블릿에서는 자동화 카드가 2열로 표시되어 한 화면에 더 많은 항목을 볼 수 있습니다.' },
            { title: '가로 모드', description: '태블릿을 가로로 사용하면 PC와 비슷한 3열 레이아웃으로 표시됩니다.' },
          ],
        },
      ],
    },
    {
      id: 'technical',
      title: '기술적 특징',
      type: 'technical',
      technicalFeatures: [
        'Policy 기반 자동화 설정 관리 (tenant_settings)',
        'React Query 기반 데이터 캐싱 및 낙관적 업데이트',
        'AUTOMATION_EVENT_CATALOG 기반 42개 자동화 항목 정의',
        'AUTOMATION_EVENT_CRITERIA_FIELDS 기반 동적 폼 렌더링',
        '카테고리별 그룹화 및 정렬 (POLICY_KEY_V2_CATEGORIES)',
        'localStorage 기반 필터 상태 유지',
        'useMutation 기반 설정 저장 및 일괄 업데이트',
        'useIndustryTerms 훅 기반 업종 중립 용어 지원',
        'CSS 변수 기반 반응형 디자인 시스템',
        'execution_audit_runs 테이블 기반 실행 통계 조회',
      ],
    },
  ],
};
